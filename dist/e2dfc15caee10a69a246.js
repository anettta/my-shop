/*! For license information please see e2dfc15caee10a69a246.js.LICENSE.txt */
import _toArray from"@babel/runtime/helpers/toArray";import _construct from"@babel/runtime/helpers/construct";import _get from"@babel/runtime/helpers/get";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _toConsumableArray from"@babel/runtime/helpers/toConsumableArray";import _asyncToGenerator from"@babel/runtime/helpers/asyncToGenerator";import _assertThisInitialized from"@babel/runtime/helpers/assertThisInitialized";import _inherits from"@babel/runtime/helpers/inherits";import _possibleConstructorReturn from"@babel/runtime/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/getPrototypeOf";import _wrapNativeSuper from"@babel/runtime/helpers/wrapNativeSuper";import _classCallCheck from"@babel/runtime/helpers/classCallCheck";import _createClass from"@babel/runtime/helpers/createClass";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import _typeof from"@babel/runtime/helpers/typeof";import _regeneratorRuntime from"@babel/runtime/regenerator";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}!function(){var e={7757:function(e,t,n){e.exports=n(5666)},1647:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,'body{font-family:"Open Sans Condensed",sans-serif;padding:20px 60px;background-color:#e4efe7}a{text-decoration:none;color:#4b4949}*{box-sizing:border-box}',""]);var s=o},5302:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".checkout-page{width:55%;min-height:90vh;display:flex;flex-direction:column;align-items:center;margin:50px auto 0}.checkout-page .checkout-header{width:100%;padding:10px 0;display:flex;justify-content:space-between;border-bottom:1px solid #a9a9a9}.checkout-page .checkout-header .header-block{text-transform:capitalize;width:23%}.checkout-page .checkout-header .header-block:last-child{width:8%}.checkout-page .total{margin-top:30px;margin-left:auto;font-size:36px}button{margin-left:auto;margin-top:50px}.test-warning{text-align:center;margin-top:40px;font-size:24px;color:red}",""]);var s=o},876:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".collection-page{display:flex;flex-direction:column}.collection-page .title{font-size:38px;margin:0 auto 30px}.collection-page .items{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:10px}.collection-page .items .collection-item{margin-bottom:30px}",""]);var s=o},9852:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".homepage{display:flex;flex-direction:column;align-items:center;padding:20px 80px}",""]);var s=o},2428:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,"",""]);var s=o},8928:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".sign-in-and-sign-up{width:850px;display:flex;justify-content:space-between;margin:30px auto}",""]);var s=o},4627:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,'.custom-button{min-width:165px;width:auto;height:50px;letter-spacing:.5px;line-height:50px;padding:0 35px 0 35px;font-size:12px;background-color:#141414;color:#e9e7e7;text-transform:uppercase;font-family:"Open Sans Condensed";font-weight:bolder;border:none;cursor:pointer;display:flex;justify-content:center}.custom-button:hover{background-color:#fff;color:#000;border:1px solid #000}.custom-button.google-sign-in{background-color:#a3d9c8;color:#141414}.custom-button.google-sign-in:hover{background-color:#81ac9e;border:none}.custom-button.inverted{background-color:#fff;color:#000;border:1px solid #000}.custom-button.inverted:hover{background-color:#000;color:#fff;border:none}',""]);var s=o},5044:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".cart-dropdown{position:absolute;width:240px;height:340px;display:flex;flex-direction:column;padding:20px;border:1px dotted #cec9c9;background-color:#c8d3cb;top:90px;right:40px;z-index:5}.cart-dropdown .empty-message{font-size:18px;margin:50px auto}.cart-dropdown .cart-items{height:240px;display:flex;flex-direction:column;overflow:scroll}.cart-dropdown button{margin-top:auto}",""]);var s=o},415:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".cart-icon{width:45px;height:45px;position:relative;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#302f2f}.cart-icon:hover{color:#141414}.cart-icon .shopping-icon{width:30px;height:30px}.cart-icon .item-count{position:absolute;font-size:10px;font-weight:bold;bottom:12px;color:#f8faf8}",""]);var s=o},410:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".cart-item{width:100%;display:flex;height:80px;margin-bottom:15px}.cart-item img{width:30%}.cart-item .item-details{width:70%;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:10px 20px}.cart-item .item-details .name{font-size:16px}",""]);var s=o},6270:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".checkout-item{width:100%;display:flex;min-height:100px;border-bottom:1px solid #a9a9a9;padding:15px 0;font-size:20px;align-items:center}.checkout-item .image-container{width:23%;padding-right:15px}.checkout-item .image-container img{width:100%;height:100%}.checkout-item .name,.checkout-item .quantity,.checkout-item .price{width:23%}.checkout-item .quantity{display:flex}.checkout-item .arrow{cursor:pointer}.checkout-item .value{margin:0 10px}.checkout-item .remove-button{padding-left:12px;cursor:pointer}",""]);var s=o},5676:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".collection-item{width:22vw;display:flex;flex-direction:column;height:350px;align-items:center;position:relative}.collection-item .image{width:100%;height:95%;background-size:cover;background-position:center;margin-bottom:5px}.collection-item .custom-button{width:80%;opacity:.7;position:absolute;top:255px;display:none}.collection-item:hover .image{opacity:.8}.collection-item:hover .custom-button{opacity:.85;display:flex}.collection-item .collection-footer{width:100%;height:5%;display:flex;justify-content:space-between;font-size:18px}.collection-item .collection-footer .name{width:90%;margin-bottom:15px}.collection-item .collection-footer .price{width:10%}",""]);var s=o},5366:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".collection-preview{display:flex;flex-direction:column;margin-bottom:30px}.collection-preview .title{font-size:28px;margin-bottom:25px}.collection-preview .preview{display:flex;justify-content:space-evenly}",""]);var s=o},2890:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".collections-overview{display:flex;flex-direction:column}",""]);var s=o},8222:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".directory-menu{width:100%;display:flex;flex-wrap:wrap;justify-content:space-between}",""]);var s=o},3666:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".group{position:relative;margin:45px 0}.group .form-input{background:none;background:#fff;color:gray;font-size:18px;padding:10px 10px 10px 5px;display:block;width:100%;border:none;border-radius:0;margin:25px 0}.group .form-input:focus{outline:none}.group .form-input:focus~.form-input-label{top:-14px;font-size:12px;color:#000}.group input[type=password]{letter-spacing:.3em}.group .form-input-label{color:gray;font-size:16px;font-weight:normal;position:absolute;pointer-events:none;left:5px;top:10px;transition:300ms ease all}.group .form-input-label.shrink{top:-14px;font-size:12px;color:#000}",""]);var s=o},219:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".header{height:70px;width:100%;display:flex;justify-content:space-between;margin-bottom:25px}.header .logo-container{width:45px;height:45px;position:relative;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff}.header .logo{width:28px;height:28px;color:#81ac9e}.header .logo:hover{color:#6b8f83}.header .options{width:50%;height:100%;display:flex;align-items:center;justify-content:flex-end}.header .options .option{padding:10px 15px;cursor:pointer}",""]);var s=o},2952:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".menu-item{min-width:30%;height:240px;flex:1 1 auto;display:flex;align-items:center;justify-content:center;border:.1px dotted #cecaca;margin:0 7.5px 15px;overflow:hidden}.menu-item:hover{cursor:pointer}.menu-item:hover .background-image{transform:scale(1.1);transition:transform 6s cubic-bezier(0.25, 0.45, 0.45, 0.95)}.menu-item:hover .content{opacity:.9}.menu-item.large{height:380px}.menu-item:first-child{margin-right:7.5px}.menu-item:last-child{margin-left:7.5px}.menu-item .background-image{width:100%;height:100%;background-position:center;background-size:cover}.menu-item .content{height:90px;padding:0 25px;display:flex;flex-direction:column;align-items:center;justify-content:center;border:.1px dotted #cecaca;background-color:#fff;opacity:.7;position:absolute}.menu-item .content .title{font-weight:bold;margin-bottom:6px;font-size:22px;color:#4a4a4a}.menu-item .content .subtitle{font-weight:lighter;font-size:16px}",""]);var s=o},9113:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".sign-in{width:380px;display:flex;flex-direction:column}.title{margin:10px 0}.buttons{display:flex;justify-content:space-between}",""]);var s=o},3589:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8081),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".sign-up{display:flex;flex-direction:column;width:380px}.sign-up .title{margin:10px 0}",""]);var s=o},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(o[u]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);r&&o[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),t.push(l))}},t}},8081:function(e){"use strict";e.exports=function(e){return e[1]}},8679:function(e,t,n){"use strict";var r=n(1296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!(a[y]||r&&r[y]||v&&v[y]||s&&s[y])){var g=h(n,y);try{c(t,y,g)}catch(e){}}}}return t}},6103:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(e){if("object"==_typeof(e)&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||b(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"==_typeof(e)&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"==_typeof(e)&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===_||e.$$typeof===y)},t.typeOf=b},1296:function(e,t,n){"use strict";e.exports=n(6103)},773:function(e,t,n){var r,i="__lodash_hash_undefined__",a=/^\[object .+?Constructor\]$/,o="object"==_typeof(n.g)&&n.g&&n.g.Object===Object&&n.g,s="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,u=o||s||Function("return this")(),c=Array.prototype,l=Function.prototype,f=Object.prototype,h=u["__core-js_shared__"],d=(r=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",p=l.toString,v=f.hasOwnProperty,m=f.toString,y=RegExp("^"+p.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=c.splice,k=E(u,"Map"),_=E(Object,"create");function b(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function C(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function x(e,t){var n,r,i=e.__data__;return("string"==(r=_typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function E(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!S(e)||d&&d in e)return!1;var t=function(e){var t=S(e)?m.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?y:a;return t.test(function(e){if(null!=e){try{return p.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function I(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new(I.Cache||T),n}function S(e){var t=_typeof(e);return!!e&&("object"==t||"function"==t)}b.prototype.clear=function(){this.__data__=_?_(null):{}},b.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},b.prototype.get=function(e){var t=this.__data__;if(_){var n=t[e];return n===i?void 0:n}return v.call(t,e)?t[e]:void 0},b.prototype.has=function(e){var t=this.__data__;return _?void 0!==t[e]:v.call(t,e)},b.prototype.set=function(e,t){return this.__data__[e]=_&&void 0===t?i:t,this},w.prototype.clear=function(){this.__data__=[]},w.prototype.delete=function(e){var t=this.__data__,n=C(t,e);return!(n<0||(n==t.length-1?t.pop():g.call(t,n,1),0))},w.prototype.get=function(e){var t=this.__data__,n=C(t,e);return n<0?void 0:t[n][1]},w.prototype.has=function(e){return C(this.__data__,e)>-1},w.prototype.set=function(e,t){var n=this.__data__,r=C(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},T.prototype.clear=function(){this.__data__={hash:new b,map:new(k||w),string:new b}},T.prototype.delete=function(e){return x(this,e).delete(e)},T.prototype.get=function(e){return x(this,e).get(e)},T.prototype.has=function(e){return x(this,e).has(e)},T.prototype.set=function(e,t){return x(this,e).set(e,t),this},I.Cache=T,e.exports=I},7418:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},2703:function(e,t,n){"use strict";var r=n(414);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},5697:function(e,t,n){e.exports=n(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4448:function(e,t,n){"use strict";var r=n(7294),i=n(7418),a=n(3840);function o(e,t,n,r,i,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,a,o,s],c=0;(e=Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw e.framesToPop=1,e}}function s(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);o(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function u(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}r||s("227");var c=!1,l=null,f=!1,h=null,d={onError:function(e){c=!0,l=e}};function p(e,t,n,r,i,a,o,s,f){c=!1,l=null,u.apply(d,arguments)}var v=null,m={};function y(){if(v)for(var e in m){var t=m[e],n=v.indexOf(e);if(-1<n||s("96",e),!k[n])for(var r in t.extractEvents||s("97",e),k[n]=t,n=t.eventTypes){var i=void 0,a=n[r],o=t,u=r;_.hasOwnProperty(u)&&s("99",u),_[u]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&g(c[i],o,u);i=!0}else a.registrationName?(g(a.registrationName,o,u),i=!0):i=!1;i||s("98",r,e)}}}function g(e,t,n){b[e]&&s("100",e),b[e]=t,w[e]=t.eventTypes[n].dependencies}var k=[],_={},b={},w={},T=null,C=null,x=null;function E(e,t,n){var r=e.type||"unknown-event";e.currentTarget=x(n),function(e,t,n,r,i,a,o,u,d){if(p.apply(this,arguments),c){if(c){var v=l;c=!1,l=null}else s("198"),v=void 0;f||(f=!0,h=v)}}(r,t,void 0,e),e.currentTarget=null}function I(e,t){return null==t&&s("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function S(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var R=null;function A(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)E(e,t[r],n[r]);else t&&E(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var O={injectEventPluginOrder:function(e){v&&s("101"),v=Array.prototype.slice.call(e),y()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];m.hasOwnProperty(t)&&m[t]===r||(m[t]&&s("102",t),m[t]=r,n=!0)}n&&y()}};function N(e,t){var n=e.stateNode;if(!n)return null;var r=T(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&s("231",t,_typeof(n)),n)}function P(e){if(null!==e&&(R=I(R,e)),e=R,R=null,e&&(S(e,A),R&&s("95"),f))throw e=h,f=!1,h=null,e}var D=Math.random().toString(36).slice(2),L="__reactInternalInstance$"+D,M="__reactEventHandlers$"+D;function F(e){if(e[L])return e[L];for(;!e[L];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[L]).tag||6===e.tag?e:null}function U(e){return!(e=e[L])||5!==e.tag&&6!==e.tag?null:e}function j(e){if(5===e.tag||6===e.tag)return e.stateNode;s("33")}function V(e){return e[M]||null}function G(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function q(e,t,n){(t=N(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=I(n._dispatchListeners,t),n._dispatchInstances=I(n._dispatchInstances,e))}function B(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=G(t);for(t=n.length;0<t--;)q(n[t],"captured",e);for(t=0;t<n.length;t++)q(n[t],"bubbled",e)}}function z(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=N(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=I(n._dispatchListeners,t),n._dispatchInstances=I(n._dispatchInstances,e))}function H(e){e&&e.dispatchConfig.registrationName&&z(e._targetInst,null,e)}function W(e){S(e,B)}var K=!("undefined"==typeof window||!window.document||!window.document.createElement);function Q(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Y={animationend:Q("Animation","AnimationEnd"),animationiteration:Q("Animation","AnimationIteration"),animationstart:Q("Animation","AnimationStart"),transitionend:Q("Transition","TransitionEnd")},J={},$={};function Z(e){if(J[e])return J[e];if(!Y[e])return e;var t,n=Y[e];for(t in n)if(n.hasOwnProperty(t)&&t in $)return J[e]=n[t];return e}K&&($=document.createElement("div").style,"AnimationEvent"in window||(delete Y.animationend.animation,delete Y.animationiteration.animation,delete Y.animationstart.animation),"TransitionEvent"in window||delete Y.transitionend.transition);var X=Z("animationend"),ee=Z("animationiteration"),te=Z("animationstart"),ne=Z("transitionend"),re="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ie=null,ae=null,oe=null;function se(){if(oe)return oe;var e,t,n=ae,r=n.length,i="value"in ie?ie.value:ie.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return oe=i.slice(e,1<t?1-t:void 0)}function ue(){return!0}function ce(){return!1}function le(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ue:ce,this.isPropagationStopped=ce,this}function fe(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function he(e){e instanceof this||s("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function de(e){e.eventPool=[],e.getPooled=fe,e.release=he}i(le.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ue)},persist:function(){this.isPersistent=ue},isPersistent:ce,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce,this._dispatchInstances=this._dispatchListeners=null}}),le.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},le.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,de(n),n},de(le);var pe=le.extend({data:null}),ve=le.extend({data:null}),me=[9,13,27,32],ye=K&&"CompositionEvent"in window,ge=null;K&&"documentMode"in document&&(ge=document.documentMode);var ke=K&&"TextEvent"in window&&!ge,_e=K&&(!ye||ge&&8<ge&&11>=ge),be=String.fromCharCode(32),we={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Te=!1;function Ce(e,t){switch(e){case"keyup":return-1!==me.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function xe(e){return"object"==_typeof(e=e.detail)&&"data"in e?e.data:null}var Ee=!1,Ie={eventTypes:we,extractEvents:function(e,t,n,r){var i=void 0,a=void 0;if(ye)e:{switch(e){case"compositionstart":i=we.compositionStart;break e;case"compositionend":i=we.compositionEnd;break e;case"compositionupdate":i=we.compositionUpdate;break e}i=void 0}else Ee?Ce(e,n)&&(i=we.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=we.compositionStart);return i?(_e&&"ko"!==n.locale&&(Ee||i!==we.compositionStart?i===we.compositionEnd&&Ee&&(a=se()):(ae="value"in(ie=r)?ie.value:ie.textContent,Ee=!0)),i=pe.getPooled(i,t,n,r),(a||null!==(a=xe(n)))&&(i.data=a),W(i),a=i):a=null,(e=ke?function(e,t){switch(e){case"compositionend":return xe(t);case"keypress":return 32!==t.which?null:(Te=!0,be);case"textInput":return(e=t.data)===be&&Te?null:e;default:return null}}(e,n):function(e,t){if(Ee)return"compositionend"===e||!ye&&Ce(e,t)?(e=se(),oe=ae=ie=null,Ee=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _e&&"ko"!==t.locale?null:t.data}}(e,n))?((t=ve.getPooled(we.beforeInput,t,n,r)).data=e,W(t)):t=null,null===a?t:null===t?a:[a,t]}},Se=null,Re=null,Ae=null;function Oe(e){if(e=C(e)){"function"!=typeof Se&&s("280");var t=T(e.stateNode);Se(e.stateNode,e.type,t)}}function Ne(e){Re?Ae?Ae.push(e):Ae=[e]:Re=e}function Pe(){if(Re){var e=Re,t=Ae;if(Ae=Re=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}function De(e,t){return e(t)}function Le(e,t,n){return e(t,n)}function Me(){}var Fe=!1;function Ue(e,t){if(Fe)return e(t);Fe=!0;try{return De(e,t)}finally{Fe=!1,(null!==Re||null!==Ae)&&(Me(),Pe())}}var je={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ve(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!je[e.type]:"textarea"===t}function Ge(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function qe(e){if(!K)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ze(e){e._valueTracker||(e._valueTracker=function(e){var t=Be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function He(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var We=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;We.hasOwnProperty("ReactCurrentDispatcher")||(We.ReactCurrentDispatcher={current:null});var Ke=/^(.*)[\\\/]/,Qe="function"==typeof Symbol&&Symbol.for,Ye=Qe?Symbol.for("react.element"):60103,Je=Qe?Symbol.for("react.portal"):60106,$e=Qe?Symbol.for("react.fragment"):60107,Ze=Qe?Symbol.for("react.strict_mode"):60108,Xe=Qe?Symbol.for("react.profiler"):60114,et=Qe?Symbol.for("react.provider"):60109,tt=Qe?Symbol.for("react.context"):60110,nt=Qe?Symbol.for("react.concurrent_mode"):60111,rt=Qe?Symbol.for("react.forward_ref"):60112,it=Qe?Symbol.for("react.suspense"):60113,at=Qe?Symbol.for("react.memo"):60115,ot=Qe?Symbol.for("react.lazy"):60116,st="function"==typeof Symbol&&Symbol.iterator;function ut(e){return null===e||"object"!=_typeof(e)?null:"function"==typeof(e=st&&e[st]||e["@@iterator"])?e:null}function ct(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case nt:return"ConcurrentMode";case $e:return"Fragment";case Je:return"Portal";case Xe:return"Profiler";case Ze:return"StrictMode";case it:return"Suspense"}if("object"==_typeof(e))switch(e.$$typeof){case tt:return"Context.Consumer";case et:return"Context.Provider";case rt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case at:return ct(e.type);case ot:if(e=1===e._status?e._result:null)return ct(e)}return null}function lt(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ct(e.type);n=null,r&&(n=ct(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(Ke,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}var ft=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ht=Object.prototype.hasOwnProperty,dt={},pt={};function vt(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){mt[e]=new vt(e,0,!1,e,null)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];mt[t]=new vt(t,1,!1,e[1],null)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){mt[e]=new vt(e,2,!1,e.toLowerCase(),null)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){mt[e]=new vt(e,2,!1,e,null)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){mt[e]=new vt(e,3,!1,e.toLowerCase(),null)})),["checked","multiple","muted","selected"].forEach((function(e){mt[e]=new vt(e,3,!0,e,null)})),["capture","download"].forEach((function(e){mt[e]=new vt(e,4,!1,e,null)})),["cols","rows","size","span"].forEach((function(e){mt[e]=new vt(e,6,!1,e,null)})),["rowSpan","start"].forEach((function(e){mt[e]=new vt(e,5,!1,e.toLowerCase(),null)}));var yt=/[\-:]([a-z])/g;function gt(e){return e[1].toUpperCase()}function kt(e,t,n,r){var i=mt.hasOwnProperty(t)?mt[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(_typeof(t)){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ht.call(pt,e)||!ht.call(dt,e)&&(ft.test(e)?pt[e]=!0:(dt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function _t(e){switch(_typeof(e)){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function wt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=_t(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Tt(e,t){null!=(t=t.checked)&&kt(e,"checked",t,!1)}function Ct(e,t){Tt(e,t);var n=_t(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Et(e,t.type,n):t.hasOwnProperty("defaultValue")&&Et(e,t.type,_t(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function xt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Et(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(yt,gt);mt[t]=new vt(t,1,!1,e,null)})),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(yt,gt);mt[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink")})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(yt,gt);mt[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")})),["tabIndex","crossOrigin"].forEach((function(e){mt[e]=new vt(e,1,!1,e.toLowerCase(),null)}));var It={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function St(e,t,n){return(e=le.getPooled(It.change,e,t,n)).type="change",Ne(n),W(e),e}var Rt=null,At=null;function Ot(e){P(e)}function Nt(e){if(He(j(e)))return e}function Pt(e,t){if("change"===e)return t}var Dt=!1;function Lt(){Rt&&(Rt.detachEvent("onpropertychange",Mt),At=Rt=null)}function Mt(e){"value"===e.propertyName&&Nt(At)&&Ue(Ot,e=St(At,e,Ge(e)))}function Ft(e,t,n){"focus"===e?(Lt(),At=n,(Rt=t).attachEvent("onpropertychange",Mt)):"blur"===e&&Lt()}function Ut(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Nt(At)}function jt(e,t){if("click"===e)return Nt(t)}function Vt(e,t){if("input"===e||"change"===e)return Nt(t)}K&&(Dt=qe("input")&&(!document.documentMode||9<document.documentMode));var Gt={eventTypes:It,_isInputEventSupported:Dt,extractEvents:function(e,t,n,r){var i=t?j(t):window,a=void 0,o=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?a=Pt:Ve(i)?Dt?a=Vt:(a=Ut,o=Ft):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=jt),a&&(a=a(e,t)))return St(a,n,r);o&&o(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Et(i,"number",i.value)}},qt=le.extend({view:null,detail:null}),Bt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Bt[e])&&!!t[e]}function Ht(){return zt}var Wt=0,Kt=0,Qt=!1,Yt=!1,Jt=qt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ht,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Wt;return Wt=e.screenX,Qt?"mousemove"===e.type?e.screenX-t:0:(Qt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Kt;return Kt=e.screenY,Yt?"mousemove"===e.type?e.screenY-t:0:(Yt=!0,0)}}),$t=Jt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Zt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Xt={eventTypes:Zt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,t=(t=n.relatedTarget||n.toElement)?F(t):null):a=null,a===t)return null;var o=void 0,s=void 0,u=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(o=Jt,s=Zt.mouseLeave,u=Zt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=$t,s=Zt.pointerLeave,u=Zt.pointerEnter,c="pointer");var l=null==a?i:j(a);if(i=null==t?i:j(t),(e=o.getPooled(s,a,n,r)).type=c+"leave",e.target=l,e.relatedTarget=i,(n=o.getPooled(u,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=l,r=t,a&&r)e:{for(i=r,c=0,o=t=a;o;o=G(o))c++;for(o=0,u=i;u;u=G(u))o++;for(;0<c-o;)t=G(t),c--;for(;0<o-c;)i=G(i),o--;for(;c--;){if(t===i||t===i.alternate)break e;t=G(t),i=G(i)}t=null}else t=null;for(i=t,t=[];a&&a!==i&&(null===(c=a.alternate)||c!==i);)t.push(a),a=G(a);for(a=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)a.push(r),r=G(r);for(r=0;r<t.length;r++)z(t[r],"bubbled",e);for(r=a.length;0<r--;)z(a[r],"captured",n);return[e,n]}};function en(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var tn=Object.prototype.hasOwnProperty;function nn(e,t){if(en(e,t))return!0;if("object"!=_typeof(e)||null===e||"object"!=_typeof(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!tn.call(t,n[r])||!en(e[n[r]],t[n[r]]))return!1;return!0}function rn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function an(e){2!==rn(e)&&s("188")}function on(e){if(e=function(e){var t=e.alternate;if(!t)return 3===(t=rn(e))&&s("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var o=i.child;o;){if(o===n)return an(i),e;if(o===r)return an(i),t;o=o.sibling}s("188")}if(n.return!==r.return)n=i,r=a;else{o=!1;for(var u=i.child;u;){if(u===n){o=!0,n=i,r=a;break}if(u===r){o=!0,r=i,n=a;break}u=u.sibling}if(!o){for(u=a.child;u;){if(u===n){o=!0,n=a,r=i;break}if(u===r){o=!0,r=a,n=i;break}u=u.sibling}o||s("189")}}n.alternate!==r&&s("190")}return 3!==n.tag&&s("188"),n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var sn=le.extend({animationName:null,elapsedTime:null,pseudoElement:null}),un=le.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cn=qt.extend({relatedTarget:null});function ln(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn=qt.extend({key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ln(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ht,charCode:function(e){return"keypress"===e.type?ln(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ln(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),pn=Jt.extend({dataTransfer:null}),vn=qt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ht}),mn=le.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),yn=Jt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),gn=[["abort","abort"],[X,"animationEnd"],[ee,"animationIteration"],[te,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ne,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],kn={},_n={};function bn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},kn[e]=t,_n[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach((function(e){bn(e,!0)})),gn.forEach((function(e){bn(e,!1)}));var wn={eventTypes:kn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=_n[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=_n[e];if(!i)return null;switch(e){case"keypress":if(0===ln(n))return null;case"keydown":case"keyup":e=dn;break;case"blur":case"focus":e=cn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Jt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=vn;break;case X:case ee:case te:e=sn;break;case ne:e=mn;break;case"scroll":e=qt;break;case"wheel":e=yn;break;case"copy":case"cut":case"paste":e=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=$t;break;default:e=le}return W(t=e.getPooled(i,t,n,r)),t}},Tn=wn.isInteractiveTopLevelEventType,Cn=[];function xn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=F(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Ge(e.nativeEvent);r=e.topLevelType;for(var a=e.nativeEvent,o=null,s=0;s<k.length;s++){var u=k[s];u&&(u=u.extractEvents(r,t,a,i))&&(o=I(o,u))}P(o)}}var En=!0;function In(e,t){if(!t)return null;var n=(Tn(e)?Rn:An).bind(null,e);t.addEventListener(e,n,!1)}function Sn(e,t){if(!t)return null;var n=(Tn(e)?Rn:An).bind(null,e);t.addEventListener(e,n,!0)}function Rn(e,t){Le(An,e,t)}function An(e,t){if(En){var n=Ge(t);if(null===(n=F(n))||"number"!=typeof n.tag||2===rn(n)||(n=null),Cn.length){var r=Cn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Ue(xn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Cn.length&&Cn.push(e)}}}var On={},Nn=0,Pn="_reactListenersID"+(""+Math.random()).slice(2);function Dn(e){return Object.prototype.hasOwnProperty.call(e,Pn)||(e[Pn]=Nn++,On[e[Pn]]={}),On[e[Pn]]}function Ln(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Mn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fn(e,t){var n,r=Mn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mn(r)}}function Un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function jn(){for(var e=window,t=Ln();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Ln((e=t.contentWindow).document)}return t}function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Gn(e){var t=jn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Un(n.ownerDocument.documentElement,n)){if(null!==r&&Vn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Fn(n,a);var o=Fn(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qn=K&&"documentMode"in document&&11>=document.documentMode,Bn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zn=null,Hn=null,Wn=null,Kn=!1;function Qn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Kn||null==zn||zn!==Ln(n)?null:(n="selectionStart"in(n=zn)&&Vn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Wn&&nn(Wn,n)?null:(Wn=n,(e=le.getPooled(Bn.select,Hn,e,t)).type="select",e.target=zn,W(e),e))}var Yn={eventTypes:Bn,extractEvents:function(e,t,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){e:{a=Dn(a),i=w.onSelect;for(var o=0;o<i.length;o++){var s=i[o];if(!a.hasOwnProperty(s)||!a[s]){a=!1;break e}}a=!0}i=!a}if(i)return null;switch(a=t?j(t):window,e){case"focus":(Ve(a)||"true"===a.contentEditable)&&(zn=a,Hn=t,Wn=null);break;case"blur":Wn=Hn=zn=null;break;case"mousedown":Kn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Kn=!1,Qn(n,r);case"selectionchange":if(qn)break;case"keydown":case"keyup":return Qn(n,r)}return null}};function Jn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function $n(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_t(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Zn(e,t){return null!=t.dangerouslySetInnerHTML&&s("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&s("92"),Array.isArray(t)&&(1>=t.length||s("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:_t(n)}}function er(e,t){var n=_t(t.value),r=_t(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function tr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}O.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),T=V,C=U,x=j,O.injectEventPluginsByName({SimpleEventPlugin:wn,EnterLeaveEventPlugin:Xt,ChangeEventPlugin:Gt,SelectEventPlugin:Yn,BeforeInputEventPlugin:Ie});var nr="http://www.w3.org/1999/xhtml";function rr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ir(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?rr(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ar,or=void 0,sr=(ar=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((or=or||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=or.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ar(e,t)}))}:ar);function ur(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var cr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lr=["Webkit","ms","Moz","O"];function fr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||cr.hasOwnProperty(e)&&cr[e]?(""+t).trim():t+"px"}function hr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(cr).forEach((function(e){lr.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cr[t]=cr[e]}))}));var dr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pr(e,t){t&&(dr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&s("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&s("60"),"object"==_typeof(t.dangerouslySetInnerHTML)&&"__html"in t.dangerouslySetInnerHTML||s("61")),null!=t.style&&"object"!=_typeof(t.style)&&s("62",""))}function vr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function mr(e,t){var n=Dn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=w[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Sn("scroll",e);break;case"focus":case"blur":Sn("focus",e),Sn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":qe(i)&&Sn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===re.indexOf(i)&&In(i,e)}n[i]=!0}}}function yr(){}var gr=null,kr=null;function _r(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function br(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==_typeof(t.dangerouslySetInnerHTML)&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wr="function"==typeof setTimeout?setTimeout:void 0,Tr="function"==typeof clearTimeout?clearTimeout:void 0,Cr=a.unstable_scheduleCallback,xr=a.unstable_cancelCallback;function Er(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Ir(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Sr=[],Rr=-1;function Ar(e){0>Rr||(e.current=Sr[Rr],Sr[Rr]=null,Rr--)}function Or(e,t){Rr++,Sr[Rr]=e.current,e.current=t}var Nr={},Pr={current:Nr},Dr={current:!1},Lr=Nr;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Nr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Fr(e){return null!=e.childContextTypes}function Ur(e){Ar(Dr),Ar(Pr)}function jr(e){Ar(Dr),Ar(Pr)}function Vr(e,t,n){Pr.current!==Nr&&s("168"),Or(Pr,t),Or(Dr,n)}function Gr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())a in e||s("108",ct(t)||"Unknown",a);return i({},n,r)}function qr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Nr,Lr=Pr.current,Or(Pr,t),Or(Dr,Dr.current),!0}function Br(e,t,n){var r=e.stateNode;r||s("169"),n?(t=Gr(e,t,Lr),r.__reactInternalMemoizedMergedChildContext=t,Ar(Dr),Ar(Pr),Or(Pr,t)):Ar(Dr),Or(Dr,n)}var zr=null,Hr=null;function Wr(e){return function(t){try{return e(t)}catch(e){}}}function Kr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Qr(e,t,n,r){return new Kr(e,t,n,r)}function Yr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Jr(e,t){var n=e.alternate;return null===n?((n=Qr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $r(e,t,n,r,i,a){var o=2;if(r=e,"function"==typeof e)Yr(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case $e:return Zr(n.children,i,a,t);case nt:return Xr(n,3|i,a,t);case Ze:return Xr(n,2|i,a,t);case Xe:return(e=Qr(12,n,t,4|i)).elementType=Xe,e.type=Xe,e.expirationTime=a,e;case it:return(e=Qr(13,n,t,i)).elementType=it,e.type=it,e.expirationTime=a,e;default:if("object"==_typeof(e)&&null!==e)switch(e.$$typeof){case et:o=10;break e;case tt:o=9;break e;case rt:o=11;break e;case at:o=14;break e;case ot:o=16,r=null;break e}s("130",null==e?e:_typeof(e),"")}return(t=Qr(o,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Zr(e,t,n,r){return(e=Qr(7,e,r,t)).expirationTime=n,e}function Xr(e,t,n,r){return e=Qr(8,e,r,t),t=0==(1&t)?Ze:nt,e.elementType=t,e.type=t,e.expirationTime=n,e}function ei(e,t,n){return(e=Qr(6,e,null,t)).expirationTime=n,e}function ti(e,t,n){return(t=Qr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ni(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ai(t,e)}function ri(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),ai(t,e)}function ii(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ai(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,a=t.latestPingedTime;0===(i=0!==i?i:a)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function oi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var si=(new r.Component).refs;function ui(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var ci={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===rn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ms(),i=za(r=Go(r,e));i.payload=t,null!=n&&(i.callback=n),Lo(),Wa(e,i),Ho(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ms(),i=za(r=Go(r,e));i.tag=ja,i.payload=t,null!=n&&(i.callback=n),Lo(),Wa(e,i),Ho(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ms(),r=za(n=Go(n,e));r.tag=Va,null!=t&&(r.callback=t),Lo(),Wa(e,r),Ho(e,n)}};function li(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&nn(n,r)&&nn(i,a))}function fi(e,t,n){var r=!1,i=Nr,a=t.contextType;return"object"==_typeof(a)&&null!==a?a=La(a):(i=Fr(t)?Lr:Pr.current,a=(r=null!=(r=t.contextTypes))?Mr(e,i):Nr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ci,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function hi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ci.enqueueReplaceState(t,t.state,null)}function di(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=si;var a=t.contextType;"object"==_typeof(a)&&null!==a?i.context=La(a):(a=Fr(t)?Lr:Pr.current,i.context=Mr(e,a)),null!==(a=e.updateQueue)&&(Ja(e,a,n,i,r),i.state=e.memoizedState),"function"==typeof(a=t.getDerivedStateFromProps)&&(ui(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ci.enqueueReplaceState(i,i.state,null),null!==(a=e.updateQueue)&&(Ja(e,a,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var pi=Array.isArray;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=_typeof(e)){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&s("309"),r=n.stateNode),r||s("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===si&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}"string"!=typeof e&&s("284"),n._owner||s("290",e)}return e}function mi(e,t){"textarea"!==e.type&&s("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function yi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Jr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function o(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=ei(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=$r(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ti(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Zr(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=ei(""+t,e.mode,n)).return=e,t;if("object"==_typeof(t)&&null!==t){switch(t.$$typeof){case Ye:return(n=$r(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case Je:return(t=ti(t,e.mode,n)).return=e,t}if(pi(t)||ut(t))return(t=Zr(t,e.mode,n,null)).return=e,t;mi(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==_typeof(n)&&null!==n){switch(n.$$typeof){case Ye:return n.key===i?n.type===$e?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case Je:return n.key===i?l(e,t,n,r):null}if(pi(n)||ut(n))return null!==i?null:f(e,t,n,r,null);mi(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==_typeof(r)&&null!==r){switch(r.$$typeof){case Ye:return e=e.get(null===r.key?n:r.key)||null,r.type===$e?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case Je:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(pi(r)||ut(r))return f(t,e=e.get(n)||null,r,i,null);mi(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,o,u,c){var l=ut(u);"function"!=typeof l&&s("150"),null==(u=l.call(u))&&s("151");for(var f=l=null,v=o,m=o=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){v||(v=y);break}e&&v&&null===k.alternate&&t(i,v),o=a(k,o,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(o=a(g,o,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),o=a(g,o,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"==_typeof(a)&&null!==a&&a.type===$e&&null===a.key;c&&(a=a.props.children);var l="object"==_typeof(a)&&null!==a;if(l)switch(a.$$typeof){case Ye:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?a.type===$e:c.elementType===a.type){n(e,c.sibling),(r=i(c,a.type===$e?a.props.children:a.props)).ref=vi(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===$e?((r=Zr(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=$r(a.type,a.key,a.props,null,e.mode,u)).ref=vi(e,r,a),u.return=e,e=u)}return o(e);case Je:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ti(a,e.mode,u)).return=e,e=r}return o(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=ei(a,e.mode,u)).return=e,e=r),o(e);if(pi(a))return v(e,r,a,u);if(ut(a))return m(e,r,a,u);if(l&&mi(e,a),void 0===a&&!c)switch(e.tag){case 1:case 0:s("152",(u=e.type).displayName||u.name||"Component")}return n(e,r)}}var gi=yi(!0),ki=yi(!1),_i={},bi={current:_i},wi={current:_i},Ti={current:_i};function Ci(e){return e===_i&&s("174"),e}function xi(e,t){Or(Ti,t),Or(wi,e),Or(bi,_i);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ir(null,"");break;default:t=ir(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Ar(bi),Or(bi,t)}function Ei(e){Ar(bi),Ar(wi),Ar(Ti)}function Ii(e){Ci(Ti.current);var t=Ci(bi.current),n=ir(t,e.type);t!==n&&(Or(wi,e),Or(bi,n))}function Si(e){wi.current===e&&(Ar(bi),Ar(wi))}var Ri=We.ReactCurrentDispatcher,Ai=0,Oi=null,Ni=null,Pi=null,Di=null,Li=null,Mi=null,Fi=0,Ui=null,ji=0,Vi=!1,Gi=null,qi=0;function Bi(){s("321")}function zi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!en(e[n],t[n]))return!1;return!0}function Hi(e,t,n,r,i,a){if(Ai=a,Oi=t,Pi=null!==e?e.memoizedState:null,Ri.current=null===Pi?ia:aa,t=n(r,i),Vi){do{Vi=!1,qi+=1,Pi=null!==e?e.memoizedState:null,Mi=Di,Ui=Li=Ni=null,Ri.current=aa,t=n(r,i)}while(Vi);Gi=null,qi=0}return Ri.current=ra,(e=Oi).memoizedState=Di,e.expirationTime=Fi,e.updateQueue=Ui,e.effectTag|=ji,e=null!==Ni&&null!==Ni.next,Ai=0,Mi=Li=Di=Pi=Ni=Oi=null,Fi=0,Ui=null,ji=0,e&&s("300"),t}function Wi(){Ri.current=ra,Ai=0,Mi=Li=Di=Pi=Ni=Oi=null,Fi=0,Ui=null,ji=0,Vi=!1,Gi=null,qi=0}function Ki(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Li?Di=Li=e:Li=Li.next=e,Li}function Qi(){if(null!==Mi)Mi=(Li=Mi).next,Pi=null!==(Ni=Pi)?Ni.next:null;else{null===Pi&&s("310");var e={memoizedState:(Ni=Pi).memoizedState,baseState:Ni.baseState,queue:Ni.queue,baseUpdate:Ni.baseUpdate,next:null};Li=null===Li?Di=e:Li.next=e,Pi=Ni.next}return Li}function Yi(e,t){return"function"==typeof t?t(e):t}function Ji(e){var t=Qi(),n=t.queue;if(null===n&&s("311"),n.lastRenderedReducer=e,0<qi){var r=n.dispatch;if(null!==Gi){var i=Gi.get(n);if(void 0!==i){Gi.delete(n);var a=t.memoizedState;do{a=e(a,i.action),i=i.next}while(null!==i);return en(a,t.memoizedState)||(ma=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,r]}}return[t.memoizedState,r]}r=n.last;var o=t.baseUpdate;if(a=t.baseState,null!==o?(null!==r&&(r.next=null),r=o.next):r=null!==r?r.next:null,null!==r){var u=i=null,c=r,l=!1;do{var f=c.expirationTime;f<Ai?(l||(l=!0,u=o,i=a),f>Fi&&(Fi=f)):a=c.eagerReducer===e?c.eagerState:e(a,c.action),o=c,c=c.next}while(null!==c&&c!==r);l||(u=o,i=a),en(a,t.memoizedState)||(ma=!0),t.memoizedState=a,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function $i(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Ui?(Ui={lastEffect:null}).lastEffect=e.next=e:null===(t=Ui.lastEffect)?Ui.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Ui.lastEffect=e),e}function Zi(e,t,n,r){var i=Ki();ji|=e,i.memoizedState=$i(t,n,void 0,void 0===r?null:r)}function Xi(e,t,n,r){var i=Qi();r=void 0===r?null:r;var a=void 0;if(null!==Ni){var o=Ni.memoizedState;if(a=o.destroy,null!==r&&zi(r,o.deps))return void $i(0,n,a,r)}ji|=e,i.memoizedState=$i(t,n,a,r)}function ea(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ta(){}function na(e,t,n){25>qi||s("301");var r=e.alternate;if(e===Oi||null!==r&&r===Oi)if(Vi=!0,e={expirationTime:Ai,action:n,eagerReducer:null,eagerState:null,next:null},null===Gi&&(Gi=new Map),void 0===(n=Gi.get(t)))Gi.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Lo();var i=ms(),a={expirationTime:i=Go(i,e),action:n,eagerReducer:null,eagerState:null,next:null},o=t.last;if(null===o)a.next=a;else{var u=o.next;null!==u&&(a.next=u),o.next=a}if(t.last=a,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(a.eagerReducer=r,a.eagerState=l,en(l,c))return}catch(e){}Ho(e,i)}}var ra={readContext:La,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi},ia={readContext:La,useCallback:function(e,t){return Ki().memoizedState=[e,void 0===t?null:t],e},useContext:La,useEffect:function(e,t){return Zi(516,192,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Zi(4,36,ea.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zi(4,36,e,t)},useMemo:function(e,t){var n=Ki();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ki();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=na.bind(null,Oi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ki().memoizedState=e},useState:function(e){var t=Ki();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:e}).dispatch=na.bind(null,Oi,e),[t.memoizedState,e]},useDebugValue:ta},aa={readContext:La,useCallback:function(e,t){var n=Qi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&zi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:La,useEffect:function(e,t){return Xi(516,192,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Xi(4,36,ea.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xi(4,36,e,t)},useMemo:function(e,t){var n=Qi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&zi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:Ji,useRef:function(){return Qi().memoizedState},useState:function(e){return Ji(Yi)},useDebugValue:ta},oa=null,sa=null,ua=!1;function ca(e,t){var n=Qr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function fa(e){if(ua){var t=sa;if(t){var n=t;if(!la(e,t)){if(!(t=Er(n))||!la(e,t))return e.effectTag|=2,ua=!1,void(oa=e);ca(oa,n)}oa=e,sa=Ir(t)}else e.effectTag|=2,ua=!1,oa=e}}function ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;oa=e}function da(e){if(e!==oa)return!1;if(!ua)return ha(e),ua=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!br(t,e.memoizedProps))for(t=sa;t;)ca(e,t),t=Er(t);return ha(e),sa=oa?Er(e.stateNode):null,!0}function pa(){sa=oa=null,ua=!1}var va=We.ReactCurrentOwner,ma=!1;function ya(e,t,n,r){t.child=null===e?ki(t,null,n,r):gi(t,e.child,n,r)}function ga(e,t,n,r,i){n=n.render;var a=t.ref;return Da(t,i),r=Hi(e,t,n,r,a,i),null===e||ma?(t.effectTag|=1,ya(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ia(e,t,i))}function ka(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||Yr(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$r(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_a(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:nn)(i,r)&&e.ref===t.ref)?Ia(e,t,a):(t.effectTag|=1,(e=Jr(o,r)).ref=t.ref,e.return=t,t.child=e)}function _a(e,t,n,r,i,a){return null!==e&&nn(e.memoizedProps,r)&&e.ref===t.ref&&(ma=!1,i<a)?Ia(e,t,a):wa(e,t,n,r,a)}function ba(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function wa(e,t,n,r,i){var a=Fr(n)?Lr:Pr.current;return a=Mr(t,a),Da(t,i),n=Hi(e,t,n,r,a,i),null===e||ma?(t.effectTag|=1,ya(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ia(e,t,i))}function Ta(e,t,n,r,i){if(Fr(n)){var a=!0;qr(t)}else a=!1;if(Da(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),fi(t,n,r),di(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;c="object"==_typeof(c)&&null!==c?La(c):Mr(t,c=Fr(n)?Lr:Pr.current);var l=n.getDerivedStateFromProps,f="function"==typeof l||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||u!==c)&&hi(t,o,r,c),Ga=!1;var h=t.memoizedState;u=o.state=h;var d=t.updateQueue;null!==d&&(Ja(t,d,r,o,i),u=t.memoizedState),s!==r||h!==u||Dr.current||Ga?("function"==typeof l&&(ui(t,n,l,r),u=t.memoizedState),(s=Ga||li(t,n,s,r,h,u,c))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,s=t.memoizedProps,o.props=t.type===t.elementType?s:oi(t.type,s),u=o.context,c="object"==_typeof(c=n.contextType)&&null!==c?La(c):Mr(t,c=Fr(n)?Lr:Pr.current),(f="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||u!==c)&&hi(t,o,r,c),Ga=!1,u=t.memoizedState,h=o.state=u,null!==(d=t.updateQueue)&&(Ja(t,d,r,o,i),h=t.memoizedState),s!==r||u!==h||Dr.current||Ga?("function"==typeof l&&(ui(t,n,l,r),h=t.memoizedState),(l=Ga||li(t,n,s,r,u,h,c))?(f||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Ca(e,t,n,r,a,i)}function Ca(e,t,n,r,i,a){ba(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return i&&Br(t,n,!1),Ia(e,t,a);r=t.stateNode,va.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=gi(t,e.child,null,a),t.child=gi(t,null,s,a)):ya(e,t,s,a),t.memoizedState=r.state,i&&Br(t,n,!0),t.child}function xa(e){var t=e.stateNode;t.pendingContext?Vr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Vr(0,t.context,!1),xi(e,t.containerInfo)}function Ea(e,t,n){var r=t.mode,i=t.pendingProps,a=t.memoizedState;if(0==(64&t.effectTag)){a=null;var o=!1}else a={timedOutAt:null!==a?a.timedOutAt:0},o=!0,t.effectTag&=-65;if(null===e)if(o){var s=i.fallback;e=Zr(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Zr(s,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=ki(t,null,i.children,n);else null!==e.memoizedState?(s=(r=e.child).sibling,o?(n=i.fallback,i=Jr(r,r.pendingProps),0==(1&t.mode)&&(o=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=o),r=i.sibling=Jr(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=gi(t,r.child,i.children,n)):(s=e.child,o?(o=i.fallback,(i=Zr(null,r,0,null)).child=s,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Zr(o,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=gi(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=a,t.child=n,r}function Ia(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&s("153"),null!==t.child){for(n=Jr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Jr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}var Sa={current:null},Ra=null,Aa=null,Oa=null;function Na(e,t){var n=e.type._context;Or(Sa,n._currentValue),n._currentValue=t}function Pa(e){var t=Sa.current;Ar(Sa),e.type._context._currentValue=t}function Da(e,t){Ra=e,Oa=Aa=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(ma=!0),e.contextDependencies=null}function La(e,t){return Oa!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(Oa=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Aa?(null===Ra&&s("308"),Aa=t,Ra.contextDependencies={first:t,expirationTime:0}):Aa=Aa.next=t),e._currentValue}var Ma,Fa,Ua,ja=1,Va=2,Ga=!1;function qa(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ba(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function za(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Ha(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Wa(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=qa(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=qa(e.memoizedState),i=n.updateQueue=qa(n.memoizedState)):r=e.updateQueue=Ba(i):null===i&&(i=n.updateQueue=Ba(r));null===i||r===i?Ha(r,t):null===r.lastUpdate||null===i.lastUpdate?(Ha(r,t),Ha(i,t)):(Ha(r,t),i.lastUpdate=t)}function Ka(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=qa(e.memoizedState):Qa(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Qa(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Ba(t)),t}function Ya(e,t,n,r,a,o){switch(n.tag){case ja:return"function"==typeof(e=n.payload)?e.call(o,r,a):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(a="function"==typeof(e=n.payload)?e.call(o,r,a):e))break;return i({},r,a);case Va:Ga=!0}return r}function Ja(e,t,n,r,i){Ga=!1;for(var a=(t=Qa(e,t)).baseState,o=null,s=0,u=t.firstUpdate,c=a;null!==u;){var l=u.expirationTime;l<i?(null===o&&(o=u,a=c),s<l&&(s=l)):(c=Ya(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<i?(null===l&&(l=u,null===o&&(a=c)),s<f&&(s=f)):(c=Ya(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===o&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===l&&(a=c),t.baseState=a,t.firstUpdate=o,t.firstCapturedUpdate=l,e.expirationTime=s,e.memoizedState=c}function $a(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Za(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Za(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Za(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&s("191",n),n.call(r)}e=e.nextEffect}}function Xa(e,t){return{value:e,source:t,stack:lt(t)}}function eo(e){e.effectTag|=4}Ma=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fa=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var s=t.stateNode;switch(Ci(bi.current),e=null,n){case"input":o=bt(s,o),r=bt(s,r),e=[];break;case"option":o=Jn(s,o),r=Jn(s,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Zn(s,o),r=Zn(s,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(s.onclick=yr)}pr(n,r),s=n=void 0;var u=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var c=o[n];for(s in c)c.hasOwnProperty(s)&&(u||(u={}),u[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var l=r[n];if(c=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&l!==c&&(null!=l||null!=c))if("style"===n)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(u||(u={}),u[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(u||(u={}),u[s]=l[s])}else u||(e||(e=[]),e.push(n,u)),u=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(n,""+l)):"children"===n?c===l||"string"!=typeof l&&"number"!=typeof l||(e=e||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=l&&mr(a,n),e||c===l||(e=[])):(e=e||[]).push(n,l))}u&&(e=e||[]).push("style",u),a=e,(t.updateQueue=a)&&eo(t)}},Ua=function(e,t,n,r){n!==r&&eo(t)};var to="function"==typeof WeakSet?WeakSet:Set;function no(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=lt(n)),null!==n&&ct(n.type),t=t.value,null!==e&&1===e.tag&&ct(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ro(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Vo(e,t)}else t.current=null}function io(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&e)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!=(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ao(e){switch("function"==typeof Hr&&Hr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){Vo(i,e)}}n=n.next}while(n!==t)}break;case 1:if(ro(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Vo(e,t)}break;case 5:ro(e);break;case 4:uo(e)}}function oo(e){return 5===e.tag||3===e.tag||4===e.tag}function so(e){e:{for(var t=e.return;null!==t;){if(oo(t)){var n=t;break e}t=t.return}s("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:s("161")}16&n.effectTag&&(ur(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||oo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var a=t,o=i.stateNode,u=n;8===a.nodeType?a.parentNode.insertBefore(o,u):a.insertBefore(o,u)}else t.insertBefore(i.stateNode,n);else r?(o=t,u=i.stateNode,8===o.nodeType?(a=o.parentNode).insertBefore(u,o):(a=o).appendChild(u),null!=(o=o._reactRootContainer)||null!==a.onclick||(a.onclick=yr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function uo(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&s("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,o=a;;)if(ao(o),null!==o.child&&4!==o.tag)o.child.return=o,o=o.child;else{if(o===a)break;for(;null===o.sibling;){if(null===o.return||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}i?(a=r,o=t.stateNode,8===a.nodeType?a.parentNode.removeChild(o):a.removeChild(o)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(ao(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function co(e,t){switch(t.tag){case 0:case 11:case 14:case 15:io(4,8,t);break;case 1:case 3:case 12:case 17:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&function(e,t,n,r,i){e[M]=i,"input"===n&&"radio"===i.type&&null!=i.name&&Tt(e,i),vr(n,r),r=vr(n,i);for(var a=0;a<t.length;a+=2){var o=t[a],s=t[a+1];"style"===o?hr(e,s):"dangerouslySetInnerHTML"===o?sr(e,s):"children"===o?ur(e,s):kt(e,o,s,r)}switch(n){case"input":Ct(e,i);break;case"textarea":er(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?$n(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?$n(e,!!i.multiple,i.defaultValue,!0):$n(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,a,i,e,r)}break;case 6:null===t.stateNode&&s("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=ms())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=fr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var o=t.stateNode;null===o&&(o=t.stateNode=new to),n.forEach((function(e){var n=Bo.bind(null,t,e);o.has(e)||(o.add(e),e.then(n,n))}))}break;default:s("163")}}var lo="function"==typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=za(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Es(r),no(e,t)},n}function ho(e,t,n){(n=za(n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ro?Ro=new Set([this]):Ro.add(this));var n=t.value,i=t.stack;no(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function po(e){switch(e.tag){case 1:Fr(e.type)&&Ur();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Ei(),jr(),0!=(64&(t=e.effectTag))&&s("285"),e.effectTag=-2049&t|64,e;case 5:return Si(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:default:return null;case 4:return Ei(),null;case 10:return Pa(e),null}}var vo=We.ReactCurrentDispatcher,mo=We.ReactCurrentOwner,yo=1073741822,go=!1,ko=null,_o=null,bo=0,wo=-1,To=!1,Co=null,xo=!1,Eo=null,Io=null,So=null,Ro=null;function Ao(){if(null!==ko)for(var e=ko.return;null!==e;){var t=e;switch(t.tag){case 1:null!=t.type.childContextTypes&&Ur();break;case 3:Ei(),jr();break;case 5:Si(t);break;case 4:Ei();break;case 10:Pa(t)}e=e.return}_o=null,bo=0,wo=-1,To=!1,ko=null}function Oo(){for(;null!==Co;){var e=Co.effectTag;if(16&e&&ur(Co.stateNode,""),128&e){var t=Co.alternate;null!==t&&null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null)}switch(14&e){case 2:so(Co),Co.effectTag&=-3;break;case 6:so(Co),Co.effectTag&=-3,co(Co.alternate,Co);break;case 4:co(Co.alternate,Co);break;case 8:uo(e=Co),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Co=Co.nextEffect}}function No(){for(;null!==Co;){if(256&Co.effectTag)e:{var e=Co.alternate,t=Co;switch(t.tag){case 0:case 11:case 15:io(2,0,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:oi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:s("163")}}Co=Co.nextEffect}}function Po(e,t){for(;null!==Co;){var n=Co.effectTag;if(36&n){var r=Co.alternate,i=Co,a=t;switch(i.tag){case 0:case 11:case 15:io(16,32,i);break;case 1:var o=i.stateNode;if(4&i.effectTag)if(null===r)o.componentDidMount();else{var u=i.elementType===i.type?r.memoizedProps:oi(i.type,r.memoizedProps);o.componentDidUpdate(u,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&$a(0,r,o);break;case 3:if(null!==(r=i.updateQueue)){if(o=null,null!==i.child)switch(i.child.tag){case 5:case 1:o=i.child.stateNode}$a(0,r,o)}break;case 5:a=i.stateNode,null===r&&4&i.effectTag&&_r(i.type,i.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:s("163")}}128&n&&null!==(i=Co.ref)&&(a=Co.stateNode,"function"==typeof i?i(a):i.current=a),512&n&&(Eo=e),Co=Co.nextEffect}}function Do(e,t){So=Io=Eo=null;var n=$o;$o=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var a=t;io(128,0,a),io(0,64,a)}catch(e){r=!0,i=e}r&&Vo(t,i)}t=t.nextEffect}while(null!==t);$o=n,0!==(n=e.expirationTime)&&ys(e,n),rs||$o||ws(1073741823,!1)}function Lo(){null!==Io&&xr(Io),null!==So&&So()}function Mo(e,t){xo=go=!0,e.current===t&&s("177");var n=e.pendingCommitExpirationTime;0===n&&s("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?ni(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,ni(e,t)):t>n&&ni(e,t)}ai(0,e)}(e,i>r?i:r),mo.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,gr=En,kr=function(){var e=jn();if(Vn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var a=0,o=-1,s=-1,u=0,c=0,l=e,f=null;t:for(;;){for(var h;l!==t||0!==r&&3!==l.nodeType||(o=a+r),l!==i||0!==n&&3!==l.nodeType||(s=a+n),3===l.nodeType&&(a+=l.nodeValue.length),null!==(h=l.firstChild);)f=l,l=h;for(;;){if(l===e)break t;if(f===t&&++u===r&&(o=a),f===i&&++c===n&&(s=a),null!==(h=l.nextSibling))break;f=(l=f).parentNode}l=h}t=-1===o||-1===s?null:{start:o,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),En=!1,Co=r;null!==Co;){i=!1;var o=void 0;try{No()}catch(e){i=!0,o=e}i&&(null===Co&&s("178"),Vo(Co,o),null!==Co&&(Co=Co.nextEffect))}for(Co=r;null!==Co;){i=!1,o=void 0;try{Oo()}catch(e){i=!0,o=e}i&&(null===Co&&s("178"),Vo(Co,o),null!==Co&&(Co=Co.nextEffect))}for(Gn(kr),kr=null,En=!!gr,gr=null,e.current=t,Co=r;null!==Co;){i=!1,o=void 0;try{Po(e,n)}catch(e){i=!0,o=e}i&&(null===Co&&s("178"),Vo(Co,o),null!==Co&&(Co=Co.nextEffect))}if(null!==r&&null!==Eo){var u=Do.bind(null,e,r);Io=a.unstable_runWithPriority(a.unstable_NormalPriority,(function(){return Cr(u)})),So=u}go=xo=!1,"function"==typeof zr&&zr(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(Ro=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Fo(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){ko=e;e:{var a=t,o=bo,u=(t=e).pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 18:break;case 1:case 17:Fr(t.type)&&Ur();break;case 3:Ei(),jr(),(u=t.stateNode).pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),null!==a&&null!==a.child||(da(t),t.effectTag&=-3);break;case 5:Si(t);var c=Ci(Ti.current);if(o=t.type,null!==a&&null!=t.stateNode)Fa(a,t,o,u,c),a.ref!==t.ref&&(t.effectTag|=128);else if(u){var l=Ci(bi.current);if(da(t)){a=(u=t).stateNode;var f=u.type,h=u.memoizedProps,d=c;switch(a[L]=u,a[M]=h,o=void 0,c=f){case"iframe":case"object":In("load",a);break;case"video":case"audio":for(f=0;f<re.length;f++)In(re[f],a);break;case"source":In("error",a);break;case"img":case"image":case"link":In("error",a),In("load",a);break;case"form":In("reset",a),In("submit",a);break;case"details":In("toggle",a);break;case"input":wt(a,h),In("invalid",a),mr(d,"onChange");break;case"select":a._wrapperState={wasMultiple:!!h.multiple},In("invalid",a),mr(d,"onChange");break;case"textarea":Xn(a,h),In("invalid",a),mr(d,"onChange")}for(o in pr(c,h),f=null,h)h.hasOwnProperty(o)&&(l=h[o],"children"===o?"string"==typeof l?a.textContent!==l&&(f=["children",l]):"number"==typeof l&&a.textContent!==""+l&&(f=["children",""+l]):b.hasOwnProperty(o)&&null!=l&&mr(d,o));switch(c){case"input":ze(a),xt(a,h,!0);break;case"textarea":ze(a),tr(a);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(a.onclick=yr)}o=f,u.updateQueue=o,(u=null!==o)&&eo(t)}else{h=t,d=o,a=u,f=9===c.nodeType?c:c.ownerDocument,l===nr&&(l=rr(d)),l===nr?"script"===d?((a=f.createElement("div")).innerHTML="<script><\/script>",f=a.removeChild(a.firstChild)):"string"==typeof a.is?f=f.createElement(d,{is:a.is}):(f=f.createElement(d),"select"===d&&(d=f,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):f=f.createElementNS(l,d),(a=f)[L]=h,a[M]=u,Ma(a,t),d=a;var p=c,v=vr(f=o,h=u);switch(f){case"iframe":case"object":In("load",d),c=h;break;case"video":case"audio":for(c=0;c<re.length;c++)In(re[c],d);c=h;break;case"source":In("error",d),c=h;break;case"img":case"image":case"link":In("error",d),In("load",d),c=h;break;case"form":In("reset",d),In("submit",d),c=h;break;case"details":In("toggle",d),c=h;break;case"input":wt(d,h),c=bt(d,h),In("invalid",d),mr(p,"onChange");break;case"option":c=Jn(d,h);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},c=i({},h,{value:void 0}),In("invalid",d),mr(p,"onChange");break;case"textarea":Xn(d,h),c=Zn(d,h),In("invalid",d),mr(p,"onChange");break;default:c=h}pr(f,c),l=void 0;var m=f,y=d,g=c;for(l in g)if(g.hasOwnProperty(l)){var k=g[l];"style"===l?hr(y,k):"dangerouslySetInnerHTML"===l?null!=(k=k?k.__html:void 0)&&sr(y,k):"children"===l?"string"==typeof k?("textarea"!==m||""!==k)&&ur(y,k):"number"==typeof k&&ur(y,""+k):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(b.hasOwnProperty(l)?null!=k&&mr(p,l):null!=k&&kt(y,l,k,v))}switch(f){case"input":ze(d),xt(d,h,!1);break;case"textarea":ze(d),tr(d);break;case"option":null!=h.value&&d.setAttribute("value",""+_t(h.value));break;case"select":(c=d).multiple=!!h.multiple,null!=(d=h.value)?$n(c,!!h.multiple,d,!1):null!=h.defaultValue&&$n(c,!!h.multiple,h.defaultValue,!0);break;default:"function"==typeof c.onClick&&(d.onclick=yr)}(u=_r(o,u))&&eo(t),t.stateNode=a}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&s("166");break;case 6:a&&null!=t.stateNode?Ua(0,t,a.memoizedProps,u):("string"!=typeof u&&null===t.stateNode&&s("166"),a=Ci(Ti.current),Ci(bi.current),da(t)?(o=(u=t).stateNode,a=u.memoizedProps,o[L]=u,(u=o.nodeValue!==a)&&eo(t)):(o=t,(u=(9===a.nodeType?a:a.ownerDocument).createTextNode(u))[L]=t,o.stateNode=u));break;case 13:if(u=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=o,ko=t;break e}u=null!==u,o=null!==a&&null!==a.memoizedState,null!==a&&!u&&o&&null!==(a=a.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=a,a.nextEffect=c):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8),(u||o)&&(t.effectTag|=4);break;case 4:Ei();break;case 10:Pa(t);break;default:s("156")}ko=null}if(t=e,1===bo||1!==t.childExpirationTime){for(u=0,o=t.child;null!==o;)(a=o.expirationTime)>u&&(u=a),(c=o.childExpirationTime)>u&&(u=c),o=o.sibling;t.childExpirationTime=u}if(null!==ko)return ko;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=po(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Uo(e){var t=function(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Dr.current)ma=!0;else if(r<n){switch(ma=!1,t.tag){case 3:xa(t),pa();break;case 5:Ii(t);break;case 1:Fr(t.type)&&qr(t);break;case 4:xi(t,t.stateNode.containerInfo);break;case 10:Na(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ea(e,t,n):null!==(t=Ia(e,t,n))?t.sibling:null}return Ia(e,t,n)}}else ma=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Mr(t,Pr.current);if(Da(t,n),i=Hi(null,t,r,e,i,n),t.effectTag|=1,"object"==_typeof(i)&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Wi(),Fr(r)){var a=!0;qr(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var o=r.getDerivedStateFromProps;"function"==typeof o&&ui(t,r,o,e),i.updater=ci,t.stateNode=i,i._reactInternalFiber=t,di(t,r,e,n),t=Ca(null,t,r,!0,a,n)}else t.tag=0,ya(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),a=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)})),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return Yr(e)?1:0;if(null!=e){if((e=e.$$typeof)===rt)return 11;if(e===at)return 14}return 2}(e),a=oi(e,a),o=void 0,i){case 0:o=wa(null,t,e,a,n);break;case 1:o=Ta(null,t,e,a,n);break;case 11:o=ga(null,t,e,a,n);break;case 14:o=ka(null,t,e,oi(e.type,a),r,n);break;default:s("306",e,"")}return o;case 0:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:oi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:oi(r,i),n);case 3:return xa(t),null===(r=t.updateQueue)&&s("282"),i=null!==(i=t.memoizedState)?i.element:null,Ja(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(pa(),t=Ia(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(sa=Ir(t.stateNode.containerInfo),oa=t,i=ua=!0),i?(t.effectTag|=2,t.child=ki(t,null,r,n)):(ya(e,t,r,n),pa()),t=t.child),t;case 5:return Ii(t),null===e&&fa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,br(r,i)?o=null:null!==a&&br(r,a)&&(t.effectTag|=16),ba(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(ya(e,t,o,n),t=t.child),t;case 6:return null===e&&fa(t),null;case 13:return Ea(e,t,n);case 4:return xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=gi(t,null,r,n):ya(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ga(e,t,r,i=t.elementType===r?i:oi(r,i),n);case 7:return ya(e,t,t.pendingProps,n),t.child;case 8:case 12:return ya(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,Na(t,a=i.value),null!==o){var u=o.value;if(0==(a=en(u,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(o.children===i.children&&!Dr.current){t=Ia(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.contextDependencies;if(null!==c){o=u.child;for(var l=c.first;null!==l;){if(l.context===r&&0!=(l.observedBits&a)){1===u.tag&&((l=za(n)).tag=Va,Wa(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var f=u.return;null!==f;){var h=f.alternate;if(f.childExpirationTime<l)f.childExpirationTime=l,null!==h&&h.childExpirationTime<l&&(h.childExpirationTime=l);else{if(!(null!==h&&h.childExpirationTime<l))break;h.childExpirationTime=l}f=f.return}c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else o=10===u.tag&&u.type===t.type?null:u.child;if(null!==o)o.return=u;else for(o=u;null!==o;){if(o===t){o=null;break}if(null!==(u=o.sibling)){u.return=o.return,o=u;break}o=o.return}u=o}}ya(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,Da(t,n),r=r(i=La(i,a.unstable_observedBits)),t.effectTag|=1,ya(e,t,r,n),t.child;case 14:return a=oi(i=t.type,t.pendingProps),ka(e,t,i,a=oi(i.type,a),r,n);case 15:return _a(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Fr(r)?(e=!0,qr(t)):e=!1,Da(t,n),fi(t,r,i),di(t,r,i,n),Ca(null,t,r,!0,e,n)}s("156")}(e.alternate,e,bo);return e.memoizedProps=e.pendingProps,null===t&&(t=Fo(e)),mo.current=null,t}function jo(e,t){go&&s("243"),Lo(),go=!0;var n=vo.current;vo.current=ra;var r=e.nextExpirationTimeToWorkOn;r===bo&&e===_o&&null!==ko||(Ao(),bo=r,ko=Jr((_o=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==ko&&!_s();)ko=Uo(ko);else for(;null!==ko;)ko=Uo(ko)}catch(t){if(Oa=Aa=Ra=null,Wi(),null===ko)i=!0,Es(t);else{null===ko&&s("271");var a=ko,o=a.return;if(null!==o){e:{var u=e,c=o,l=a,f=t;if(o=bo,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==f&&"object"==_typeof(f)&&"function"==typeof f.then){var h=f;f=c;var d=-1,p=-1;do{if(13===f.tag){var v=f.alternate;if(null!==v&&null!==(v=v.memoizedState)){p=10*(1073741822-v.timedOutAt);break}"number"==typeof(v=f.pendingProps.maxDuration)&&(0>=v?d=0:(-1===d||v<d)&&(d=v))}f=f.return}while(null!==f);f=c;do{if((v=13===f.tag)&&(v=void 0!==f.memoizedProps.fallback&&null===f.memoizedState),v){if(null===(c=f.updateQueue)?((c=new Set).add(h),f.updateQueue=c):c.add(h),0==(1&f.mode)){f.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((o=za(1073741823)).tag=Va,Wa(l,o))),l.expirationTime=1073741823;break e}c=o;var m=(l=u).pingCache;null===m?(m=l.pingCache=new lo,v=new Set,m.set(h,v)):void 0===(v=m.get(h))&&(v=new Set,m.set(h,v)),v.has(c)||(v.add(c),l=qo.bind(null,l,h,c),h.then(l,l)),-1===d?u=1073741823:(-1===p&&(p=10*(1073741822-ii(u,o))-5e3),u=p+d),0<=u&&wo<u&&(wo=u),f.effectTag|=2048,f.expirationTime=o;break e}f=f.return}while(null!==f);f=Error((ct(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+lt(l))}To=!0,f=Xa(f,l),u=c;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=o,Ka(u,o=fo(u,f,o));break e;case 1:if(d=f,p=u.type,l=u.stateNode,0==(64&u.effectTag)&&("function"==typeof p.getDerivedStateFromError||null!==l&&"function"==typeof l.componentDidCatch&&(null===Ro||!Ro.has(l)))){u.effectTag|=2048,u.expirationTime=o,Ka(u,o=ho(u,d,o));break e}}u=u.return}while(null!==u)}ko=Fo(a);continue}i=!0,Es(t)}}break}if(go=!1,vo.current=n,Oa=Aa=Ra=null,Wi(),i)_o=null,e.finishedWork=null;else if(null!==ko)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&s("281"),_o=null,To){if(i=e.latestPendingTime,a=e.latestSuspendedTime,o=e.latestPingedTime,0!==i&&i<r||0!==a&&a<r||0!==o&&o<r)return ri(e,r),void ps(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void ps(e,n,r,t,-1)}t&&-1!==wo?(ri(e,r),(t=10*(1073741822-ii(e,r)))<wo&&(wo=t),t=10*(1073741822-ms()),t=wo-t,ps(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Vo(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ro||!Ro.has(r)))return Wa(n,e=ho(n,e=Xa(t,e),1073741823)),void Ho(n,1073741823);break;case 3:return Wa(n,e=fo(n,e=Xa(t,e),1073741823)),void Ho(n,1073741823)}n=n.return}3===e.tag&&(Wa(e,n=fo(e,n=Xa(t,e),1073741823)),Ho(e,1073741823))}function Go(e,t){var n=a.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(go&&!xo)r=bo;else{switch(n){case a.unstable_ImmediatePriority:r=1073741823;break;case a.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case a.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case a.unstable_LowPriority:case a.unstable_IdlePriority:r=1;break;default:s("313")}null!==_o&&r===bo&&--r}return n===a.unstable_UserBlockingPriority&&(0===es||r<es)&&(es=r),r}function qo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==_o&&bo===n?_o=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),ai(n,e),0!==(n=e.expirationTime)&&ys(e,n)))}function Bo(e,t){var n=e.stateNode;null!==n&&n.delete(t),null!==(e=zo(e,t=Go(t=ms(),e)))&&(ni(e,t),0!==(t=e.expirationTime)&&ys(e,t))}function zo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Ho(e,t){null!==(e=zo(e,t))&&(!go&&0!==bo&&t>bo&&Ao(),ni(e,t),go&&!xo&&_o===e||ys(e,e.expirationTime),ls>cs&&(ls=0,s("185")))}function Wo(e,t,n,r,i){return a.unstable_runWithPriority(a.unstable_ImmediatePriority,(function(){return e(t,n,r,i)}))}var Ko=null,Qo=null,Yo=0,Jo=void 0,$o=!1,Zo=null,Xo=0,es=0,ts=!1,ns=null,rs=!1,is=!1,as=null,os=a.unstable_now(),ss=1073741822-(os/10|0),us=ss,cs=50,ls=0,fs=null;function hs(){ss=1073741822-((a.unstable_now()-os)/10|0)}function ds(e,t){if(0!==Yo){if(t<Yo)return;null!==Jo&&a.unstable_cancelCallback(Jo)}Yo=t,e=a.unstable_now()-os,Jo=a.unstable_scheduleCallback(bs,{timeout:10*(1073741822-t)-e})}function ps(e,t,n,r,i){e.expirationTime=r,0!==i||_s()?0<i&&(e.timeoutHandle=wr(vs.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function vs(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,hs(),us=ss,Ts(e,n)}function ms(){return $o||(gs(),0!==Xo&&1!==Xo||(hs(),us=ss)),us}function ys(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===Qo?(Ko=Qo=e,e.nextScheduledRoot=e):(Qo=Qo.nextScheduledRoot=e).nextScheduledRoot=Ko):t>e.expirationTime&&(e.expirationTime=t),$o||(rs?is&&(Zo=e,Xo=1073741823,Cs(e,1073741823,!1)):1073741823===t?ws(1073741823,!1):ds(e,t))}function gs(){var e=0,t=null;if(null!==Qo)for(var n=Qo,r=Ko;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===Qo)&&s("244"),r===r.nextScheduledRoot){Ko=Qo=r.nextScheduledRoot=null;break}if(r===Ko)Ko=i=r.nextScheduledRoot,Qo.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===Qo){(Qo=n).nextScheduledRoot=Ko,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===Qo)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}Zo=t,Xo=e}var ks=!1;function _s(){return!!ks||!!a.unstable_shouldYield()&&(ks=!0)}function bs(){try{if(!_s()&&null!==Ko){hs();var e=Ko;do{var t=e.expirationTime;0!==t&&ss<=t&&(e.nextExpirationTimeToWorkOn=ss),e=e.nextScheduledRoot}while(e!==Ko)}ws(0,!0)}finally{ks=!1}}function ws(e,t){if(gs(),t)for(hs(),us=ss;null!==Zo&&0!==Xo&&e<=Xo&&!(ks&&ss>Xo);)Cs(Zo,Xo,ss>Xo),gs(),hs(),us=ss;else for(;null!==Zo&&0!==Xo&&e<=Xo;)Cs(Zo,Xo,!1),gs();if(t&&(Yo=0,Jo=null),0!==Xo&&ds(Zo,Xo),ls=0,fs=null,null!==as)for(e=as,as=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){ts||(ts=!0,ns=e)}}if(ts)throw e=ns,ns=null,ts=!1,e}function Ts(e,t){$o&&s("253"),Zo=e,Xo=t,Cs(e,t,!1),ws(1073741823,!1)}function Cs(e,t,n){if($o&&s("245"),$o=!0,n){var r=e.finishedWork;null!==r?xs(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,Tr(r)),jo(e,n),null!==(r=e.finishedWork)&&(_s()?e.finishedWork=r:xs(e,r,t)))}else null!==(r=e.finishedWork)?xs(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,Tr(r)),jo(e,n),null!==(r=e.finishedWork)&&xs(e,r,t));$o=!1}function xs(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===as?as=[r]:as.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===fs?ls++:(fs=e,ls=0),a.unstable_runWithPriority(a.unstable_ImmediatePriority,(function(){Mo(e,t)}))}function Es(e){null===Zo&&s("246"),Zo.expirationTime=0,ts||(ts=!0,ns=e)}function Is(e,t){var n=rs;rs=!0;try{return e(t)}finally{(rs=n)||$o||ws(1073741823,!1)}}function Ss(e,t){if(rs&&!is){is=!0;try{return e(t)}finally{is=!1}}return e(t)}function Rs(e,t,n){rs||$o||0===es||(ws(es,!1),es=0);var r=rs;rs=!0;try{return a.unstable_runWithPriority(a.unstable_UserBlockingPriority,(function(){return e(t,n)}))}finally{(rs=r)||$o||ws(1073741823,!1)}}function As(e,t,n,r,i){var a=t.current;e:if(n){t:{2===rn(n=n._reactInternalFiber)&&1===n.tag||s("170");var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Fr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(null!==o);s("171"),o=void 0}if(1===n.tag){var u=n.type;if(Fr(u)){n=Gr(n,u,o);break e}}n=o}else n=Nr;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=za(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Lo(),Wa(a,i),Ho(a,r),r}function Os(e,t,n,r){var i=t.current;return As(e,t,n,i=Go(ms(),i),r)}function Ns(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ps(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Je,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ds(e){var t=1073741822-25*(1+((1073741822-ms()+500)/25|0));t>=yo&&(t=yo-1),this._expirationTime=yo=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ls(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ms(e,t,n){e={current:t=Qr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Fs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Us(e,t,n,r,i){var a=n._reactRootContainer;if(a){if("function"==typeof i){var o=i;i=function(){var e=Ns(a._internalRoot);o.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ms(e,!1,t)}(n,r),"function"==typeof i){var s=i;i=function(){var e=Ns(a._internalRoot);s.call(e)}}Ss((function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)}))}return Ns(a._internalRoot)}function js(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Fs(t)||s("200"),Ps(e,t,null,n)}Se=function(e,t,n){switch(t){case"input":if(Ct(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=V(r);i||s("90"),He(r),Ct(r,i)}}}break;case"textarea":er(e,n);break;case"select":null!=(t=n.value)&&$n(e,!!n.multiple,t,!1)}},Ds.prototype.render=function(e){this._defer||s("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Ls;return As(e,t,null,n,r._onCommit),r},Ds.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ds.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||s("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&s("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Ts(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ds.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Ls.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ls.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&s("191",n),n()}}},Ms.prototype.render=function(e,t){var n=this._internalRoot,r=new Ls;return null!==(t=void 0===t?null:t)&&r.then(t),Os(e,n,null,r._onCommit),r},Ms.prototype.unmount=function(e){var t=this._internalRoot,n=new Ls;return null!==(e=void 0===e?null:e)&&n.then(e),Os(null,t,null,n._onCommit),n},Ms.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Ls;return null!==(n=void 0===n?null:n)&&i.then(n),Os(t,r,e,i._onCommit),i},Ms.prototype.createBatch=function(){var e=new Ds(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},De=Is,Le=Rs,Me=function(){$o||0===es||(ws(es,!1),es=0)};var Vs={createPortal:js,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?s("188"):s("268",Object.keys(e))),null===(e=on(t))?null:e.stateNode},hydrate:function(e,t,n){return Fs(t)||s("200"),Us(null,e,t,!0,n)},render:function(e,t,n){return Fs(t)||s("200"),Us(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return Fs(n)||s("200"),(null==e||void 0===e._reactInternalFiber)&&s("38"),Us(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Fs(e)||s("40"),!!e._reactRootContainer&&(Ss((function(){Us(null,null,e,!1,(function(){e._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return js.apply(void 0,arguments)},unstable_batchedUpdates:Is,unstable_interactiveUpdates:Rs,flushSync:function(e,t){$o&&s("187");var n=rs;rs=!0;try{return Wo(e,t)}finally{rs=n,ws(1073741823,!1)}},unstable_createRoot:function(e,t){return Fs(e)||s("299","unstable_createRoot"),new Ms(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=rs;rs=!0;try{Wo(e)}finally{(rs=t)||$o||ws(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[U,j,V,O.injectEventPluginsByName,_,W,function(e){S(e,H)},Ne,Pe,An,P]}};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);zr=Wr((function(e){return t.onCommitFiberRoot(n,e)})),Hr=Wr((function(e){return t.onCommitFiberUnmount(n,e)}))}catch(e){}}(i({},e,{overrideProps:null,currentDispatcherRef:We.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=on(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:F,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Gs={default:Vs},qs=Gs&&Vs||Gs;e.exports=qs.default||qs},3935:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(4448)},9921:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,u=60110,c=60112,l=60113,f=60120,h=60115,d=60116;if("function"==typeof Symbol&&Symbol.for){var p=Symbol.for;n=p("react.element"),r=p("react.portal"),i=p("react.fragment"),a=p("react.strict_mode"),o=p("react.profiler"),s=p("react.provider"),u=p("react.context"),c=p("react.forward_ref"),l=p("react.suspense"),f=p("react.suspense_list"),h=p("react.memo"),d=p("react.lazy"),p("react.block"),p("react.server.block"),p("react.fundamental"),p("react.debug_trace_mode"),p("react.legacy_hidden")}t.isContextConsumer=function(e){return function(e){if("object"==_typeof(e)&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case h:case s:return e;default:return t}}case r:return t}}}(e)===u}},9864:function(e,t,n){"use strict";e.exports=n(9921)},2052:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(7294)),o=s(n(5697));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=!1,l=!1,f=!1,h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onScriptLoaded=function(){t.stripeHandler||(t.stripeHandler=StripeCheckout.configure({key:n.props.stripeKey}),n.hasPendingClick&&n.showStripeDialog())},n.onScriptError=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.hideLoadingDialog(),n.props.onScriptError&&n.props.onScriptError.apply(n,t)},n.onClosed=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n._isMounted&&n.setState({open:!1}),n.props.closed&&n.props.closed.apply(n,t)},n.onOpened=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.setState({open:!0}),n.props.opened&&n.props.opened.apply(n,t)},n.getConfig=function(){return["token","image","name","description","amount","locale","currency","panelLabel","zipCode","shippingAddress","billingAddress","email","allowRememberMe","bitcoin","alipay","alipayReusable"].reduce((function(e,t){return r({},e,n.props.hasOwnProperty(t)&&u({},t,n.props[t]))}),{opened:n.onOpened,closed:n.onClosed})},n.onClick=function(){if(!n.props.disabled)if(f)try{throw new Error("Tried to call onClick, but StripeCheckout failed to load")}catch(e){}else t.stripeHandler?n.showStripeDialog():(n.showLoadingDialog(),n.hasPendingClick=!0)},n.handleOnMouseDown=function(){n.setState({buttonActive:!0})},n.handleOnMouseUp=function(){n.setState({buttonActive:!1})},n.state={open:!1,buttonActive:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,!l&&!c){c=!0;var t,n,r=document.createElement("script");"function"==typeof this.props.onScriptTagCreated&&this.props.onScriptTagCreated(r),r.src="https://checkout.stripe.com/checkout.js",r.async=1,this.loadPromise=(t=!1,n=new Promise((function(t,n){r.onload=function(){l=!0,c=!1,t(),e.onScriptLoaded()},r.onerror=function(t){f=!0,c=!1,n(t),e.onScriptError(t)}})),{promise:new Promise((function(e,r){n.then((function(){return t?r({isCanceled:!0}):e()})),n.catch((function(e){return r(t?{isCanceled:!0}:e)}))})),cancel:function(){t=!0}}),this.loadPromise.promise.then(this.onScriptLoaded).catch(this.onScriptError),document.body.appendChild(r)}}},{key:"componentDidUpdate",value:function(){c||this.updateStripeHandler()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.loadPromise&&this.loadPromise.cancel(),t.stripeHandler&&this.state.open&&t.stripeHandler.close()}},{key:"updateStripeHandler",value:function(){t.stripeHandler&&!this.props.reconfigureOnUpdate||(t.stripeHandler=StripeCheckout.configure({key:this.props.stripeKey}))}},{key:"showLoadingDialog",value:function(){if(this.props.showLoadingDialog){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.props.showLoadingDialog.apply(this,t)}}},{key:"hideLoadingDialog",value:function(){if(this.props.hideLoadingDialog){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.props.hideLoadingDialog.apply(this,t)}}},{key:"showStripeDialog",value:function(){this.hideLoadingDialog(),t.stripeHandler.open(this.getConfig())}},{key:"renderDefaultStripeButton",value:function(){return a.default.createElement("button",r({},u({},this.props.triggerEvent,this.onClick),{className:this.props.className,onMouseDown:this.handleOnMouseDown,onFocus:this.handleOnMouseDown,onMouseUp:this.handleOnMouseUp,onMouseOut:this.handleOnMouseUp,onBlur:this.handleOnMouseUp,style:r({},{overflow:"hidden",display:"inline-block",background:"linear-gradient(#28a0e5,#015e94)",border:0,padding:1,textDecoration:"none",borderRadius:5,boxShadow:"0 1px 0 rgba(0,0,0,0.2)",cursor:"pointer",visibility:"visible",userSelect:"none"},this.state.buttonActive&&{background:"#005d93"},this.props.style)}),a.default.createElement("span",{style:r({},{backgroundImage:"linear-gradient(#7dc5ee,#008cdd 85%,#30a2e4)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",color:"#fff",fontWeight:"bold",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",textShadow:"0 -1px 0 rgba(0,0,0,0.25)",borderRadius:4},this.state.buttonActive&&{color:"#eee",boxShadow:"inset 0 1px 0 rgba(0,0,0,0.1)",backgroundImage:"linear-gradient(#008cdd,#008cdd 85%,#239adf)"},this.props.textStyle)},this.props.label))}},{key:"renderDisabledButton",value:function(){return a.default.createElement("button",{disabled:!0,style:{background:"rgba(0,0,0,0.2)",overflow:"hidden",display:"inline-block",border:0,padding:1,textDecoration:"none",borderRadius:5,userSelect:"none"}},a.default.createElement("span",{style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",borderRadius:4,color:"#999",background:"#f8f9fa",textShadow:"0 1px 0 rgba(255,255,255,0.5)"}},this.props.label))}},{key:"render",value:function(){!0!==this.props.desktopShowModal||this.state.open?!1===this.props.desktopShowModal&&this.state.open&&t.stripeHandler.close():this.onClick();var e=this.props.ComponentClass;return this.props.children?a.default.createElement(e,r({},u({},this.props.triggerEvent,this.onClick),{children:this.props.children})):this.props.disabled?this.renderDisabledButton():this.renderDefaultStripeButton()}}]),t}(a.default.Component);h.defaultProps={className:"StripeCheckout",label:"Pay With Card",locale:"auto",ComponentClass:"span",reconfigureOnUpdate:!1,triggerEvent:"onClick"},h.propTypes={desktopShowModal:o.default.bool,triggerEvent:o.default.oneOf(["onClick","onTouchTap","onTouchStart"]),label:o.default.string,style:o.default.object,textStyle:o.default.object,disabled:o.default.bool,ComponentClass:o.default.string,showLoadingDialog:o.default.func,hideLoadingDialog:o.default.func,onScriptError:o.default.func,onScriptTagCreated:o.default.func,reconfigureOnUpdate:o.default.bool,stripeKey:o.default.string.isRequired,token:o.default.func.isRequired,name:o.default.string,description:o.default.string,image:o.default.string,amount:o.default.number,locale:o.default.oneOf(["auto","zh","da","nl","en","fr","de","it","ja","no","es","sv"]),currency:o.default.oneOf(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BIF","BMD","BND","BOB","BRL","BSD","BWP","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ETB","EUR","FJD","FKP","GBP","GEL","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","ISK","JMD","JPY","KES","KGS","KHR","KMF","KRW","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","MAD","MDL","MGA","MKD","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SZL","THB","TJS","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VND","VUV","WST","XAF","XCD","XOF","XPF","YER","ZAR","ZMW"]),panelLabel:o.default.string,zipCode:o.default.bool,billingAddress:o.default.bool,shippingAddress:o.default.bool,email:o.default.string,allowRememberMe:o.default.bool,bitcoin:o.default.bool,alipay:o.default.oneOf(["auto",!0,!1]),alipayReusable:o.default.bool,opened:o.default.func,closed:o.default.func},h._isMounted=!1,t.Z=h},2408:function(e,t,n){"use strict";var r=n(7418),i="function"==typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function g(e,t,n,r,i,a,o,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,a,o,s],c=0;(e=Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw e.framesToPop=1,e}}function k(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);g(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||_}function T(){}function C(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||_}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!=_typeof(e)&&"function"!=typeof e&&null!=e&&k("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=w.prototype;var x=C.prototype=new T;x.constructor=C,r(x,w.prototype),x.isPureReactComponent=!0;var E={current:null},I={current:null},S=Object.prototype.hasOwnProperty,R={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r=void 0,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&!R.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:I.current}}function O(e){return"object"==_typeof(e)&&null!==e&&e.$$typeof===a}var N=/\/+/g,P=[];function D(e,t,n,r){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function L(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function M(e,t,n,r){var i=_typeof(e);"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return n(r,e,""===t?"."+U(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=t+U(i=e[u],u);s+=M(i,c,n,r)}else if("function"==typeof(c=null===e||"object"!=_typeof(e)?null:"function"==typeof(c=y&&e[y]||e["@@iterator"])?c:null))for(e=c.call(e),u=0;!(i=e.next()).done;)s+=M(i=i.value,c=t+U(i,u++),n,r);else"object"===i&&k("31","[object Object]"==(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return s}function F(e,t,n){return null==e?0:M(e,"",t,n)}function U(e,t){return"object"==_typeof(e)&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function V(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?G(e,r,n,(function(e){return e})):null!=e&&(O(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),r.push(e))}function G(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(N,"$&/")+"/"),F(e,V,t=D(t,a,r,i)),L(t)}function q(){var e=E.current;return null===e&&k("321"),e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return G(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;F(e,j,t=D(null,null,t,n)),L(t)},count:function(e){return F(e,(function(){return null}),null)},toArray:function(e){var t=[];return G(e,t,null,(function(e){return e})),t},only:function(e){return O(e)||k("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:C,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return q().useCallback(e,t)},useContext:function(e,t){return q().useContext(e,t)},useEffect:function(e,t){return q().useEffect(e,t)},useImperativeHandle:function(e,t,n){return q().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return q().useLayoutEffect(e,t)},useMemo:function(e,t){return q().useMemo(e,t)},useReducer:function(e,t,n){return q().useReducer(e,t,n)},useRef:function(e){return q().useRef(e)},useState:function(e){return q().useState(e)},Fragment:s,StrictMode:u,Suspense:p,createElement:A,cloneElement:function(e,t,n){null==e&&k("267",e);var i=void 0,o=r({},e.props),s=e.key,u=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,c=I.current),void 0!==t.key&&(s=""+t.key);var l=void 0;for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)S.call(t,i)&&!R.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}if(1==(i=arguments.length-2))o.children=n;else if(1<i){l=Array(i);for(var f=0;f<i;f++)l[f]=arguments[f+2];o.children=l}return{$$typeof:a,type:e.type,key:s,ref:u,props:o,_owner:c}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:O,version:"16.8.6",unstable_ConcurrentMode:h,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:E,ReactCurrentOwner:I,assign:r}},z={default:B},H=z&&B||z;e.exports=H.default||H},7294:function(e,t,n){"use strict";e.exports=n(2408)},4500:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t=void 0===e?"undefined":x(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if(void 0!==h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===(void 0===r?"undefined":x(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var v=r.normalize(p,h,e,t);v&&(e=v[0],t=v[1])}}}p.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var m=void 0===e?"undefined":x(e),y=void 0===t?"undefined":x(t),g="undefined"!==m||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),k="undefined"!==y||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!g&&k)n(new a(p,t));else if(!k&&g)n(new o(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!=0)n(new i(p,e,t));else if("object"===m&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var _;for(e.length,_=0;_<e.length;_++)_>=t.length?n(new s(p,_,new o(void 0,e[_]))):l(e[_],t[_],n,r,p,_,d);for(;_<t.length;)n(new s(p,_,new a(void 0,t[_++])))}else{var b=Object.keys(e),w=Object.keys(t);b.forEach((function(i,a){var o=w.indexOf(i);o>=0?(l(e[i],t[i],n,r,p,i,d),w=u(w,o)):l(e[i],void 0,n,r,p,i,d)})),w.forEach((function(e){l(void 0,t[e],n,r,p,e,d)}))}d.length=d.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=u(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,a=n.path?n.path.length-1:0;++i<a;)void 0===r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=u(e,t)}return e}function v(e){return"color: "+S[e].color+"; font-weight: bold"}function m(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=function(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}(e);n.log.apply(n,["%c "+S[t].text,v(t)].concat(E(r)))})):n.log(" no diff ");try{n.groupEnd()}catch(e){n.log(" diff end  ")}}function y(e,t,n,r){switch(void 0===e?"undefined":x(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,E(n)):e[r];case"function":return e(t);default:return e}}function g(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,a=void 0===i?function(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+r),n&&a.push("%c(in "+i.toFixed(2)+" ms)"),a.join(" ")}}(t):i,o=t.collapsed,s=t.colors,u=t.level,c=t.diff,l=void 0===t.titleFormatter;e.forEach((function(i,f){var h=i.started,d=i.startedTime,p=i.action,v=i.prevState,g=i.error,k=i.took,_=i.nextState,b=e[f+1];b&&(_=b.prevState,k=b.started-h);var w=r(p),C="function"==typeof o?o((function(){return _}),p,i):o,x=T(d),E=s.title?"color: "+s.title(w)+";":"",I=["color: gray; font-weight: lighter;"];I.push(E),t.timestamp&&I.push("color: gray; font-weight: lighter;"),t.duration&&I.push("color: gray; font-weight: lighter;");var S=a(w,x,k);try{C?s.title&&l?n.groupCollapsed.apply(n,["%c "+S].concat(I)):n.groupCollapsed(S):s.title&&l?n.group.apply(n,["%c "+S].concat(I)):n.group(S)}catch(e){n.log(S)}var R=y(u,w,[v],"prevState"),A=y(u,w,[w],"action"),O=y(u,w,[g,v],"error"),N=y(u,w,[_],"nextState");if(R)if(s.prevState){var P="color: "+s.prevState(v)+"; font-weight: bold";n[R]("%c prev state",P,v)}else n[R]("prev state",v);if(A)if(s.action){var D="color: "+s.action(w)+"; font-weight: bold";n[A]("%c action    ",D,w)}else n[A]("action    ",w);if(g&&O)if(s.error){var L="color: "+s.error(g,v)+"; font-weight: bold;";n[O]("%c error     ",L,g)}else n[O]("error     ",g);if(N)if(s.nextState){var M="color: "+s.nextState(_)+"; font-weight: bold";n[N]("%c next state",M,_)}else n[N]("next state",_);c&&m(v,_,n,C);try{n.groupEnd()}catch(e){n.log(" log end ")}}))}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},R,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,a=t.predicate,o=t.logErrors,s=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var u=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(n,c))return e(c);var l={};u.push(l),l.started=C.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(o)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=C.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof s?s(n,c):t.diff;if(g(u,Object.assign({},t,{diff:h})),u.length=0,l.error)throw l.error;return f}}}}var _,b,w=function(e,t){return function(e,t){return new Array(t+1).join("0")}(0,t-e.toString().length)+e},T=function(e){return w(e.getHours(),2)+":"+w(e.getMinutes(),2)+":"+w(e.getSeconds(),2)+"."+w(e.getMilliseconds(),3)},C="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,x="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},E=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},I=[];_="object"===(void 0===n.g?"undefined":x(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(b=_.DeepDiff)&&I.push((function(){void 0!==b&&_.DeepDiff===f&&(_.DeepDiff=b,b=void 0)})),t(i,r),t(a,r),t(o,r),t(s,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&l(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))},enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var r,i,a=e;for(i=n.path.length-1,r=0;r<i;r++)void 0===a[n.path[r]]&&(a[n.path[r]]={}),a=a[n.path[r]];switch(n.kind){case"A":p(a[n.path[r]],n.index,n.item);break;case"D":case"E":a[n.path[r]]=n.lhs;break;case"N":delete a[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==b},enumerable:!0},noConflict:{value:function(){return I&&(I.forEach((function(e){e()})),I=null),f},enumerable:!0}});var S={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},R={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?k()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=R,e.createLogger=k,e.logger=A,e.default=A,Object.defineProperty(e,"__esModule",{value:!0})}(t)},3488:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,i.default)(e);return{getItem:function(e){return new Promise((function(n,r){n(t.getItem(e))}))},setItem:function(e,n){return new Promise((function(r,i){r(t.setItem(e,n))}))},removeItem:function(e){return new Promise((function(n,r){n(t.removeItem(e))}))}}};var r,i=(r=n(7290))&&r.__esModule?r:{default:r}},7290:function(e,t){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},n(e)}function r(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":n(self))||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch(e){return!1}return!0}(t)?self[t]:i};var i={getItem:r,setItem:r,removeItem:r}},6734:function(e,t,n){"use strict";var r;t.Z=void 0;var i=(0,((r=n(3488))&&r.__esModule?r:{default:r}).default)("local");t.Z=i},5666:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};u(k,a,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(R([])));b&&b!==n&&r.call(b,a)&&(k=b);var w=g.prototype=m.prototype=Object.create(k);function T(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==_typeof(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,u(w,"constructor",g),u(g,"constructor",y),y.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},T(C.prototype),u(C.prototype,o,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new C(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(w),u(w,s,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==("undefined"==typeof globalThis?"undefined":_typeof(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},573:function(e,t,n){"use strict";n.r(t),n.d(t,{createSelector:function(){return u},createSelectorCreator:function(){return s},createStructuredSelector:function(){return c},defaultEqualityCheck:function(){return i},defaultMemoize:function(){return a}});var r="NOT_FOUND",i=function(e,t){return e===t};function a(e,t){var n,a,o="object"==_typeof(t)?t:{equalityCheck:t},s=o.equalityCheck,u=void 0===s?i:s,c=o.maxSize,l=void 0===c?1:c,f=o.resultEqualityCheck,h=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(u),d=1===l?(n=h,{get:function(e){return a&&n(a.key,e)?a.value:r},put:function(e,t){a={key:e,value:t}},getEntries:function(){return a?[a]:[]},clear:function(){a=void 0}}):function(e,t){var n=[];function i(e){var i=n.findIndex((function(n){return t(e,n.key)}));if(i>-1){var a=n[i];return i>0&&(n.splice(i,1),n.unshift(a)),a.value}return r}return{get:i,put:function(t,a){i(t)===r&&(n.unshift({key:t,value:a}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(l,h);function p(){var t=d.get(arguments);if(t===r){if(t=e.apply(null,arguments),f){var n=d.getEntries(),i=n.find((function(e){return f(e.value,t)}));i&&(t=i.value)}d.put(arguments,t)}return t}return p.clearCache=function(){return d.clear()},p}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":_typeof(e)})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,s=0,u={memoizeOptions:void 0},c=r.pop();if("object"==_typeof(c)&&(u=c,c=r.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+_typeof(c)+"]");var l=u,f=l.memoizeOptions,h=void 0===f?n:f,d=Array.isArray(h)?h:[h],p=o(r),v=e.apply(void 0,[function(){return s++,c.apply(null,arguments)}].concat(d)),m=e((function(){for(var e=[],t=p.length,n=0;n<t;n++)e.push(p[n].apply(null,arguments));return a=v.apply(null,e)}));return Object.assign(m,{resultFunc:c,memoizedResultFunc:v,dependencies:p,lastResult:function(){return a},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),m};return i}var u=s(a),c=function(e,t){if(void 0===t&&(t=u),"object"!=_typeof(e))throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+_typeof(e));var n=Object.keys(e),r=t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}));return r}},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=null,i=!1,a=3,o=-1,s=-1,u=!1,c=!1;function l(){if(!u){var e=r.expirationTime;c?C():c=!0,T(d,e)}}function f(){var e=r,t=r.next;if(r===t)r=null;else{var n=r.previous;r=n.next=t,t.previous=n}e.next=e.previous=null,n=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=a,o=s;a=e,s=t;try{var u=n()}finally{a=i,s=o}if("function"==typeof u)if(u={callback:u,priorityLevel:e,expirationTime:t,next:null,previous:null},null===r)r=u.next=u.previous=u;else{n=null,e=r;do{if(e.expirationTime>=t){n=e;break}e=e.next}while(e!==r);null===n?n=r:n===r&&(r=u,l()),(t=n.previous).next=n.previous=u,u.next=n,u.previous=t}}function h(){if(-1===o&&null!==r&&1===r.priorityLevel){u=!0;try{do{f()}while(null!==r&&1===r.priorityLevel)}finally{u=!1,null!==r?l():c=!1}}}function d(e){u=!0;var n=i;i=e;try{if(e)for(;null!==r;){var a=t.unstable_now();if(!(r.expirationTime<=a))break;do{f()}while(null!==r&&r.expirationTime<=a)}else if(null!==r)do{f()}while(null!==r&&!x())}finally{u=!1,i=n,null!==r?l():c=!1,h()}}var p,v,m=Date,y="function"==typeof setTimeout?setTimeout:void 0,g="function"==typeof clearTimeout?clearTimeout:void 0,k="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,_="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function b(e){p=k((function(t){g(v),e(t)})),v=y((function(){_(p),e(t.unstable_now())}),100)}if("object"==("undefined"==typeof performance?"undefined":_typeof(performance))&&"function"==typeof performance.now){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return m.now()};var T,C,x,E=null;if("undefined"!=typeof window?E=window:void 0!==n.g&&(E=n.g),E&&E._schedMock){var I=E._schedMock;T=I[0],C=I[1],x=I[2],t.unstable_now=I[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var S=null,R=function(e){if(null!==S)try{S(e)}finally{S=null}};T=function(e){null!==S?setTimeout(T,0,e):(S=e,setTimeout(R,0,!1))},C=function(){S=null},x=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof k&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,O=!1,N=-1,P=!1,D=!1,L=0,M=33,F=33;x=function(){return L<=t.unstable_now()};var U=new MessageChannel,j=U.port2;U.port1.onmessage=function(){O=!1;var e=A,n=N;A=null,N=-1;var r=t.unstable_now(),i=!1;if(0>=L-r){if(!(-1!==n&&n<=r))return P||(P=!0,b(V)),A=e,void(N=n);i=!0}if(null!==e){D=!0;try{e(i)}finally{D=!1}}};var V=function e(t){if(null!==A){b(e);var n=t-L+F;n<F&&M<F?(8>n&&(n=8),F=n<M?M:n):M=n,L=t+F,O||(O=!0,j.postMessage(void 0))}else P=!1};T=function(e,t){A=e,N=t,D||0>t?j.postMessage(void 0):P||(P=!0,b(V))},C=function(){A=null,O=!1,N=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=a,i=o;a=e,o=t.unstable_now();try{return n()}finally{a=r,o=i,h()}},t.unstable_next=function(e){switch(a){case 1:case 2:case 3:var n=3;break;default:n=a}var r=a,i=o;a=n,o=t.unstable_now();try{return e()}finally{a=r,o=i,h()}},t.unstable_scheduleCallback=function(e,n){var i=-1!==o?o:t.unstable_now();if("object"==_typeof(n)&&null!==n&&"number"==typeof n.timeout)n=i+n.timeout;else switch(a){case 1:n=i+-1;break;case 2:n=i+250;break;case 5:n=i+1073741823;break;case 4:n=i+1e4;break;default:n=i+5e3}if(e={callback:e,priorityLevel:a,expirationTime:n,next:null,previous:null},null===r)r=e.next=e.previous=e,l();else{i=null;var s=r;do{if(s.expirationTime>n){i=s;break}s=s.next}while(s!==r);null===i?i=r:i===r&&(r=e,l()),(n=i.previous).next=i.previous=e,e.next=i,e.previous=n}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)r=null;else{e===r&&(r=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=a;return function(){var r=a,i=o;a=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{a=r,o=i,h()}}},t.unstable_getCurrentPriorityLevel=function(){return a},t.unstable_shouldYield=function(){return!i&&(null!==r&&r.expirationTime<s||x())},t.unstable_continueExecution=function(){null!==r&&l()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return r}},3840:function(e,t,n){"use strict";e.exports=n(53)},3379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var u=e[s],c=r.base?u[0]+r.base:u[0],l=a[c]||0,f="".concat(c," ").concat(l);a[c]=l+1;var h=n(f),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==h)t[h].references++,t[h].updater(d);else{var p=i(d,r);r.byIndex=s,t.splice(s,0,{identifier:f,updater:p,references:1})}o.push(f)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=n(a[o]);t[s].references--}for(var u=r(e,i),c=0;c<a.length;c++){var l=n(a[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=u}}},569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==("undefined"==typeof globalThis?"undefined":_typeof(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==("undefined"==typeof window?"undefined":_typeof(window)))return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){"use strict";var e,t,r={};n.r(r),n.d(r,{FirebaseError:function(){return yn},SDK_VERSION:function(){return rr},_DEFAULT_ENTRY_NAME:function(){return Hn},_addComponent:function(){return Yn},_addOrOverwriteComponent:function(){return Jn},_apps:function(){return Kn},_clearComponents:function(){return er},_components:function(){return Qn},_getProvider:function(){return Zn},_registerComponent:function(){return $n},_removeServiceInstance:function(){return Xn},deleteApp:function(){return sr},getApp:function(){return ar},getApps:function(){return or},initializeApp:function(){return ir},onLog:function(){return lr},registerVersion:function(){return cr},setLogLevel:function(){return fr}});var i=n(7294),a=n.n(i),o=n(3935),s=n.n(o);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}var c,l=c||(c={});function f(e){e.preventDefault(),e.returnValue=""}function h(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function d(e){var t=e.pathname;t=void 0===t?"/":t;var n=e.search;return n=void 0===n?"":n,e=void 0===(e=e.hash)?"":e,n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}function p(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function v(e,t){if(!e)throw new Error(t)}l.Pop="POP",l.Push="PUSH",l.Replace="REPLACE";var m=(0,i.createContext)(null),y=(0,i.createContext)(null),g=(0,i.createContext)({outlet:null,matches:[]});function k(e){var t=e.to,n=e.replace,r=e.state;C()||v(!1);var a=E();return(0,i.useEffect)((function(){a(t,{replace:n,state:r})})),null}function _(e){return function(e){var t=(0,i.useContext)(g).outlet;return t?(0,i.createElement)(I.Provider,{value:e},t):t}(e.context)}function b(e){v(!1)}function w(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,o=e.location,s=e.navigationType,u=void 0===s?c.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;C()&&v(!1);var d=j(n),g=(0,i.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"==typeof o&&(o=p(o));var k=o,_=k.pathname,b=void 0===_?"/":_,w=k.search,T=void 0===w?"":w,x=k.hash,E=void 0===x?"":x,I=k.state,S=void 0===I?null:I,R=k.key,A=void 0===R?"default":R,O=(0,i.useMemo)((function(){var e=F(b,d);return null==e?null:{pathname:e,search:T,hash:E,state:S,key:A}}),[d,b,T,E,S,A]);return null==O?null:(0,i.createElement)(m.Provider,{value:g},(0,i.createElement)(y.Provider,{children:a,value:{location:O,navigationType:u}}))}function T(e){var t=e.children,n=e.location;return function(e,t){C()||v(!1);var n=(0,i.useContext)(g).matches,r=n[n.length-1],a=r?r.params:{},o=(r&&r.pathname,r?r.pathnameBase:"/");r&&r.route;var s,u=x();if(t){var c,l="string"==typeof t?p(t):t;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||v(!1),s=l}else s=u;var f=s.pathname||"/",h=function(e,t,n){void 0===n&&(n="/");var r=F(("string"==typeof t?p(t):t).pathname||"/",n);if(null==r)return null;var i=A(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=D(i[o],r);return a}(e,{pathname:"/"===o?f:f.slice(o.length)||"/"});return function(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,a){return(0,i.createElement)(g.Provider,{children:void 0!==r.route.element?r.route.element:(0,i.createElement)(_,null),value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:U([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:U([o,e.pathnameBase])})})),n)}(R(t),n)}function C(){return null!=(0,i.useContext)(y)}function x(){return C()||v(!1),(0,i.useContext)(y).location}function E(){C()||v(!1);var e=(0,i.useContext)(m),t=e.basename,n=e.navigator,r=(0,i.useContext)(g).matches,a=x().pathname,o=JSON.stringify(r.map((function(e){return e.pathnameBase}))),s=(0,i.useRef)(!1);(0,i.useEffect)((function(){s.current=!0}));var u=(0,i.useCallback)((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!=typeof e){var i=M(e,JSON.parse(o),a);"/"!==t&&(i.pathname=U([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return u}var I=(0,i.createContext)(null);function S(e){var t=(0,i.useContext)(g).matches,n=x().pathname,r=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,i.useMemo)((function(){return M(e,JSON.parse(r),n)}),[e,r,n])}function R(e){var t=[];return i.Children.forEach(e,(function(e){if((0,i.isValidElement)(e))if(e.type!==i.Fragment){e.type!==b&&v(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=R(e.props.children)),t.push(n)}else t.push.apply(t,R(e.props.children))})),t}function A(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||v(!1),a.relativePath=a.relativePath.slice(r.length));var o=U([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&v(!1),A(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:s})})),t}var O=/^:\w+$/,N=function(e){return"*"===e};function P(e,t){var n=e.split("/"),r=n.length;return n.some(N)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!N(e)})).reduce((function(e,t){return e+(O.test(t)?3:""===t?1:10)}),r)}function D(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=L({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:U([i,l.pathname]),pathnameBase:U([i,l.pathnameBase]),route:f}),"/"!==l.pathnameBase&&(i=U([i,l.pathnameBase]))}return a}function L(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));return e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)",[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=_slicedToArray(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(t){return e}}(c[n]||""),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function M(e,t,n){var r,i="string"==typeof e?p(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"==typeof e?p(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:V(a),hash:G(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function F(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var U=function(e){return e.join("/").replace(/\/\/+/g,"/")},j=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},V=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},G=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}var B=["onClick","reloadDocument","replace","state","target","to"],z=(0,i.forwardRef)((function(e,t){var n=e.onClick,r=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,c=e.to,l=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,B),f=function(e){C()||v(!1);var t=(0,i.useContext)(m),n=t.basename,r=t.navigator,a=S(e),o=a.hash,s=a.pathname,u=a.search,c=s;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"==typeof e?p(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===s?n+(f?"/":""):U([n,s])}return r.createHref({pathname:c,search:u,hash:o})}(c),h=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,o=n.state,s=E(),u=x(),c=S(e);return(0,i.useCallback)((function(t){if(!(0!==t.button||r&&"_self"!==r||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t))){t.preventDefault();var n=!!a||d(u)===d(c);s(e,{replace:n,state:o})}}),[u,s,c,a,o,r,e])}(c,{replace:o,state:s,target:u});return(0,i.createElement)("a",q({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||r||h(e)},ref:t,target:u}))}));n(5697);var H=a().createContext(null),W=function(e){e()},K={notify:function(){},get:function(){return[]}};function Q(e,t){var n,r=K;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=W,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=K)},getListeners:function(){return r}};return o}var Y="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function J(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var $=n(8679),Z=n.n($),X=n(9864),ee=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],te=["reactReduxForwardedRef"],ne=[],re=[null,null];function ie(e,t){var n=e[1];return[t.payload,n+1]}function ae(e,t,n){Y((function(){return e.apply(void 0,t)}),n)}function oe(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function se(e,t,n,r,i,a,o,s,u,c){if(e){var l=!1,f=null,h=function(){if(!l){var e,n,h=t.getState();try{e=r(h,i.current)}catch(e){n=e,f=e}n||(f=null),e===a.current?o.current||u():(a.current=e,s.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=h,n.trySubscribe(),h(),function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var ue=function(){return[null,0]};function ce(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,o=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,s=n.methodName,c=void 0===s?"connectAdvanced":s,l=n.renderCountProp,f=void 0===l?void 0:l,h=n.shouldHandleStateChanges,d=void 0===h||h,p=n.storeKey,v=void 0===p?"store":p,m=(n.withRef,n.forwardRef),y=void 0!==m&&m,g=n.context,k=void 0===g?H:g,_=J(n,ee),b=k;return function(t){var n=t.displayName||t.name||"Component",r=o(n),s=u({},_,{getDisplayName:o,methodName:c,renderCountProp:f,shouldHandleStateChanges:d,storeKey:v,displayName:r,wrappedComponentName:n,WrappedComponent:t}),l=_.pure,h=l?i.useMemo:function(e){return e()};function p(n){var r=(0,i.useMemo)((function(){var e=n.reactReduxForwardedRef,t=J(n,te);return[n.context,e,t]}),[n]),o=r[0],c=r[1],l=r[2],f=(0,i.useMemo)((function(){return o&&o.Consumer&&(0,X.isContextConsumer)(a().createElement(o.Consumer,null))?o:b}),[o,b]),p=(0,i.useContext)(f),v=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(p)&&Boolean(p.store);var m=v?n.store:p.store,y=(0,i.useMemo)((function(){return function(t){return e(t.dispatch,s)}(m)}),[m]),g=(0,i.useMemo)((function(){if(!d)return re;var e=Q(m,v?null:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[m,v,p]),k=g[0],_=g[1],w=(0,i.useMemo)((function(){return v?p:u({},p,{subscription:k})}),[v,p,k]),T=(0,i.useReducer)(ie,ne,ue),C=T[0][0],x=T[1];if(C&&C.error)throw C.error;var E=(0,i.useRef)(),I=(0,i.useRef)(l),S=(0,i.useRef)(),R=(0,i.useRef)(!1),A=h((function(){return S.current&&l===I.current?S.current:y(m.getState(),l)}),[m,C,l]);ae(oe,[I,E,R,l,A,S,_]),ae(se,[d,m,k,y,I,E,R,S,_,x],[m,k,y]);var O=(0,i.useMemo)((function(){return a().createElement(t,u({},A,{ref:c}))}),[c,t,A]);return(0,i.useMemo)((function(){return d?a().createElement(f.Provider,{value:w},O):O}),[f,O,w])}var m=l?a().memo(p):p;if(m.WrappedComponent=t,m.displayName=p.displayName=r,y){var g=a().forwardRef((function(e,t){return a().createElement(m,u({},e,{reactReduxForwardedRef:t}))}));return g.displayName=r,g.WrappedComponent=t,Z()(g,t)}return Z()(m,t)}}function le(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function fe(e,t){if(le(e,t))return!0;if("object"!=_typeof(e)||null===e||"object"!=_typeof(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!le(e[n[i]],t[n[i]]))return!1;return!0}function he(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function de(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function pe(e,t){return function(t,n){n.displayName;var r=function e(t,n){return e.dependsOnOwnProps?e.mapToProps(t,n):e.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=de(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=de(i),i=r(t,n)),i},r}}var ve=[function(e){return"function"==typeof e?pe(e):void 0},function(e){return e?void 0:he((function(e){return{dispatch:e}}))},function(e){return e&&"object"==_typeof(e)?he((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"==typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}],me=[function(e){return"function"==typeof e?pe(e):void 0},function(e){return e?void 0:he((function(){return{}}))}];function ye(e,t,n){return u({},n,e,t)}var ge=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,s){var u=e(t,n,s);return o?i&&a(u,r)||(r=u):(o=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return ye}}],ke=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function _e(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function be(e,t,n,r,i){var a,o,s,u,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;return function(i,p){return d?function(i,d){var p,v,m=!f(d,o),y=!l(i,a);return a=i,o=d,m&&y?(s=e(a,o),t.dependsOnOwnProps&&(u=t(r,o)),c=n(s,u,o)):m?(e.dependsOnOwnProps&&(s=e(a,o)),t.dependsOnOwnProps&&(u=t(r,o)),c=n(s,u,o)):y?(p=e(a,o),v=!h(p,s),s=p,v&&(c=n(s,u,o)),c):c}(i,p):(s=e(a=i,o=p),u=t(r,o),c=n(s,u,o),d=!0,c)}}function we(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=J(t,ke),o=n(e,a),s=r(e,a),u=i(e,a);return(a.pure?be:_e)(o,s,u,e,a)}var Te=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Ce(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+_typeof(e)+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function xe(e,t){return e===t}var Ee,Ie=function(e){var t={},n=t.connectHOC,r=void 0===n?ce:n,i=t.mapStateToPropsFactories,a=void 0===i?me:i,o=t.mapDispatchToPropsFactories,s=void 0===o?ve:o,c=t.mergePropsFactories,l=void 0===c?ge:c,f=t.selectorFactory,h=void 0===f?we:f;return function(e,t,n,i){void 0===i&&(i={});var o=i,c=o.pure,f=void 0===c||c,d=o.areStatesEqual,p=void 0===d?xe:d,v=o.areOwnPropsEqual,m=void 0===v?fe:v,y=o.areStatePropsEqual,g=void 0===y?fe:y,k=o.areMergedPropsEqual,_=void 0===k?fe:k,b=J(o,Te),w=Ce(e,a,"mapStateToProps"),T=Ce(t,s,"mapDispatchToProps"),C=Ce(n,l,"mergeProps");return r(h,u({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:T,initMergeProps:C,pure:f,areStatesEqual:p,areOwnPropsEqual:m,areStatePropsEqual:g,areMergedPropsEqual:_},b))}}();function Se(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Re(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Se(a,r,i,o,s,"next",e)}function s(e){Se(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){return De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},De(e,t)}function Le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&De(e,t)}function Me(e){return Me="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},Me(e)}function Fe(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pe(e)}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ee=o.unstable_batchedUpdates,W=Ee;var Ve=n(7757),Ge=n.n(Ve),qe=n(3379),Be=n.n(qe),ze=n(7795),He=n.n(ze),We=n(569),Ke=n.n(We),Qe=n(3565),Ye=n.n(Qe),Je=n(9216),$e=n.n(Je),Ze=n(4589),Xe=n.n(Ze),et=n(1647),tt={};function nt(e,t){if(null==e)return{};var n,r,i=J(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}tt.styleTagTransform=Xe(),tt.setAttributes=Ye(),tt.insert=Ke().bind(null,"head"),tt.domAPI=He(),tt.insertStyleElement=$e(),Be()(et.Z,tt),et.Z&&et.Z.locals&&et.Z.locals;var rt=n(2952),it={};it.styleTagTransform=Xe(),it.setAttributes=Ye(),it.insert=Ke().bind(null,"head"),it.domAPI=He(),it.insertStyleElement=$e(),Be()(rt.Z,it),rt.Z&&rt.Z.locals&&rt.Z.locals;var at=function(e){return a().createElement("div",{className:"".concat(e.size," menu-item"),onClick:function(){return e.linkUrl}},a().createElement("div",{className:"background-image",style:{backgroundImage:"url(".concat(e.imageUrl,")")}}),a().createElement("div",{className:"content"},a().createElement(z,{to:e.linkUrl},a().createElement("h1",{className:"title"},e.title.toUpperCase())),a().createElement("span",{className:"shop"},"shop now")))},ot=n(8222),st={};st.styleTagTransform=Xe(),st.setAttributes=Ye(),st.insert=Ke().bind(null,"head"),st.domAPI=He(),st.insertStyleElement=$e(),Be()(ot.Z,st),ot.Z&&ot.Z.locals&&ot.Z.locals;var ut=n(573),ct=(0,ut.createSelector)([function(e){return e.directory}],(function(e){return e.sections})),lt=["id"],ft=Ie((0,ut.createStructuredSelector)({sections:ct}))((function(e){var t=e.sections;return a().createElement("div",{className:"directory-menu"},t.map((function(e){var t=e.id,n=nt(e,lt);return a().createElement(at,u({key:t},n))})))})),ht=n(9852),dt={};dt.styleTagTransform=Xe(),dt.setAttributes=Ye(),dt.insert=Ke().bind(null,"head"),dt.domAPI=He(),dt.insertStyleElement=$e(),Be()(ht.Z,dt),ht.Z&&ht.Z.locals&&ht.Z.locals;var pt=function(){return a().createElement("div",{className:"homepage"},a().createElement(ft,null))},vt=n(5366),mt={};mt.styleTagTransform=Xe(),mt.setAttributes=Ye(),mt.insert=Ke().bind(null,"head"),mt.domAPI=He(),mt.insertStyleElement=$e(),Be()(vt.Z,mt),vt.Z&&vt.Z.locals&&vt.Z.locals;var yt=n(5676),gt={};gt.styleTagTransform=Xe(),gt.setAttributes=Ye(),gt.insert=Ke().bind(null,"head"),gt.domAPI=He(),gt.insertStyleElement=$e(),Be()(yt.Z,gt),yt.Z&&yt.Z.locals&&yt.Z.locals;var kt=n(4627),_t={};_t.styleTagTransform=Xe(),_t.setAttributes=Ye(),_t.insert=Ke().bind(null,"head"),_t.domAPI=He(),_t.insertStyleElement=$e(),Be()(kt.Z,_t),kt.Z&&kt.Z.locals&&kt.Z.locals;var bt=["children","isGoogleSignIn","inverted"],wt=function(e){var t=e.children,n=e.isGoogleSignIn,r=e.inverted,i=nt(e,bt);return a().createElement("button",u({className:"".concat(r?"inverted":""," ").concat(n?"google-sign-in":""," custom-button")},i),t)},Tt="TOGGLE_CART_HIDDEN",Ct="ADD_ITEM",xt="REMOVE_ITEM",Et="CLEAR_ITEM_FROM_CART",It=function(){return{type:Tt}},St=function(e){return{type:Ct,payload:e}},Rt=Ie(null,(function(e){return{addItem:function(t){return e(St(t))}}}))((function(e){var t=e.item,n=e.addItem,r=t.name,i=t.price,o=t.imageUrl;return a().createElement("div",{className:"collection-item"},a().createElement("div",{className:"image",style:{backgroundImage:"url(".concat(o,")")}}),a().createElement("div",{className:"collection-footer"},a().createElement("span",{className:"name"},r),a().createElement("span",{className:"price"},i)),a().createElement(wt,{inverted:!0,onClick:function(){return n(t)}},"Add to cart"))})),At=function(e){var t=e.title,n=e.items;return a().createElement("div",{className:"collection-preview"},a().createElement("h1",{className:"title"},t.toUpperCase()),a().createElement("div",{className:"preview"},n.filter((function(e,t){return t<4})).map((function(e){return a().createElement(Rt,{key:e.id,item:e})}))))},Ot=n(2890),Nt={};Nt.styleTagTransform=Xe(),Nt.setAttributes=Ye(),Nt.insert=Ke().bind(null,"head"),Nt.domAPI=He(),Nt.insertStyleElement=$e(),Be()(Ot.Z,Nt),Ot.Z&&Ot.Z.locals&&Ot.Z.locals;var Pt=n(773),Dt=n.n(Pt),Lt=n(573).createSelector,Mt=function(e){return e.shop},Ft=Lt([Mt],(function(e){return e.collections})),Ut=Lt([Ft],(function(e){return e?Object.keys(e).map((function(t){return e[t]})):[]})),jt=Dt()((function(e){return Lt([Ft],(function(t){return t?t[e]:null}))})),Vt=(Lt([Mt],(function(e){return!!e.collections})),["id"]),Gt=Ie((0,ut.createStructuredSelector)({collections:Ut}))((function(e){var t=e.collections;return a().createElement("div",{className:"collections-overview"},t.map((function(e){var t=e.id,n=nt(e,Vt);return a().createElement(At,u({key:t},n))})))})),qt=n(876),Bt={};Bt.styleTagTransform=Xe(),Bt.setAttributes=Ye(),Bt.insert=Ke().bind(null,"head"),Bt.domAPI=He(),Bt.insertStyleElement=$e(),Be()(qt.Z,Bt),qt.Z&&qt.Z.locals&&qt.Z.locals;var zt=Ie((function(e,t){return{collection:jt(t.collectionID)(e)}}))((function(e){return e.collection,a().createElement("div",{className:"collection-page"},a().createElement("h2",{className:"title"}," Under construction... "))})),Ht=Ie((0,ut.createStructuredSelector)({collections:Ft}))((function(){return a().createElement("div",{className:"shop-page"},a().createElement(T,null,a().createElement(b,{exact:!0,path:"/",element:a().createElement(Gt,null)}),a().createElement(b,{path:"/:collectionId",element:a().createElement(zt,null)})))})),Wt=n(2428),Kt={};Kt.styleTagTransform=Xe(),Kt.setAttributes=Ye(),Kt.insert=Ke().bind(null,"head"),Kt.domAPI=He(),Kt.insertStyleElement=$e(),Be()(Wt.Z,Kt),Wt.Z&&Wt.Z.locals&&Wt.Z.locals;var Qt=n(219),Yt={};Yt.styleTagTransform=Xe(),Yt.setAttributes=Ye(),Yt.insert=Ke().bind(null,"head"),Yt.domAPI=He(),Yt.insertStyleElement=$e(),Be()(Qt.Z,Yt),Qt.Z&&Qt.Z.locals&&Qt.Z.locals;var Jt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$t=a().createContext&&a().createContext(Jt),Zt=function(){return Zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zt.apply(this,arguments)};function Xt(e){return e&&e.map((function(e,t){return a().createElement(e.tag,Zt({key:t},e.attr),Xt(e.child))}))}function en(e){return function(t){return a().createElement(tn,Zt({attr:Zt({},e.attr)},t),Xt(e.child))}}function tn(e){var t=function(t){var n,r=e.attr,i=e.size,o=e.title,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["attr","size","title"]),u=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),a().createElement("svg",Zt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:Zt(Zt({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&a().createElement("title",null,o),e.children)};return void 0!==$t?a().createElement($t.Consumer,null,(function(e){return t(e)})):t(Jt)}function nn(e){return en({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(e)}function rn(e){return en({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"}}]})(e)}var an=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},on={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(an(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},sn=function(e){return function(e){var t=an(e);return on.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function un(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=un(e[n],t[n]));return e}var cn=function(){function e(){var t=this;_classCallCheck(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return _createClass(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ln(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fn(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function hn(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function dn(){var e="object"==("undefined"==typeof chrome?"undefined":_typeof(chrome))?chrome.runtime:"object"==("undefined"==typeof browser?"undefined":_typeof(browser))?browser.runtime:void 0;return"object"==_typeof(e)&&void 0!==e.id}function pn(){return"object"==("undefined"==typeof navigator?"undefined":_typeof(navigator))&&"ReactNative"===navigator.product}function vn(){var e=ln();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function mn(){return"object"==("undefined"==typeof indexedDB?"undefined":_typeof(indexedDB))}var yn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_assertThisInitialized(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(a),gn.prototype.create),a}return _createClass(n)}(_wrapNativeSuper(Error)),gn=function(){function e(t,n,r){_classCallCheck(this,e),this.service=t,this.serviceName=n,this.errors=r}return _createClass(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(kn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new yn(n,a,t)}}]),e}(),kn=/\{\$([^}]+)}/g;function _n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(wn(s)&&wn(u)){if(!bn(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function wn(e){return null!==e&&"object"==_typeof(e)}function Tn(e){for(var t=[],n=function(){var e=_slicedToArray(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Cn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=_slicedToArray(n,2),i=r[0],a=r[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}})),t}function xn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function En(e,t){var n=new In(e,t);return n.subscribe.bind(n)}var In=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return _createClass(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=_typeof(e)||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=Sn),void 0===r.error&&(r.error=Sn),void 0===r.complete&&(r.complete=Sn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Sn(){}function Rn(e){return e&&e._delegate?e._delegate:e}var An,On=function(){function e(t,n,r){_classCallCheck(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return _createClass(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Nn="[DEFAULT]",Pn=function(){function e(t,n){_classCallCheck(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}var t;return _createClass(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new cn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Nn})}catch(e){}var t,n=_createForOfIteratorHelper(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=_slicedToArray(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(e){}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(_toConsumableArray(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),_toConsumableArray(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=_createForOfIteratorHelper(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=_slicedToArray(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(e){o.e(e)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(e){}}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Nn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(n){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.component?this.component.multipleInstances?e:Nn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}(),Dn=function(){function e(t){_classCallCheck(this,e),this.name=t,this.providers=new Map}return _createClass(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Pn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ln=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(An||(An={}));var Mn={debug:An.DEBUG,verbose:An.VERBOSE,info:An.INFO,warn:An.WARN,error:An.ERROR,silent:An.SILENT},Fn=An.INFO,Un=(_defineProperty(e={},An.DEBUG,"log"),_defineProperty(e,An.VERBOSE,"log"),_defineProperty(e,An.INFO,"info"),_defineProperty(e,An.WARN,"warn"),_defineProperty(e,An.ERROR,"error"),e),jn=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=Un[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(o))}},Vn=function(){function e(t){_classCallCheck(this,e),this.name=t,this._logLevel=Fn,this._logHandler=jn,this._userLogHandler=null,Ln.push(this)}return _createClass(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in An))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?Mn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,An.DEBUG].concat(t)),this._logHandler.apply(this,[this,An.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,An.VERBOSE].concat(t)),this._logHandler.apply(this,[this,An.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,An.INFO].concat(t)),this._logHandler.apply(this,[this,An.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,An.WARN].concat(t)),this._logHandler.apply(this,[this,An.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,An.ERROR].concat(t)),this._logHandler.apply(this,[this,An.ERROR].concat(t))}}]),e}(),Gn=function(){function e(t){_classCallCheck(this,e),this.container=t}return _createClass(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}(),qn="@firebase/app",Bn="0.7.15",zn=new Vn("@firebase/app"),Hn="[DEFAULT]",Wn=(_defineProperty(t={},qn,"fire-core"),_defineProperty(t,"@firebase/app-compat","fire-core-compat"),_defineProperty(t,"@firebase/analytics","fire-analytics"),_defineProperty(t,"@firebase/analytics-compat","fire-analytics-compat"),_defineProperty(t,"@firebase/app-check","fire-app-check"),_defineProperty(t,"@firebase/app-check-compat","fire-app-check-compat"),_defineProperty(t,"@firebase/auth","fire-auth"),_defineProperty(t,"@firebase/auth-compat","fire-auth-compat"),_defineProperty(t,"@firebase/database","fire-rtdb"),_defineProperty(t,"@firebase/database-compat","fire-rtdb-compat"),_defineProperty(t,"@firebase/functions","fire-fn"),_defineProperty(t,"@firebase/functions-compat","fire-fn-compat"),_defineProperty(t,"@firebase/installations","fire-iid"),_defineProperty(t,"@firebase/installations-compat","fire-iid-compat"),_defineProperty(t,"@firebase/messaging","fire-fcm"),_defineProperty(t,"@firebase/messaging-compat","fire-fcm-compat"),_defineProperty(t,"@firebase/performance","fire-perf"),_defineProperty(t,"@firebase/performance-compat","fire-perf-compat"),_defineProperty(t,"@firebase/remote-config","fire-rc"),_defineProperty(t,"@firebase/remote-config-compat","fire-rc-compat"),_defineProperty(t,"@firebase/storage","fire-gcs"),_defineProperty(t,"@firebase/storage-compat","fire-gcs-compat"),_defineProperty(t,"@firebase/firestore","fire-fst"),_defineProperty(t,"@firebase/firestore-compat","fire-fst-compat"),_defineProperty(t,"fire-js","fire-js"),_defineProperty(t,"firebase","fire-js-all"),t),Kn=new Map,Qn=new Map;function Yn(e,t){try{e.container.addComponent(t)}catch(n){zn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Jn(e,t){e.container.addOrOverwriteComponent(t)}function $n(e){var t=e.name;if(Qn.has(t))return zn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qn.set(t,e);var n,r=_createForOfIteratorHelper(Kn.values());try{for(r.s();!(n=r.n()).done;)Yn(n.value,e)}catch(e){r.e(e)}finally{r.f()}return!0}function Zn(e,t){return e.container.getProvider(t)}function Xn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hn;Zn(e,t).clearInstance(n)}function er(){Qn.clear()}var tr=new gn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."}),nr=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new On("app",(function(){return i}),"PUBLIC"))}return _createClass(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}]),e}(),rr="9.6.5";function ir(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=_typeof(t)&&(t={name:t});var n=Object.assign({name:Hn,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw tr.create("bad-app-name",{appName:String(r)});var i=Kn.get(r);if(i){if(bn(e,i.options)&&bn(n,i.config))return i;throw tr.create("duplicate-app",{appName:r})}var a,o=new Dn(r),s=_createForOfIteratorHelper(Qn.values());try{for(s.s();!(a=s.n()).done;){var u=a.value;o.addComponent(u)}}catch(e){s.e(e)}finally{s.f()}var c=new nr(e,n,o);return Kn.set(r,c),c}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=Kn.get(e);if(!t)throw tr.create("no-app",{appName:e});return t}function or(){return Array.from(Kn.values())}function sr(e){return ur.apply(this,arguments)}function ur(){return ur=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=Kn.has(n),!e.t0){e.next=7;break}return Kn.delete(n),e.next=6,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}}),e)}))),ur.apply(this,arguments)}function cr(e,t,n){var r,i=null!==(r=Wn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zn.warn(s.join(" "))}$n(new On("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function lr(e,t){if(null!==e&&"function"!=typeof e)throw tr.create("invalid-log-argument");!function(e,t){var n,r=_createForOfIteratorHelper(Ln);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Mn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:An[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}(e,t)}function fr(e){var t;t=e,Ln.forEach((function(e){e.setLogLevel(t)}))}$n(new On("platform-logger",(function(e){return new Gn(e)}),"PRIVATE")),cr(qn,Bn,""),cr(qn,Bn,"esm2017"),cr("fire-js","");var hr=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._delegate=t,this.firebase=n,Yn(t,new On("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return _createClass(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),sr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Yn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Jn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),dr=new gn("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pr=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=ir(r,i);if(_n(t,a.name))return t[a.name];var o=new e(a,n);return t[a.name]=o,o},app:i,registerVersion:cr,setLogLevel:fr,onLog:lr,apps:null,SDK_VERSION:rr,INTERNAL:{registerComponent:function(t){var r=t.name,a=r.replace("-compat","");if($n(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[a])throw dr.create("invalid-app-argument",{appName:r});return e[a]()};void 0!==t.serviceProps&&un(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this._getService.bind(this,r).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!_n(t,e=e||Hn))throw dr.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,n}(hr);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){un(t,e)},createSubscribe:En,ErrorFactory:gn,deepExtend:un}),t}(),vr=new Vn("@firebase/app-compat");if("object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&void 0!==self.firebase){vr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var mr=self.firebase.SDK_VERSION;mr&&mr.indexOf("LITE")>=0&&vr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var yr=pr;cr("@firebase/app-compat","0.1.16",void 0),yr.registerVersion("firebase","9.6.5","app-compat");var gr,kr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},_r={},br=br||{},wr=kr||self;function Tr(){}function Cr(e){var t=_typeof(e);return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function xr(e){var t=_typeof(e);return"object"==t&&null!=e||"function"==t}var Er="closure_uid_"+(1e9*Math.random()>>>0),Ir=0;function Sr(e,t,n){return e.call.apply(e.bind,arguments)}function Rr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ar(e,t,n){return(Ar=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sr:Rr).apply(null,arguments)}function Or(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Nr(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Pr(){this.s=this.s,this.o=this.o}var Dr={};Pr.prototype.s=!1,Pr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Er)&&e[Er]||(e[Er]=++Ir)}(this);delete Dr[e]}},Pr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Lr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Mr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Fr(e){return Array.prototype.concat.apply([],arguments)}function Ur(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function jr(e){return/^[\s\xa0]*$/.test(e)}var Vr,Gr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function qr(e,t){return-1!=e.indexOf(t)}function Br(e,t){return e<t?-1:e>t?1:0}e:{var zr=wr.navigator;if(zr){var Hr=zr.userAgent;if(Hr){Vr=Hr;break e}}Vr=""}function Wr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Kr(e){var t={};for(var n in e)t[n]=e[n];return t}var Qr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yr(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Qr.length;a++)n=Qr[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Jr(e){return Jr[" "](e),e}Jr[" "]=Tr;var $r,Zr,Xr=qr(Vr,"Opera"),ei=qr(Vr,"Trident")||qr(Vr,"MSIE"),ti=qr(Vr,"Edge"),ni=ti||ei,ri=qr(Vr,"Gecko")&&!(qr(Vr.toLowerCase(),"webkit")&&!qr(Vr,"Edge"))&&!(qr(Vr,"Trident")||qr(Vr,"MSIE"))&&!qr(Vr,"Edge"),ii=qr(Vr.toLowerCase(),"webkit")&&!qr(Vr,"Edge");function ai(){var e=wr.document;return e?e.documentMode:void 0}e:{var oi="",si=(Zr=Vr,ri?/rv:([^\);]+)(\)|;)/.exec(Zr):ti?/Edge\/([\d\.]+)/.exec(Zr):ei?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Zr):ii?/WebKit\/(\S+)/.exec(Zr):Xr?/(?:Version)[ \/]?(\S+)/.exec(Zr):void 0);if(si&&(oi=si?si[1]:""),ei){var ui=ai();if(null!=ui&&ui>parseFloat(oi)){$r=String(ui);break e}}$r=oi}var ci={},li=wr.document&&ei&&(ai()||parseInt($r,10))||void 0,fi=function(){if(!wr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{wr.addEventListener("test",Tr,t),wr.removeEventListener("test",Tr,t)}catch(e){}return e}();function hi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function di(e,t){if(hi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ri){e:{try{Jr(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:pi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&di.Z.h.call(this)}}hi.prototype.h=function(){this.defaultPrevented=!0},Nr(di,hi);var pi={2:"touch",3:"pen",4:"mouse"};di.prototype.h=function(){di.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var vi="closure_listenable_"+(1e6*Math.random()|0),mi=0;function yi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++mi,this.ca=this.fa=!1}function gi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ki(e){this.src=e,this.g={},this.h=0}function _i(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Lr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(gi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function bi(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}ki.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=bi(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new yi(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var wi="closure_lm_"+(1e6*Math.random()|0),Ti={};function Ci(e,t,n,r,i){if(r&&r.once)return Ei(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ci(e,t[a],n,r,i);return null}return n=Pi(n),e&&e[vi]?e.N(t,n,xr(r)?!!r.capture:!!r,i):xi(e,t,n,!1,r,i)}function xi(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=xr(i)?!!i.capture:!!i,s=Oi(e);if(s||(e[wi]=s=new ki(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=Ai;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)fi||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ri(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ei(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ei(e,t[a],n,r,i);return null}return n=Pi(n),e&&e[vi]?e.O(t,n,xr(r)?!!r.capture:!!r,i):xi(e,t,n,!0,r,i)}function Ii(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ii(e,t[a],n,r,i);else r=xr(r)?!!r.capture:!!r,n=Pi(n),e&&e[vi]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=bi(a=e.g[t],n,r,i))&&(gi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--))):e&&(e=Oi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=bi(t,n,r,i)),(n=-1<e?t[e]:null)&&Si(n))}function Si(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[vi])_i(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ri(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Oi(t))?(_i(n,e),0==n.h&&(n.src=null,t[wi]=null)):gi(e)}}}function Ri(e){return e in Ti?Ti[e]:Ti[e]="on"+e}function Ai(e,t){if(e.ca)e=!0;else{t=new di(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Si(e),e=n.call(r,t)}return e}function Oi(e){return(e=e[wi])instanceof ki?e:null}var Ni="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pi(e){return"function"==typeof e?e:(e[Ni]||(e[Ni]=function(t){return e.handleEvent(t)}),e[Ni])}function Di(){Pr.call(this),this.i=new ki(this),this.P=this,this.I=null}function Li(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new hi(t,e);else if(t instanceof hi)t.target=t.target||e;else{var i=t;Yr(t=new hi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Mi(o,r,!0,t)&&i}if(i=Mi(o=t.g=e,r,!0,t)&&i,i=Mi(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Mi(o=t.g=n[a],r,!1,t)&&i}function Mi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&_i(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Nr(Di,Pr),Di.prototype[vi]=!0,Di.prototype.removeEventListener=function(e,t,n,r){Ii(this,e,t,n,r)},Di.prototype.M=function(){if(Di.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gi(n[r]);delete t.g[e],t.h--}}this.I=null},Di.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Di.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Fi=wr.JSON.stringify;function Ui(){var e=Hi,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ji,Vi=new(function(){function e(t,n){_classCallCheck(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return _createClass(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Gi}),(function(e){return e.reset()})),Gi=function(){function e(){_classCallCheck(this,e),this.next=this.g=this.h=null}return _createClass(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function qi(e){wr.setTimeout((function(){throw e}),0)}function Bi(e,t){ji||function(){var e=wr.Promise.resolve(void 0);ji=function(){e.then(Wi)}}(),zi||(ji(),zi=!0),Hi.add(e,t)}var zi=!1,Hi=new(function(){function e(){_classCallCheck(this,e),this.h=this.g=null}return _createClass(e,[{key:"add",value:function(e,t){var n=Vi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function Wi(){for(var e;e=Ui();){try{e.h.call(e.g)}catch(e){qi(e)}var t=Vi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}zi=!1}function Ki(e,t){Di.call(this),this.h=e||1,this.g=t||wr,this.j=Ar(this.kb,this),this.l=Date.now()}function Qi(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Yi(e,t,n){if("function"==typeof e)n&&(e=Ar(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ar(e.handleEvent,e)}return 2147483647<Number(t)?-1:wr.setTimeout(e,t||0)}function Ji(e){e.g=Yi((function(){e.g=null,e.i&&(e.i=!1,Ji(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Nr(Ki,Di),(gr=Ki.prototype).da=!1,gr.S=null,gr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Li(this,"tick"),this.da&&(Qi(this),this.start()))}},gr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gr.M=function(){Ki.Z.M.call(this),Qi(this),delete this.g};var $i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return _createClass(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ji(this)}},{key:"M",value:function(){_get(_getPrototypeOf(n.prototype),"M",this).call(this),this.g&&(wr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Pr);function Zi(e){Pr.call(this),this.h=e,this.g={}}Nr(Zi,Pr);var Xi=[];function ea(e,t,n,r){Array.isArray(n)||(n&&(Xi[0]=n.toString()),n=Xi);for(var i=0;i<n.length;i++){var a=Ci(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ta(e){Wr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Si(e)}),e),e.g={}}function na(){this.g=!0}function ra(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Fi(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Zi.prototype.M=function(){Zi.Z.M.call(this),ta(this)},Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},na.prototype.Aa=function(){this.g=!1},na.prototype.info=function(){};var ia={},aa=null;function oa(){return aa=aa||new Di}function sa(e){hi.call(this,ia.Ma,e)}function ua(e){var t=oa();Li(t,new sa(t,e))}function ca(e,t){hi.call(this,ia.STAT_EVENT,e),this.stat=t}function la(e){var t=oa();Li(t,new ca(t,e))}function fa(e,t){hi.call(this,ia.Na,e),this.size=t}function ha(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return wr.setTimeout((function(){e()}),t)}ia.Ma="serverreachability",Nr(sa,hi),ia.STAT_EVENT="statevent",Nr(ca,hi),ia.Na="timingevent",Nr(fa,hi);var da={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pa={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function va(){}function ma(e){return e.h||(e.h=e.i())}function ya(){}va.prototype.h=null;var ga,ka={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function _a(){hi.call(this,"d")}function ba(){hi.call(this,"c")}function wa(){}function Ta(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Zi(this),this.P=xa,e=ni?125:void 0,this.W=new Ki(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ca}function Ca(){this.i=null,this.g="",this.h=!1}Nr(_a,hi),Nr(ba,hi),Nr(wa,va),wa.prototype.g=function(){return new XMLHttpRequest},wa.prototype.i=function(){return{}},ga=new wa;var xa=45e3,Ea={},Ia={};function Sa(e,t,n){e.K=1,e.v=$a(Ha(t)),e.s=n,e.U=!0,Ra(e,null)}function Ra(e,t){e.F=Date.now(),Pa(e),e.A=Ha(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),lo(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ca,e.g=fs(e.l,n?t:null,!e.s),0<e.O&&(e.L=new $i(Ar(e.Ia,e,e.g),e.O)),ea(e.V,e.g,"readystatechange",e.gb),t=e.H?Kr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ua(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Aa(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Oa(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Na(e,n))==Ia){4==t&&(e.o=4,la(14),i=!1),ra(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ea){e.o=4,la(15),ra(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ra(e.j,e.m,r,null),Ua(e,r)}Aa(e)&&r!=Ia&&r!=Ea&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,la(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),rs(t),t.L=!0,la(11))):(ra(e.j,e.m,n,"[Invalid Chunked Response]"),Fa(e),Ma(e))}function Na(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ia:(n=Number(t.substring(n,r)),isNaN(n)?Ea:(r+=1)+n>t.length?Ia:(t=t.substr(r,n),e.C=r+n,t))}function Pa(e){e.Y=Date.now()+e.P,Da(e,e.P)}function Da(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ha(Ar(e.eb,e),t)}function La(e){e.B&&(wr.clearTimeout(e.B),e.B=null)}function Ma(e){0==e.l.G||e.I||os(e.l,e)}function Fa(e){La(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Qi(e.W),ta(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ua(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||yo(n.i,e)))if(n.I=e.N,!e.J&&yo(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;as(n),Qo(n)}ns(n),la(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ha(Ar(n.ab,n),6e3));if(1>=mo(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else us(n,11)}else if((e.J||n.g==e)&&as(n),!jr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(qr(l,"spdy")||qr(l,"quic")||qr(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(go(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Ja(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=ls(r,r.H?r.la:null,r.W),d.J){ko(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(La(p),Pa(p)),r.g=d}else ts(r);0<n.l.length&&$o(n)}else"stop"!=a[0]&&"close"!=a[0]||us(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?us(n,7):Ko(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}ua(4)}catch(e){}}function ja(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Cr(e)||"string"==typeof e)Mr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Cr(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Cr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Va(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Va)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ga(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];qa(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)qa(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function qa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(gr=Ta.prototype).setTimeout=function(e){this.P=e},gr.gb=function(e){e=e.target;var t=this.L;t&&3==qo(e)?t.l():this.Ia(e)},gr.Ia=function(e){try{if(e==this.g)e:{var t=qo(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||ni||this.g&&(this.h.h||this.g.ga()||Bo(this.g)))){this.I||4!=t||7==n||ua(8==n||0>=r?3:2),La(this);var i=this.g.ba();this.N=i;t:if(Aa(this)){var a=Bo(this.g);e="";var o=a.length,s=4==qo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Fa(this),Ma(this);var u="";break t}this.h.i=new wr.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jr(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,la(12),Fa(this),Ma(this);break e}ra(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ua(this,i)}this.U?(Oa(this,t,u),ni&&this.i&&3==t&&(ea(this.V,this.W,"tick",this.fb),this.W.start())):(ra(this.j,this.m,u,null),Ua(this,u)),4==t&&Fa(this),this.i&&!this.I&&(4==t?os(this.l,this):(this.i=!1,Pa(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,la(12)):(this.o=0,la(13)),Fa(this),Ma(this)}}}catch(e){}},gr.fb=function(){if(this.g){var e=qo(this.g),t=this.g.ga();this.C<t.length&&(La(this),Oa(this,e,t),this.i&&4!=e&&Pa(this))}},gr.cancel=function(){this.I=!0,Fa(this)},gr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ua(3),la(17)),Fa(this),this.o=2,Ma(this)):Da(this,this.Y-e)},(gr=Va.prototype).R=function(){Ga(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},gr.T=function(){return Ga(this),this.g.concat()},gr.get=function(e,t){return qa(this.h,e)?this.h[e]:t},gr.set=function(e,t){qa(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},gr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Ba=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function za(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof za){this.g=void 0!==t?t:e.g,Wa(this,e.j),this.s=e.s,Ka(this,e.i),Qa(this,e.m),this.l=e.l,t=e.h;var n=new oo;n.i=t.i,t.g&&(n.g=new Va(t.g),n.h=t.h),Ya(this,n),this.o=e.o}else e&&(n=String(e).match(Ba))?(this.g=!!t,Wa(this,n[1]||"",!0),this.s=Za(n[2]||""),Ka(this,n[3]||"",!0),Qa(this,n[4]),this.l=Za(n[5]||"",!0),Ya(this,n[6]||"",!0),this.o=Za(n[7]||"")):(this.g=!!t,this.h=new oo(null,this.g))}function Ha(e){return new za(e)}function Wa(e,t,n){e.j=n?Za(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ka(e,t,n){e.i=n?Za(t,!0):t}function Qa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ya(e,t,n){t instanceof oo?(e.h=t,function(e,t){t&&!e.j&&(so(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(uo(this,t),lo(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Xa(t,io)),e.h=new oo(t,e.g))}function Ja(e,t,n){e.h.set(t,n)}function $a(e){return Ja(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Za(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Xa(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,eo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function eo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}za.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Xa(t,to,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Xa(t,to,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Xa(n,"/"==n.charAt(0)?ro:no,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Xa(n,ao)),e.join("")};var to=/[#\/\?@]/g,no=/[#\?:]/g,ro=/[#\?]/g,io=/[#\?@]/g,ao=/#/g;function oo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function so(e){e.g||(e.g=new Va,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function uo(e,t){so(e),t=fo(e,t),qa(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,qa((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ga(e)))}function co(e,t){return so(e),t=fo(e,t),qa(e.g.h,t)}function lo(e,t,n){uo(e,t),0<n.length&&(e.i=null,e.g.set(fo(e,t),Ur(n)),e.h+=n.length)}function fo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function ho(e){this.l=e||po,e=wr.PerformanceNavigationTiming?0<(e=wr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(wr.g&&wr.g.Ea&&wr.g.Ea()&&wr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gr=oo.prototype).add=function(e,t){so(this),this.i=null,e=fo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},gr.forEach=function(e,t){so(this),this.g.forEach((function(n,r){Mr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},gr.T=function(){so(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},gr.R=function(e){so(this);var t=[];if("string"==typeof e)co(this,e)&&(t=Fr(t,this.g.get(fo(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Fr(t,e[n])}return t},gr.set=function(e,t){return so(this),this.i=null,co(this,e=fo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},gr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},gr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var po=10;function vo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function mo(e){return e.h?1:e.g?e.g.size:0}function yo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function go(e,t){e.g?e.g.add(t):e.h=t}function ko(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function _o(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=_createForOfIteratorHelper(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(e){r.e(e)}finally{r.f()}return n}return Ur(e.i)}function bo(){}function wo(){this.g=new bo}function To(e,t,n){var r=n||"";try{ja(e,(function(e,n){var i=e;xr(e)&&(i=Fi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Co(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function xo(e){this.l=e.$b||null,this.j=e.ib||!1}function Eo(e,t){Di.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Io,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ho.prototype.cancel=function(){if(this.i=_o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=_createForOfIteratorHelper(this.g.values());try{for(t.s();!(e=t.n()).done;)e.value.cancel()}catch(e){t.e(e)}finally{t.f()}this.g.clear()}},bo.prototype.stringify=function(e){return wr.JSON.stringify(e,void 0)},bo.prototype.parse=function(e){return wr.JSON.parse(e,void 0)},Nr(xo,va),xo.prototype.g=function(){return new Eo(this.l,this.j)},xo.prototype.i=function(e){return function(){return e}}({}),Nr(Eo,Di);var Io=0;function So(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ro(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ao(e)}function Ao(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(gr=Eo.prototype).open=function(e,t){if(this.readyState!=Io)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ao(this)},gr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||wr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},gr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ro(this)),this.readyState=Io},gr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==wr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;So(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},gr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ro(this):Ao(this),3==this.readyState&&So(this)}},gr.Ua=function(e){this.g&&(this.response=this.responseText=e,Ro(this))},gr.Ta=function(e){this.g&&(this.response=e,Ro(this))},gr.ha=function(){this.g&&Ro(this)},gr.setRequestHeader=function(e,t){this.v.append(e,t)},gr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},gr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Eo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Oo=wr.JSON.parse;function No(e){Di.call(this),this.headers=new Va,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Po,this.K=this.L=!1}Nr(No,Di);var Po="",Do=/^https?$/i,Lo=["POST","PUT"];function Mo(e){return"content-type"==e.toLowerCase()}function Fo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Uo(e),Vo(e)}function Uo(e){e.D||(e.D=!0,Li(e,"complete"),Li(e,"error"))}function jo(e){if(e.h&&void 0!==br&&(!e.C[1]||4!=qo(e)||2!=e.ba()))if(e.v&&4==qo(e))Yi(e.Fa,0,e);else if(Li(e,"readystatechange"),4==qo(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ba)[1]||null;if(!a&&wr.self&&wr.self.location){var o=wr.self.location.protocol;a=o.substr(0,o.length-1)}i=!Do.test(a?a.toLowerCase():"")}t=i}if(t)Li(e,"complete"),Li(e,"success");else{e.m=6;try{var s=2<qo(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.ba()+"]",Uo(e)}}finally{Vo(e)}}}function Vo(e,t){if(e.g){Go(e);var n=e.g,r=e.C[0]?Tr:null;e.g=null,e.C=null,t||Li(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Go(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(wr.clearTimeout(e.A),e.A=null)}function qo(e){return e.g?e.g.readyState:0}function Bo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Po:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function zo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Wr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Ja(e,t,n))}function Ho(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wo(e){this.za=0,this.l=[],this.h=new na,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ho("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ho("baseRetryDelayMs",5e3,e),this.$a=Ho("retryDelaySeedMs",1e4,e),this.Ya=Ho("forwardChannelMaxRetries",2,e),this.ra=Ho("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ho(e&&e.concurrentRequestLimit),this.Ca=new wo,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Ko(e){if(Yo(e),3==e.G){var t=e.V++,n=Ha(e.F);Ja(n,"SID",e.J),Ja(n,"RID",t),Ja(n,"TYPE","terminate"),Xo(e,n),(t=new Ta(e,e.h,t,void 0)).K=2,t.v=$a(Ha(n)),n=!1,wr.navigator&&wr.navigator.sendBeacon&&(n=wr.navigator.sendBeacon(t.v.toString(),"")),!n&&wr.Image&&((new Image).src=t.v,n=!0),n||(t.g=fs(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Pa(t)}cs(e)}function Qo(e){e.g&&(rs(e),e.g.cancel(),e.g=null)}function Yo(e){Qo(e),e.u&&(wr.clearTimeout(e.u),e.u=null),as(e),e.i.cancel(),e.m&&("number"==typeof e.m&&wr.clearTimeout(e.m),e.m=null)}function Jo(e,t){e.l.push(new(function(){return _createClass((function e(t,n){_classCallCheck(this,e),this.h=t,this.g=n}))}())(e.Za++,t)),3==e.G&&$o(e)}function $o(e){vo(e.i)||e.m||(e.m=!0,Bi(e.Ha,e),e.C=0)}function Zo(e,t){var n;n=t?t.m:e.V++;var r=Ha(e.F);Ja(r,"SID",e.J),Ja(r,"RID",n),Ja(r,"AID",e.U),Xo(e,r),e.o&&e.s&&zo(r,e.o,e.s),n=new Ta(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=es(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),go(e.i,n),Sa(n,r,t)}function Xo(e,t){e.j&&ja({},(function(e,n){Ja(t,n,e)}))}function es(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Ar(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{To(l,o,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ts(e){e.g||e.u||(e.Y=1,Bi(e.Ga,e),e.A=0)}function ns(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=ha(Ar(e.Ga,e),ss(e,e.A)),e.A++,0))}function rs(e){null!=e.B&&(wr.clearTimeout(e.B),e.B=null)}function is(e){e.g=new Ta(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ha(e.oa);Ja(t,"RID","rpc"),Ja(t,"SID",e.J),Ja(t,"CI",e.N?"0":"1"),Ja(t,"AID",e.U),Xo(e,t),Ja(t,"TYPE","xmlhttp"),e.o&&e.s&&zo(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=$a(Ha(t)),n.s=null,n.U=!0,Ra(n,e)}function as(e){null!=e.v&&(wr.clearTimeout(e.v),e.v=null)}function os(e,t){var n=null;if(e.g==t){as(e),rs(e),e.g=null;var r=2}else{if(!yo(e.i,t))return;n=t.D,ko(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Li(r=oa(),new fa(r,n,t,i)),$o(e)}else ts(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(mo(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=ha(Ar(e.Ha,e,t),ss(e,e.C)),e.C++,0)))}(e,t)||2==r&&ns(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:us(e,5);break;case 4:us(e,10);break;case 3:us(e,6);break;default:us(e,2)}}function ss(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function us(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Ar(e.jb,e);n||(n=new za("//www.google.com/images/cleardot.gif"),wr.location&&"http"==wr.location.protocol||Wa(n,"https"),$a(n)),function(e,t){var n=new na;if(wr.Image){var r=new Image;r.onload=Or(Co,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Or(Co,n,r,"TestLoadImage: error",!1,t),r.onabort=Or(Co,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Or(Co,n,r,"TestLoadImage: timeout",!1,t),wr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else la(2);e.G=0,e.j&&e.j.va(t),cs(e),Yo(e)}function cs(e){e.G=0,e.I=-1,e.j&&(0==_o(e.i).length&&0==e.l.length||(e.i.i.length=0,Ur(e.l),e.l.length=0),e.j.ua())}function ls(e,t,n){var r=function(e){return e instanceof za?Ha(e):new za(e,void 0)}(n);if(""!=r.i)t&&Ka(r,t+"."+r.i),Qa(r,r.m);else{var i=wr.location;r=function(e,t,n,r){var i=new za(null,void 0);return e&&Wa(i,e),t&&Ka(i,t),n&&Qa(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Wr(e.aa,(function(e,t){Ja(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ja(r,t,n),Ja(r,"VER",e.ma),Xo(e,r),r}function fs(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new No(new xo({ib:!0})):new No(e.qa)).L=e.H,t}function hs(){}function ds(){if(ei&&!(10<=Number(li)))throw Error("Environmental error: no available transport.")}function ps(e,t){Di.call(this),this.g=new Wo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!jr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!jr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new ys(this)}function vs(e){_a.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ms(){ba.call(this),this.status=1}function ys(e){this.g=e}(gr=No.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ga.g(),this.C=this.u?ma(this.u):ma(ga),this.g.onreadystatechange=Ar(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Fo(this,e)}e=n||"";var i=new Va(this.headers);r&&ja(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Mo,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=wr.FormData&&e instanceof wr.FormData,!(0<=Lr(Lo,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Go(this),0<this.B&&((this.K=function(e){return ei&&function(){return e=ci,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=Gr(String($r)).split("."),n=Gr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Br(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Br(0==a[2].length,0==o[2].length)||Br(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ar(this.pa,this)):this.A=Yi(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Fo(this,e)}},gr.pa=function(){void 0!==br&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Li(this,"timeout"),this.abort(8))},gr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Li(this,"complete"),Li(this,"abort"),Vo(this))},gr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vo(this,!0)),No.Z.M.call(this)},gr.Fa=function(){this.s||(this.F||this.v||this.l?jo(this):this.cb())},gr.cb=function(){jo(this)},gr.ba=function(){try{return 2<qo(this)?this.g.status:-1}catch(e){return-1}},gr.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},gr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Oo(t)}},gr.Da=function(){return this.m},gr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(gr=Wo.prototype).ma=8,gr.G=1,gr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},gr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Ta(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Yr(n=Kr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=es(this,t,r),Ja(i=Ha(this.F),"RID",e),Ja(i,"CVER",22),this.D&&Ja(i,"X-HTTP-Session-Id",this.D),Xo(this,i),this.o&&n&&zo(i,this.o,n),go(this.i,t),this.Ra&&Ja(i,"TYPE","init"),this.ja?(Ja(i,"$req",r),Ja(i,"SID","null"),t.$=!0,Sa(t,i,null)):Sa(t,i,r),this.G=2}}else 3==this.G&&(e?Zo(this,e):0==this.l.length||vo(this.i)||Zo(this))},gr.Ga=function(){if(this.u=null,is(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ha(Ar(this.bb,this),e)}},gr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,la(10),Qo(this),is(this))},gr.ab=function(){null!=this.v&&(this.v=null,Qo(this),ns(this),la(19))},gr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),la(2)):(this.h.info("Failed to ping google.com"),la(1))},(gr=hs.prototype).xa=function(){},gr.wa=function(){},gr.va=function(){},gr.ua=function(){},gr.Oa=function(){},ds.prototype.g=function(e,t){return new ps(e,t)},Nr(ps,Di),ps.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Bi(Ar(e.hb,e,t))),la(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ls(e,null,e.W),$o(e)},ps.prototype.close=function(){Ko(this.g)},ps.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Jo(this.g,t)}else this.v?((t={}).__data__=Fi(e),Jo(this.g,t)):Jo(this.g,e)},ps.prototype.M=function(){this.g.j=null,delete this.j,Ko(this.g),delete this.g,ps.Z.M.call(this)},Nr(vs,_a),Nr(ms,ba),Nr(ys,hs),ys.prototype.xa=function(){Li(this.g,"a")},ys.prototype.wa=function(e){Li(this.g,new vs(e))},ys.prototype.va=function(e){Li(this.g,new ms(e))},ys.prototype.ua=function(){Li(this.g,"b")},ds.prototype.createWebChannel=ds.prototype.g,ps.prototype.send=ps.prototype.u,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,pa.COMPLETE="complete",ya.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",Di.prototype.listen=Di.prototype.N,No.prototype.listenOnce=No.prototype.O,No.prototype.getLastError=No.prototype.La,No.prototype.getLastErrorCode=No.prototype.Da,No.prototype.getStatus=No.prototype.ba,No.prototype.getResponseJson=No.prototype.Qa,No.prototype.getResponseText=No.prototype.ga,No.prototype.send=No.prototype.ea;var gs=_r.createWebChannelTransport=function(){return new ds},ks=_r.getStatEventTarget=function(){return oa()},_s=_r.ErrorCode=da,bs=_r.EventType=pa,ws=_r.Event=ia,Ts=_r.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Cs=_r.FetchXmlHttpFactory=xo,xs=_r.WebChannel=ya,Es=_r.XhrIo=No,Is="@firebase/firestore",Ss=function(){function e(t){_classCallCheck(this,e),this.uid=t}return _createClass(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");var Rs="9.6.5",As=new Vn("@firebase/firestore");function Os(){return As.logLevel}function Ns(e){if(As.logLevel<=An.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ls);As.debug.apply(As,["Firestore (".concat(Rs,"): ").concat(e)].concat(_toConsumableArray(i)))}}function Ps(e){if(As.logLevel<=An.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ls);As.error.apply(As,["Firestore (".concat(Rs,"): ").concat(e)].concat(_toConsumableArray(i)))}}function Ds(e){if(As.logLevel<=An.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ls);As.warn.apply(As,["Firestore (".concat(Rs,"): ").concat(e)].concat(_toConsumableArray(i)))}}function Ls(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Rs,") INTERNAL ASSERTION FAILED: ")+e;throw Ps(t),new Error(t)}function Fs(e,t){e||Ms()}function Us(e,t){return e}var js={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vs=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return _createClass(n)}(yn),Gs=_createClass((function e(){var t=this;_classCallCheck(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),qs=_createClass((function e(t,n){_classCallCheck(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Bs=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ss.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),zs=function(){function e(t){_classCallCheck(this,e),this.token=t,this.changeListener=null}return _createClass(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Hs=function(){function e(t){_classCallCheck(this,e),this.t=t,this.currentUser=Ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return _createClass(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Gs;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Gs,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Ns("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Ns("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Gs)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ns("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Fs("string"==typeof n.accessToken),new qs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Fs(null===e||"string"==typeof e),new Ss(e)}}]),e}(),Ws=_createClass((function e(t,n,r){_classCallCheck(this,e),this.type="FirstParty",this.user=Ss.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Ks=function(){function e(t,n,r){_classCallCheck(this,e),this.h=t,this.l=n,this.m=r}return _createClass(e,[{key:"getToken",value:function(){return Promise.resolve(new Ws(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ss.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Qs=_createClass((function e(t){_classCallCheck(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ys=function(){function e(t){_classCallCheck(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return _createClass(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&Ns("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){Ns("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):Ns("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(Fs("string"==typeof e.token),new Qs(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Js=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return _createClass(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function $s(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Js.I=-1;var Zs=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=$s(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Xs(e,t){return e<t?-1:e>t?1:0}function eu(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function tu(e){return e+"\0"}var nu=function(){function e(t,n){if(_classCallCheck(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Vs(js.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Vs(js.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Vs(js.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vs(js.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return _createClass(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Xs(this.nanoseconds,e.nanoseconds):Xs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ru=function(){function e(t){_classCallCheck(this,e),this.timestamp=t}return _createClass(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new nu(0,0))}}]),e}();function iu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function au(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ou(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var su=function(){function e(t,n,r){_classCallCheck(this,e),void 0===n?n=0:n>t.length&&Ms(),void 0===r?r=t.length-n:r>t.length-n&&Ms(),this.segments=t,this.offset=n,this.len=r}return _createClass(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),uu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Vs(js.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,_toConsumableArray(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(su),cu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,lu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return cu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Vs(js.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Vs(js.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Vs(js.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Vs(js.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(su),fu=function(){function e(t){_classCallCheck(this,e),this.fields=t,t.sort(lu.comparator)}return _createClass(e,[{key:"covers",value:function(e){var t,n=_createForOfIteratorHelper(this.fields);try{for(n.s();!(t=n.n()).done;)if(t.value.isPrefixOf(e))return!0}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return eu(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}(),hu=function(e){function t(e){_classCallCheck(this,t),this.binaryString=e}return _createClass(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Xs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);hu.EMPTY_BYTE_STRING=new hu("");var du=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pu(e){if(Fs(!!e),"string"==typeof e){var t=0,n=du.exec(e);if(Fs(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:vu(e.seconds),nanos:vu(e.nanos)}}function vu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function mu(e){return"string"==typeof e?hu.fromBase64String(e):hu.fromUint8Array(e)}function yu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gu(e){var t=e.mapValue.fields.__previous_value__;return yu(t)?gu(t):t}function ku(e){var t=pu(e.mapValue.fields.__local_write_time__.timestampValue);return new nu(t.seconds,t.nanos)}function _u(e){return null==e}function bu(e){return 0===e&&1/e==-1/0}function wu(e){return"number"==typeof e&&Number.isInteger(e)&&!bu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Tu=function(){function e(t){_classCallCheck(this,e),this.path=t}return _createClass(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===uu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(uu.fromString(t))}},{key:"fromName",value:function(t){return new e(uu.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return uu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new uu(t.slice()))}}]),e}();function Cu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yu(e)?4:10:Ms()}function xu(e,t){if(e===t)return!0;var n=Cu(e);if(n!==Cu(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ku(e).isEqual(ku(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=pu(e.timestampValue),r=pu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return mu(e.bytesValue).isEqual(mu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vu(e.geoPointValue.latitude)===vu(t.geoPointValue.latitude)&&vu(e.geoPointValue.longitude)===vu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vu(e.integerValue)===vu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=vu(e.doubleValue),r=vu(t.doubleValue);return n===r?bu(n)===bu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return eu(e.arrayValue.values||[],t.arrayValue.values||[],xu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(iu(n)!==iu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xu(n[i],r[i])))return!1;return!0}(e,t);default:return Ms()}}function Eu(e,t){return void 0!==(e.values||[]).find((function(e){return xu(e,t)}))}function Iu(e,t){if(e===t)return 0;var n=Cu(e),r=Cu(t);if(n!==r)return Xs(n,r);switch(n){case 0:return 0;case 1:return Xs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=vu(e.integerValue||e.doubleValue),r=vu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Su(e.timestampValue,t.timestampValue);case 4:return Su(ku(e),ku(t));case 5:return Xs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=mu(e),r=mu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Xs(n[i],r[i]);if(0!==a)return a}return Xs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Xs(vu(e.latitude),vu(t.latitude));return 0!==n?n:Xs(vu(e.longitude),vu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Iu(n[i],r[i]);if(a)return a}return Xs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Xs(r[o],a[o]);if(0!==s)return s;var u=Iu(n[r[o]],i[a[o]]);if(0!==u)return u}return Xs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ms()}}function Su(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Xs(e,t);var n=pu(e),r=pu(t),i=Xs(n.seconds,r.seconds);return 0!==i?i:Xs(n.nanos,r.nanos)}function Ru(e){return Au(e)}function Au(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=pu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?mu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Tu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=_createForOfIteratorHelper(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Au(a)}}catch(e){i.e(e)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=_createForOfIteratorHelper(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Au(e.fields[a]))}}catch(e){i.e(e)}finally{i.f()}return n+"}"}(e.mapValue):Ms();var t,n}function Ou(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Nu(e){return!!e&&"integerValue"in e}function Pu(e){return!!e&&"arrayValue"in e}function Du(e){return!!e&&"nullValue"in e}function Lu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mu(e){return!!e&&"mapValue"in e}function Fu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==_typeof(e.timestampValue))return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return au(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Fu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Fu(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Uu=function(){function e(t){_classCallCheck(this,e),this.value=t}return _createClass(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Mu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fu(t)}},{key:"setAll",value:function(e){var t=this,n=lu.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Fu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Mu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return xu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Mu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){au(t,(function(t,n){return e[t]=n}));var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(e){i.e(e)}finally{i.f()}}},{key:"clone",value:function(){return new e(Fu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ju(e){var t=[];return au(e.fields,(function(e,n){var r=new lu([e]);if(Mu(n)){var i=ju(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=_createForOfIteratorHelper(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(e){o.e(e)}finally{o.f()}}}else t.push(r)})),new fu(t)}var Vu=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return _createClass(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Uu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Uu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ru.min(),Uu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Uu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Uu.empty(),2)}}]),e}(),Gu=_createClass((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;_classCallCheck(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.R=null}));function qu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Gu(e,t,n,r,i,a,o)}function Bu(e){var t=Us(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Ru(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),_u(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=nc(t.startAt)),t.endAt&&(n+="|ub:",n+=nc(t.endAt)),t.R=n}return t.R}function zu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ic(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!xu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!oc(e.startAt,t.startAt)&&oc(e.endAt,t.endAt)}function Hu(e){return Tu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Wu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return _createClass(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Iu(t,this.value)):null!==t&&Cu(this.value)===Cu(t)&&this.v(Iu(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ms()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new Ku(e,t,r):"array-contains"===t?new $u(e,r):"in"===t?new Zu(e,r):"not-in"===t?new Xu(e,r):"array-contains-any"===t?new ec(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new Qu(e,n):new Yu(e,n)}}]),n}(function(){return _createClass((function e(){_classCallCheck(this,e)}))}()),Ku=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i)).key=Tu.fromName(i.referenceValue),a}return _createClass(n,[{key:"matches",value:function(e){var t=Tu.comparator(e.key,this.key);return this.v(t)}}]),n}(Wu),Qu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,"in",r)).keys=Ju(0,r),i}return _createClass(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Wu),Yu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,"not-in",r)).keys=Ju(0,r),i}return _createClass(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Wu);function Ju(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Tu.fromName(e.referenceValue)}))}var $u=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e,"array-contains",r)}return _createClass(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Pu(t)&&Eu(t.arrayValue,this.value)}}]),n}(Wu),Zu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e,"in",r)}return _createClass(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Eu(this.value.arrayValue,t)}}]),n}(Wu),Xu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e,"not-in",r)}return _createClass(n,[{key:"matches",value:function(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Eu(this.value.arrayValue,t)}}]),n}(Wu),ec=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e,"array-contains-any",r)}return _createClass(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Pu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Eu(t.value.arrayValue,e)}))}}]),n}(Wu),tc=_createClass((function e(t,n){_classCallCheck(this,e),this.position=t,this.before=n}));function nc(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return Ru(e)})).join(","))}var rc=_createClass((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";_classCallCheck(this,e),this.field=t,this.dir=n}));function ic(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function ac(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Tu.comparator(Tu.fromName(o.referenceValue),n.key):Iu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function oc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!xu(e.position[n],t.position[n]))return!1;return!0}var sc=_createClass((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;_classCallCheck(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.S=null,this.D=null,this.startAt,this.endAt}));function uc(e,t,n,r,i,a,o,s){return new sc(e,t,n,r,i,a,o,s)}function cc(e){return new sc(e)}function lc(e){return!_u(e.limit)&&"F"===e.limitType}function fc(e){return!_u(e.limit)&&"L"===e.limitType}function hc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function dc(e){var t,n=_createForOfIteratorHelper(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(e){n.e(e)}finally{n.f()}return null}function pc(e){return null!==e.collectionGroup}function vc(e){var t=Us(e);if(null===t.S){t.S=[];var n=dc(t),r=hc(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new rc(n)),t.S.push(new rc(lu.keyField(),"asc"));else{var i,a=!1,o=_createForOfIteratorHelper(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.S.push(s),s.field.isKeyField()&&(a=!0)}}catch(e){o.e(e)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new rc(lu.keyField(),u))}}}return t.S}function mc(e){var t=Us(e);if(!t.D)if("F"===t.limitType)t.D=qu(t.path,t.collectionGroup,vc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=_createForOfIteratorHelper(vc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new rc(a.field,o))}}catch(e){i.e(e)}finally{i.f()}var s=t.endAt?new tc(t.endAt.position,!t.endAt.before):null,u=t.startAt?new tc(t.startAt.position,!t.startAt.before):null;t.D=qu(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.D}function yc(e,t,n){return new sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gc(e,t){return zu(mc(e),mc(t))&&e.limitType===t.limitType}function kc(e){return"".concat(Bu(mc(e)),"|lt:").concat(e.limitType)}function _c(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Ru(t.value));var t})).join(", "),"]")),_u(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+nc(e.startAt)),e.endAt&&(t+=", endAt: "+nc(e.endAt)),"Target(".concat(t,")")}(mc(e)),"; limitType=").concat(e.limitType,")")}function bc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Tu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=_createForOfIteratorHelper(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=_createForOfIteratorHelper(e.filters);try{for(r.s();!(n=r.n()).done;)if(!n.value.matches(t))return!1}catch(e){r.e(e)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!ac(e.startAt,vc(e),t)||e.endAt&&ac(e.endAt,vc(e),t))}(e,t)}function wc(e){return function(t,n){var r,i=!1,a=_createForOfIteratorHelper(vc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Tc(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(e){a.e(e)}finally{a.f()}return 0}}function Tc(e,t,n){var r=e.field.isKeyField()?Tu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Iu(r,i):Ms()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ms()}}function Cc(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(t)?"-0":t}}function xc(e){return{integerValue:""+e}}function Ec(e,t){return wu(t)?xc(t):Cc(e,t)}var Ic=_createClass((function e(){_classCallCheck(this,e),this._=void 0}));function Sc(e,t,n){return e instanceof Oc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Nc?Pc(e,t):e instanceof Dc?Lc(e,t):function(e,t){var n=Ac(e,t),r=Fc(n)+Fc(e.N);return Nu(n)&&Nu(e.N)?xc(r):Cc(e.k,r)}(e,t)}function Rc(e,t,n){return e instanceof Nc?Pc(e,t):e instanceof Dc?Lc(e,t):n}function Ac(e,t){return e instanceof Mc?Nu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Oc=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(Ic),Nc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).elements=e,r}return _createClass(n)}(Ic);function Pc(e,t){var n,r=Uc(t),i=_createForOfIteratorHelper(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return xu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return{arrayValue:{values:r}}}var Dc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).elements=e,r}return _createClass(n)}(Ic);function Lc(e,t){var n,r=Uc(t),i=_createForOfIteratorHelper(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!xu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return{arrayValue:{values:r}}}var Mc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).k=e,i.N=r,i}return _createClass(n)}(Ic);function Fc(e){return vu(e.integerValue||e.doubleValue)}function Uc(e){return Pu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var jc=_createClass((function e(t,n){_classCallCheck(this,e),this.field=t,this.transform=n})),Vc=_createClass((function e(t,n){_classCallCheck(this,e),this.version=t,this.transformResults=n})),Gc=function(){function e(t,n){_classCallCheck(this,e),this.updateTime=t,this.exists=n}return _createClass(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function qc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Bc=_createClass((function e(){_classCallCheck(this,e)}));function zc(e,t,n){e instanceof Yc?function(e,t,n){var r=e.value.clone(),i=Zc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Jc?function(e,t,n){if(qc(e.precondition,t)){var r=Zc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll($c(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Hc(e,t,n){e instanceof Yc?function(e,t,n){if(qc(e.precondition,t)){var r=e.value.clone(),i=Xc(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Qc(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Jc?function(e,t,n){if(qc(e.precondition,t)){var r=Xc(e.fieldTransforms,n,t),i=t.data;i.setAll($c(e)),i.setAll(r),t.convertToFoundDocument(Qc(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){qc(e.precondition,t)&&t.convertToNoDocument(ru.min())}(e,t)}function Wc(e,t){var n,r=null,i=_createForOfIteratorHelper(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Ac(a.transform,o||null);null!=s&&(null==r&&(r=Uu.empty()),r.set(a.field,s))}}catch(e){i.e(e)}finally{i.f()}return r||null}function Kc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&eu(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Nc&&t instanceof Nc||e instanceof Dc&&t instanceof Dc?eu(e.elements,t.elements,xu):e instanceof Mc&&t instanceof Mc?xu(e.N,t.N):e instanceof Oc&&t instanceof Oc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Qc(e){return e.isFoundDocument()?e.version:ru.min()}var Yc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return _classCallCheck(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return _createClass(n)}(Bc),Jc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return _classCallCheck(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return _createClass(n)}(Bc);function $c(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Zc(e,t,n){var r=new Map;Fs(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Rc(o,s,n[i]))}return r}function Xc(e,t,n){var r,i=new Map,a=_createForOfIteratorHelper(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Sc(s,u,t))}}catch(e){a.e(e)}finally{a.f()}return i}var el,tl,nl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return _createClass(n)}(Bc),rl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return _createClass(n)}(Bc),il=_createClass((function e(t){_classCallCheck(this,e),this.count=t}));function al(e){switch(e){default:return Ms();case js.CANCELLED:case js.UNKNOWN:case js.DEADLINE_EXCEEDED:case js.RESOURCE_EXHAUSTED:case js.INTERNAL:case js.UNAVAILABLE:case js.UNAUTHENTICATED:return!1;case js.INVALID_ARGUMENT:case js.NOT_FOUND:case js.ALREADY_EXISTS:case js.PERMISSION_DENIED:case js.FAILED_PRECONDITION:case js.ABORTED:case js.OUT_OF_RANGE:case js.UNIMPLEMENTED:case js.DATA_LOSS:return!0}}function ol(e){if(void 0===e)return Ps("GRPC error has no .code"),js.UNKNOWN;switch(e){case el.OK:return js.OK;case el.CANCELLED:return js.CANCELLED;case el.UNKNOWN:return js.UNKNOWN;case el.DEADLINE_EXCEEDED:return js.DEADLINE_EXCEEDED;case el.RESOURCE_EXHAUSTED:return js.RESOURCE_EXHAUSTED;case el.INTERNAL:return js.INTERNAL;case el.UNAVAILABLE:return js.UNAVAILABLE;case el.UNAUTHENTICATED:return js.UNAUTHENTICATED;case el.INVALID_ARGUMENT:return js.INVALID_ARGUMENT;case el.NOT_FOUND:return js.NOT_FOUND;case el.ALREADY_EXISTS:return js.ALREADY_EXISTS;case el.PERMISSION_DENIED:return js.PERMISSION_DENIED;case el.FAILED_PRECONDITION:return js.FAILED_PRECONDITION;case el.ABORTED:return js.ABORTED;case el.OUT_OF_RANGE:return js.OUT_OF_RANGE;case el.UNIMPLEMENTED:return js.UNIMPLEMENTED;case el.DATA_LOSS:return js.DATA_LOSS;default:return Ms()}}(tl=el||(el={}))[tl.OK=0]="OK",tl[tl.CANCELLED=1]="CANCELLED",tl[tl.UNKNOWN=2]="UNKNOWN",tl[tl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tl[tl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tl[tl.NOT_FOUND=5]="NOT_FOUND",tl[tl.ALREADY_EXISTS=6]="ALREADY_EXISTS",tl[tl.PERMISSION_DENIED=7]="PERMISSION_DENIED",tl[tl.UNAUTHENTICATED=16]="UNAUTHENTICATED",tl[tl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tl[tl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tl[tl.ABORTED=10]="ABORTED",tl[tl.OUT_OF_RANGE=11]="OUT_OF_RANGE",tl[tl.UNIMPLEMENTED=12]="UNIMPLEMENTED",tl[tl.INTERNAL=13]="INTERNAL",tl[tl.UNAVAILABLE=14]="UNAVAILABLE",tl[tl.DATA_LOSS=15]="DATA_LOSS";var sl=function(){function e(t,n){_classCallCheck(this,e),this.comparator=t,this.root=n||cl.EMPTY}return _createClass(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,cl.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cl.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ul(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ul(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ul(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ul(this.root,e,this.comparator,!0)}}]),e}(),ul=function(){function e(t,n,r,i){_classCallCheck(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return _createClass(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),cl=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return _createClass(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ms();if(this.right.isRed())throw Ms();var e=this.left.check();if(e!==this.right.check())throw Ms();return e+(this.isRed()?0:1)}}]),e}();cl.EMPTY=null,cl.RED=!0,cl.BLACK=!1,cl.EMPTY=new(function(){function e(){_classCallCheck(this,e),this.size=0}return _createClass(e,[{key:"key",get:function(){throw Ms()}},{key:"value",get:function(){throw Ms()}},{key:"color",get:function(){throw Ms()}},{key:"left",get:function(){throw Ms()}},{key:"right",get:function(){throw Ms()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new cl(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var ll=function(){function e(t){_classCallCheck(this,e),this.comparator=t,this.data=new sl(this.comparator)}return _createClass(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new fl(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new fl(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),fl=function(){function e(t){_classCallCheck(this,e),this.iter=t}return _createClass(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),hl=new sl(Tu.comparator);function dl(){return hl}var pl=new sl(Tu.comparator);function vl(){return pl}var ml=new sl(Tu.comparator);function yl(){return ml}var gl=new ll(Tu.comparator);function kl(){for(var e=gl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var _l=new ll(Xs);function bl(){return _l}var wl=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return _createClass(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Tl.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ru.min(),r,bl(),dl(),kl())}}]),e}(),Tl=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return _createClass(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(hu.EMPTY_BYTE_STRING,n,kl(),kl(),kl())}}]),e}(),Cl=_createClass((function e(t,n,r,i){_classCallCheck(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.O=i})),xl=_createClass((function e(t,n){_classCallCheck(this,e),this.targetId=t,this.M=n})),El=_createClass((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Il=function(){function e(){_classCallCheck(this,e),this.F=0,this.L=Al(),this.B=hu.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return _createClass(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.F}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=kl(),t=kl(),n=kl();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ms()}})),new Tl(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=Al()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.F+=1}},{key:"Z",value:function(){this.F-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),Sl=function(){function e(t){_classCallCheck(this,e),this.et=t,this.nt=new Map,this.st=dl(),this.it=Rl(),this.rt=new ll(Xs)}return _createClass(e,[{key:"ot",value:function(e){var t,n=_createForOfIteratorHelper(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.O&&e.O.isFoundDocument()?this.ct(r,e.O):this.at(r,e.key,e.O)}}catch(e){n.e(e)}finally{n.f()}var i,a=_createForOfIteratorHelper(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.O)}}catch(e){a.e(e)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:Ms()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.M.count,r=this.wt(t);if(r){var i=r.target;if(Hu(i))if(0===n){var a=new Tu(i.path);this.at(t,a,Vu.newNoDocument(a,ru.min()))}else Fs(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Hu(a.target)){var o=new Tu(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.at(i,o,Vu.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=kl();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new wl(e,n,this.rt,this.st,r);return this.st=dl(),this.it=Rl(),this.rt=new ll(Xs),i}},{key:"ct",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new Il,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new ll(Xs),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||Ns("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new Il),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function Rl(){return new sl(Tu.comparator)}function Al(){return new sl(Tu.comparator)}var Ol={asc:"ASCENDING",desc:"DESCENDING"},Nl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pl=_createClass((function e(t,n){_classCallCheck(this,e),this.databaseId=t,this.C=n}));function Dl(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ll(e,t){return e.C?t.toBase64():t.toUint8Array()}function Ml(e,t){return Dl(e,t.toTimestamp())}function Fl(e){return Fs(!!e),ru.fromTimestamp(function(e){var t=pu(e);return new nu(t.seconds,t.nanos)}(e))}function Ul(e,t){return function(e){return new uu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jl(e){var t=uu.fromString(e);return Fs(lf(t)),t}function Vl(e,t){return Ul(e.databaseId,t.path)}function Gl(e,t){var n=jl(t);if(n.get(1)!==e.databaseId.projectId)throw new Vs(js.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vs(js.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Tu(Hl(n))}function ql(e,t){return Ul(e.databaseId,t)}function Bl(e){var t=jl(e);return 4===t.length?uu.emptyPath():Hl(t)}function zl(e){return new uu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hl(e){return Fs(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wl(e,t,n){return{name:Vl(e,t),fields:n.value.mapValue.fields}}function Kl(e,t,n){var r=Gl(e,t.name),i=Fl(t.updateTime),a=new Uu({mapValue:{fields:t.fields}}),o=Vu.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ql(e,t){var n;if(t instanceof Yc)n={update:Wl(e,t.key,t.value)};else if(t instanceof nl)n={delete:Vl(e,t.key)};else if(t instanceof Jc)n={update:Wl(e,t.key,t.data),updateMask:cf(t.fieldMask)};else{if(!(t instanceof rl))return Ms();n={verify:Vl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Oc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Dc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Mc)return{fieldPath:t.field.canonicalString(),increment:n.N};throw Ms()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ml(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ms()}(e,t.precondition)),n}function Yl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Gc.updateTime(Fl(e.updateTime)):void 0!==e.exists?Gc.exists(e.exists):Gc.none()}(t.currentDocument):Gc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Fs("REQUEST_TIME"===t.setToServerValue),n=new Oc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Nc(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Dc(i)}else"increment"in t?n=new Mc(e,t.increment):Ms();var a=lu.fromServerFormat(t.fieldPath);return new jc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Gl(e,t.update.name),a=new Uu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new fu(t.map((function(e){return lu.fromServerFormat(e)})))}(t.updateMask);return new Jc(i,a,o,n,r)}return new Yc(i,a,n,r)}if(t.delete){var s=Gl(e,t.delete);return new nl(s,n)}if(t.verify){var u=Gl(e,t.verify);return new rl(u,n)}return Ms()}function Jl(e,t){return{documents:[ql(e,t.path)]}}function $l(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ql(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ql(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Lu(e.value))return{unaryFilter:{field:af(e.field),op:"IS_NAN"}};if(Du(e.value))return{unaryFilter:{field:af(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Lu(e.value))return{unaryFilter:{field:af(e.field),op:"IS_NOT_NAN"}};if(Du(e.value))return{unaryFilter:{field:af(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:af(e.field),op:rf(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:af(e.field),direction:nf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||_u(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=ef(t.startAt)),t.endAt&&(n.structuredQuery.endAt=ef(t.endAt)),n}function Zl(e){var t=Bl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fs(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Xl(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new rc(of(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return _u(t="object"==_typeof(e)?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=tf(n.startAt));var l=null;return n.endAt&&(l=tf(n.endAt)),uc(t,i,s,o,u,"F",c,l)}function Xl(e){return e?void 0!==e.unaryFilter?[uf(e)]:void 0!==e.fieldFilter?[sf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Xl(e)})).reduce((function(e,t){return e.concat(t)})):Ms():[]}function ef(e){return{before:e.before,values:e.position}}function tf(e){var t=!!e.before,n=e.values||[];return new tc(n,t)}function nf(e){return Ol[e]}function rf(e){return Nl[e]}function af(e){return{fieldPath:e.canonicalString()}}function of(e){return lu.fromServerFormat(e.fieldPath)}function sf(e){return Wu.create(of(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ms()}}(e.fieldFilter.op),e.fieldFilter.value)}function uf(e){switch(e.unaryFilter.op){case"IS_NAN":var t=of(e.unaryFilter.field);return Wu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=of(e.unaryFilter.field);return Wu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=of(e.unaryFilter.field);return Wu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=of(e.unaryFilter.field);return Wu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ms()}}function cf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function lf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ff(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=df(t)),t=hf(e.get(n),t);return df(t)}function hf(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="";break;case"":n+="";break;default:n+=a}}return n}function df(e){return e+""}function pf(e){var t=e.length;if(Fs(t>=2),2===t)return Fs(""===e.charAt(0)&&""===e.charAt(1)),uu.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("",a);switch((o<0||o>n)&&Ms(),e.charAt(o+1)){case"":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(a,o),i+="\0";break;case"":i+=e.substring(a,o+1);break;default:Ms()}a=o+2}return new uu(r)}var vf=_createClass((function e(t,n){_classCallCheck(this,e),this.seconds=t,this.nanoseconds=n})),mf=_createClass((function e(t,n,r){_classCallCheck(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));mf.store="owner",mf.key="owner";var yf=_createClass((function e(t,n,r){_classCallCheck(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));yf.store="mutationQueues",yf.keyPath="userId";var gf=_createClass((function e(t,n,r,i,a){_classCallCheck(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));gf.store="mutations",gf.keyPath="batchId",gf.userMutationsIndex="userMutationsIndex",gf.userMutationsKeyPath=["userId","batchId"];var kf=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,ff(t)]}},{key:"key",value:function(e,t,n){return[e,ff(t),n]}}]),e}();kf.store="documentMutations",kf.PLACEHOLDER=new kf;var _f=_createClass((function e(t,n){_classCallCheck(this,e),this.path=t,this.readTime=n})),bf=_createClass((function e(t,n){_classCallCheck(this,e),this.path=t,this.version=n})),wf=_createClass((function e(t,n,r,i,a,o){_classCallCheck(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));wf.store="remoteDocuments",wf.readTimeIndex="readTimeIndex",wf.readTimeIndexPath="readTime",wf.collectionReadTimeIndex="collectionReadTimeIndex",wf.collectionReadTimeIndexPath=["parentPath","readTime"];var Tf=_createClass((function e(t){_classCallCheck(this,e),this.byteSize=t}));Tf.store="remoteDocumentGlobal",Tf.key="remoteDocumentGlobalKey";var Cf=_createClass((function e(t,n,r,i,a,o,s){_classCallCheck(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s}));Cf.store="targets",Cf.keyPath="targetId",Cf.queryTargetsIndexName="queryTargetsIndex",Cf.queryTargetsKeyPath=["canonicalId","targetId"];var xf=_createClass((function e(t,n,r){_classCallCheck(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));xf.store="targetDocuments",xf.keyPath=["targetId","path"],xf.documentTargetsIndex="documentTargetsIndex",xf.documentTargetsKeyPath=["path","targetId"];var Ef=_createClass((function e(t,n,r,i){_classCallCheck(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Ef.key="targetGlobalKey",Ef.store="targetGlobal";var If=_createClass((function e(t,n){_classCallCheck(this,e),this.collectionId=t,this.parent=n}));If.store="collectionParents",If.keyPath=["collectionId","parent"];var Sf=_createClass((function e(t,n,r,i){_classCallCheck(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));Sf.store="clientMetadata",Sf.keyPath="clientId";var Rf=_createClass((function e(t,n,r){_classCallCheck(this,e),this.bundleId=t,this.createTime=n,this.version=r}));Rf.store="bundles",Rf.keyPath="bundleId";var Af=_createClass((function e(t,n,r){_classCallCheck(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));Af.store="namedQueries",Af.keyPath="name";var Of=[yf.store,gf.store,kf.store,wf.store,Cf.store,mf.store,Ef.store,xf.store,Sf.store,Tf.store,If.store,Rf.store,Af.store],Nf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pf=function(){function e(){_classCallCheck(this,e),this.onCommittedListeners=[]}return _createClass(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Df=function(){function e(t){var n=this;_classCallCheck(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return _createClass(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ms(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=_createForOfIteratorHelper(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Lf=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new Gs,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new Uf(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=Bf(e.target.error);r.It.reject(new Uf(t,n))}}return _createClass(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(Ns("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Vf(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Uf(n,t)}}}]),e}(),Mf=function(){function e(t,n,r){_classCallCheck(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.bt(ln())&&Ps("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var t,n;return _createClass(e,[{key:"Ct",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Ns("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Uf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Vs(js.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Vs(js.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Uf(t,n))},i.onupgradeneeded=function(e){Ns("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){Ns("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(_regeneratorRuntime.mark((function e(){var n,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=Lf.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),Df.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.At;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if(s=e.t0,"object"!==_typeof(s)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,Ns("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Ns("SimpleDb","Removing database:",e),Gf(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Pt",value:function(){if(!mn())return!1;if(e.vt())return!0;var t=ln(),n=e.bt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"bt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ff=function(){function e(t){_classCallCheck(this,e),this.$t=t,this.Ot=!1,this.Mt=null}return _createClass(e,[{key:"isDone",get:function(){return this.Ot}},{key:"Ft",get:function(){return this.Mt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ot=!0}},{key:"Lt",value:function(e){this.Mt=e}},{key:"delete",value:function(){return Gf(this.$t.delete())}}]),e}(),Uf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,js.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return _createClass(n)}(Vs);function jf(e){return"IndexedDbTransactionError"===e.name}var Vf=function(){function e(t){_classCallCheck(this,e),this.store=t}return _createClass(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Ns("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ns("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Gf(n)}},{key:"add",value:function(e){return Ns("SimpleDb","ADD",this.store.name,e,e),Gf(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Gf(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ns("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Ns("SimpleDb","DELETE",this.store.name,e),Gf(this.store.delete(e))}},{key:"count",value:function(){return Ns("SimpleDb","COUNT",this.store.name),Gf(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){Ns("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new Df((function(n,r){t.onerror=function(e){var t=Bf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new Df((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ff(i),o=t(i.primaryKey,i.value,a);if(o instanceof Df){var s=o.catch((function(e){return a.done(),Df.reject(e)}));n.push(s)}a.isDone?r():null===a.Ft?i.continue():i.continue(a.Ft)}else r()}})).next((function(){return Df.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Gf(e){return new Df((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Bf(e.target.error);n(t)}}))}var qf=!1;function Bf(e){var t=Mf.bt(ln());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Vs("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return qf||(qf=!0,setTimeout((function(){throw r}),0)),r}}return e}var zf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return _createClass(n)}(Pf);function Hf(e,t){var n=Us(e);return Mf.Dt(n.Wt,t)}var Wf=function(){function e(t,n,r,i){_classCallCheck(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return _createClass(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&zc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=_createForOfIteratorHelper(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Hc(r,e,this.localWriteTime)}}catch(e){n.e(e)}finally{n.f()}var i,a=_createForOfIteratorHelper(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Hc(o,e,this.localWriteTime)}}catch(e){a.e(e)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ru.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),kl())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,(function(e,t){return Kc(e,t)}))&&eu(this.baseMutations,e.baseMutations,(function(e,t){return Kc(e,t)}))}}]),e}(),Kf=function(){function e(t,n,r,i){_classCallCheck(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return _createClass(e,null,[{key:"from",value:function(t,n,r){Fs(t.mutations.length===r.length);for(var i=yl(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Qf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ru.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ru.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hu.EMPTY_BYTE_STRING;_classCallCheck(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return _createClass(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Yf=_createClass((function e(t){_classCallCheck(this,e),this.Gt=t}));function Jf(e,t){if(t.document)return Kl(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Tu.fromSegments(t.noDocument.path),r=th(t.noDocument.readTime),i=Vu.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Tu.fromSegments(t.unknownDocument.path),o=th(t.unknownDocument.version);return Vu.newUnknownDocument(a,o)}return Ms()}function $f(e,t,n){var r=Zf(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:Vl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Dl(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new wf(null,null,a,o,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=eh(t.version),c=t.hasCommittedMutations;return new wf(null,new _f(s,u),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=eh(t.version);return new wf(new bf(l,f),null,null,!0,r,i)}return Ms()}function Zf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Xf(e){var t=new nu(e[0],e[1]);return ru.fromTimestamp(t)}function eh(e){var t=e.toTimestamp();return new vf(t.seconds,t.nanoseconds)}function th(e){var t=new nu(e.seconds,e.nanoseconds);return ru.fromTimestamp(t)}function nh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Yl(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Yl(e.Gt,t)})),s=nu.fromMillis(t.localWriteTimeMs);return new Wf(t.batchId,s,n,o)}function rh(e){var t,n,r=th(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?th(e.lastLimboFreeSnapshotVersion):ru.min();return void 0!==e.query.documents?(Fs(1===(n=e.query).documents.length),t=mc(cc(Bl(n.documents[0])))):t=function(e){return mc(Zl(e))}(e.query),new Qf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,hu.fromBase64String(e.resumeToken))}function ih(e,t){var n,r=eh(t.snapshotVersion),i=eh(t.lastLimboFreeSnapshotVersion);n=Hu(t.target)?Jl(e.Gt,t.target):$l(e.Gt,t.target);var a=t.resumeToken.toBase64();return new Cf(t.targetId,Bu(t.target),r,a,t.sequenceNumber,i,n)}function ah(e){var t=Zl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?yc(t,t.limit,"L"):t}var oh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBundleMetadata",value:function(e,t){return sh(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:th(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return sh(e).put({bundleId:(n=t).id,createTime:eh(Fl(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return uh(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ah(t.bundledQuery),readTime:th(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return uh(e).put(function(e){return{name:e.name,readTime:eh(Fl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function sh(e){return Hf(e,Rf.store)}function uh(e){return Hf(e,Af.store)}var ch=function(){function e(){_classCallCheck(this,e),this.zt=new lh}return _createClass(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),Df.resolve()}},{key:"getCollectionParents",value:function(e,t){return Df.resolve(this.zt.getEntries(t))}}]),e}(),lh=function(){function e(){_classCallCheck(this,e),this.index={}}return _createClass(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ll(uu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new ll(uu.comparator)).toArray()}}]),e}(),fh=function(){function e(){_classCallCheck(this,e),this.Ht=new lh}return _createClass(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:ff(i)};return hh(e).put(a)}return Df.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[tu(t),""],!1,!0);return hh(e).Bt(r).next((function(e){var r,i=_createForOfIteratorHelper(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(pf(a.parent))}}catch(e){i.e(e)}finally{i.f()}return n}))}}]),e}();function hh(e){return Hf(e,If.store)}var dh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ph=function(){function e(t,n,r){_classCallCheck(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return _createClass(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function vh(e,t,n){var r=e.store(gf.store),i=e.store(kf.store),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.jt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Fs(1===s)})));var c,l=[],f=_createForOfIteratorHelper(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=kf.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(e){f.e(e)}finally{f.f()}return Df.waitFor(a).next((function(){return l}))}function mh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ms();t=e.noDocument}return JSON.stringify(t).length}ph.DEFAULT_COLLECTION_PERCENTILE=10,ph.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ph.DEFAULT=new ph(41943040,ph.DEFAULT_COLLECTION_PERCENTILE,ph.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ph.DISABLED=new ph(-1,0,0);var yh=function(){function e(t,n,r,i){_classCallCheck(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return _createClass(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kh(e).jt({index:gf.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=_h(e),o=kh(e);return o.add({}).next((function(s){Fs("number"==typeof s);var u,c=new Wf(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ql(e.Gt,t)})),i=n.mutations.map((function(t){return Ql(e.Gt,t)}));return new gf(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new ll((function(e,t){return Xs(e.canonicalString(),t.canonicalString())})),d=_createForOfIteratorHelper(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=kf.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,kf.PLACEHOLDER))}}catch(e){d.e(e)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[s]=c.keys()})),Df.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return kh(e).get(t).next((function(e){return e?(Fs(e.userId===n.userId),nh(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?Df.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return kh(e).jt({index:gf.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Fs(t.batchId>=r),a=nh(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return kh(e).jt({index:gf.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kh(e).Bt(gf.userMutationsIndex,n).next((function(e){return e.map((function(e){return nh(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=kf.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return _h(e).jt({range:i},(function(r,i,o){var s=_slicedToArray(r,3),u=s[0],c=s[1],l=s[2],f=pf(c);if(u===n.userId&&t.path.isEqual(f))return kh(e).get(l).next((function(e){if(!e)throw Ms();Fs(e.userId===n.userId),a.push(nh(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ll(Xs),i=[];return t.forEach((function(t){var a=kf.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=_h(e).jt({range:o},(function(e,i,a){var o=_slicedToArray(e,3),s=o[0],u=o[1],c=o[2],l=pf(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),Df.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=kf.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new ll(Xs);return _h(e).jt({range:o},(function(e,t,a){var o=_slicedToArray(e,3),u=o[0],c=o[1],l=o[2],f=pf(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.te(e,s)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(kh(e).get(t).next((function(e){if(null===e)throw Ms();Fs(e.userId===n.userId),r.push(nh(n.k,e))})))})),Df.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return vh(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),Df.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Df.resolve();var r=IDBKeyRange.lowerBound(kf.prefixForUser(t.userId)),i=[];return _h(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=pf(e[1]);i.push(a)}else r.done()})).next((function(){Fs(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return gh(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return bh(e).get(this.userId).next((function(e){return e||new yf(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return Fs(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function gh(e,t,n){var r=kf.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return _h(e).jt({range:a,Kt:!0},(function(e,n,r){var a=_slicedToArray(e,3),s=a[0],u=a[1];a[2],s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function kh(e){return Hf(e,gf.store)}function _h(e){return Hf(e,kf.store)}function bh(e){return Hf(e,yf.store)}var wh=function(){function e(t){_classCallCheck(this,e),this.se=t}return _createClass(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),Th=function(){function e(t,n){_classCallCheck(this,e),this.referenceDelegate=t,this.k=n}return _createClass(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new wh(n.highestTargetId);return n.highestTargetId=r.next(),t.ce(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return ru.fromTimestamp(new nu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ce(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ce(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ch(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return Fs(t.targetCount>0),t.targetCount-=1,n.ce(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ch(e).jt((function(o,s){var u=rh(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Df.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ch(e).jt((function(e,n){var r=rh(n);t(r)}))}},{key:"oe",value:function(e){return xh(e).get(Ef.key).next((function(e){return Fs(null!==e),e}))}},{key:"ce",value:function(e,t){return xh(e).put(Ef.key,t)}},{key:"ae",value:function(e,t){return Ch(e).put(ih(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Bu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ch(e).jt({range:r,index:Cf.queryTargetsIndexName},(function(e,n,r){var a=rh(n);zu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Eh(e);return t.forEach((function(t){var o=ff(t.path);i.push(a.put(new xf(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Df.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Eh(e);return Df.forEach(t,(function(t){var a=ff(t.path);return Df.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Eh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Eh(e),i=kl();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=pf(e[1]),a=new Tu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ff(t.path),r=IDBKeyRange.bound([n],[tu(n)],!1,!0),i=0;return Eh(e).jt({index:xf.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=_slicedToArray(e,2),a=r[0];r[1],0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Ch(e).get(t).next((function(e){return e?rh(e):null}))}}]),e}();function Ch(e){return Hf(e,Cf.store)}function xh(e){return Hf(e,Ef.store)}function Eh(e){return Hf(e,xf.store)}function Ih(e){return Sh.apply(this,arguments)}function Sh(){return Sh=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===js.FAILED_PRECONDITION&&t.message===Nf){e.next=2;break}throw t;case 2:Ns("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function Rh(e,t){var n=_slicedToArray(e,2),r=n[0],i=n[1],a=_slicedToArray(t,2),o=a[0],s=a[1],u=Xs(r,o);return 0===u?Xs(i,s):u}var Ah=function(){function e(t){_classCallCheck(this,e),this.he=t,this.buffer=new ll(Rh),this.le=0}return _createClass(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Rh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Oh=function(){function e(t,n){_classCallCheck(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return _createClass(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;Ns("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,_asyncToGenerator(_regeneratorRuntime.mark((function n(){return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!jf(n.t0)){n.next=12;break}Ns("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Ih(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Nh=function(){function e(t,n){_classCallCheck(this,e),this.ge=t,this.params=n}return _createClass(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Df.resolve(Js.I);var r=new Ah(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ns("LruGarbageCollector","Garbage collection skipped; disabled"),Df.resolve(dh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ns("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),dh):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ns("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Os()<=An.DEBUG&&Ns("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Df.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Ph=function(){function e(t,n){_classCallCheck(this,e),this.db=t,this.garbageCollector=function(e,t){return new Nh(e,t)}(this,n)}return _createClass(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Dh(e,n)}},{key:"removeReference",value:function(e,t,n){return Dh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Dh(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return bh(e).Qt((function(r){return gh(e,r,t).next((function(e){return e&&(n=!0),Df.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,s){if(s<=t){var u=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Eh(e).delete([0,ff(o.path)])}))}));i.push(u)}})).next((function(){return Df.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Dh(e,t)}},{key:"Ie",value:function(e,t){var n,r=Eh(e),i=Js.I;return r.jt({index:xf.documentTargetsIndex},(function(e,r){var a=_slicedToArray(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Js.I&&t(new Tu(pf(n)),i),i=u,n=s):i=Js.I})).next((function(){i!==Js.I&&t(new Tu(pf(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Dh(e,t){return Eh(e).put(function(e,t){return new xf(0,ff(e.path),t)}(t,e.currentSequenceNumber))}var Lh=function(){function e(t,n){_classCallCheck(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return _createClass(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var a=_slicedToArray(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(e){i.e(e)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){au(this.inner,(function(t,n){var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var a=_slicedToArray(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(e){i.e(e)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ou(this.inner)}}]),e}(),Mh=function(){function e(){_classCallCheck(this,e),this.changes=new Lh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return _createClass(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:ru.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:Vu.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Df.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Fh=function(){function e(t,n){_classCallCheck(this,e),this.k=t,this.Jt=n}return _createClass(e,[{key:"addEntry",value:function(e,t,n){return Vh(e).put(Gh(t),n)}},{key:"removeEntry",value:function(e,t){var n=Vh(e),r=Gh(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Vh(e).get(Gh(t)).next((function(e){return n.be(t,e)}))}},{key:"Pe",value:function(e,t){var n=this;return Vh(e).get(Gh(t)).next((function(e){return{document:n.be(t,e),size:mh(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=dl();return this.ve(e,t,(function(e,t){var i=n.be(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=dl(),i=new sl(Tu.comparator);return this.ve(e,t,(function(e,t){var a=n.be(e,t);r=r.insert(e,a),i=i.insert(e,mh(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return Df.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Vh(e).jt({range:r},(function(e,t,r){for(var o=Tu.fromSegments(e);a&&Tu.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=dl(),a=t.path.length+1,o={};if(n.isEqual(ru.min())){var s=t.path.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=Zf(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=wf.collectionReadTimeIndex}return Vh(e).jt(o,(function(e,n,o){if(e.length===a){var s=Jf(r.k,n);t.path.isPrefixOf(s.key.path)?bc(t,s)&&(i=i.insert(s.key,s)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Uh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return jh(e).get(Tf.key).next((function(e){return Fs(!!e),e}))}},{key:"Re",value:function(e,t){return jh(e).put(Tf.key,t)}},{key:"be",value:function(e,t){if(t){var n=Jf(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(ru.min()))return n}return Vu.newInvalidDocument(e)}}]),e}(),Uh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new Lh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return _createClass(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new ll((function(e,t){return Xs(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Ce.get(a);if(o.document.isValidDocument()){var u=$f(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=mh(u);r+=c-s,n.push(t.De.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=$f(t.De.k,Vu.newNoDocument(a,ru.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),Df.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.Pe(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(Mh);function jh(e){return Hf(e,Tf.store)}function Vh(e){return Hf(e,wf.store)}function Gh(e){return e.path.toArray()}var qh=function(){function e(t){_classCallCheck(this,e),this.k=t}return _createClass(e,[{key:"Nt",value:function(e,t,n,r){var i=this;Fs(n<r&&n>=0&&r<=11);var a=new Lf("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(mf.store)}(e),function(e){e.createObjectStore(yf.store,{keyPath:yf.keyPath}),e.createObjectStore(gf.store,{keyPath:gf.keyPath,autoIncrement:!0}).createIndex(gf.userMutationsIndex,gf.userMutationsKeyPath,{unique:!0}),e.createObjectStore(kf.store)}(e),Bh(e),function(e){e.createObjectStore(wf.store)}(e));var o=Df.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(xf.store),e.deleteObjectStore(Cf.store),e.deleteObjectStore(Ef.store)}(e),Bh(e)),o=o.next((function(){return function(e){var t=e.store(Ef.store),n=new Ef(0,0,ru.min().toTimestamp(),0);return t.put(Ef.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(gf.store).Bt().next((function(n){e.deleteObjectStore(gf.store),e.createObjectStore(gf.store,{keyPath:gf.keyPath,autoIncrement:!0}).createIndex(gf.userMutationsIndex,gf.userMutationsKeyPath,{unique:!0});var r=t.store(gf.store),i=n.map((function(e){return r.put(e)}));return Df.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Sf.store,{keyPath:Sf.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Tf.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(wf.store);t.createIndex(wf.readTimeIndex,wf.readTimeIndexPath,{unique:!1}),t.createIndex(wf.collectionReadTimeIndex,wf.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Oe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Rf.store,{keyPath:Rf.keyPath})}(e),function(e){e.createObjectStore(Af.store,{keyPath:Af.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(wf.store).jt((function(e,n){t+=mh(n)})).next((function(){var n=new Tf(t);return e.store(Tf.store).put(Tf.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(yf.store),r=e.store(gf.store);return n.Bt().next((function(n){return Df.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(gf.userMutationsIndex,i).next((function(r){return Df.forEach(r,(function(r){Fs(r.userId===n.userId);var i=nh(t.k,r);return vh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(xf.store),n=e.store(wf.store);return e.store(Ef.store).get(Ef.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new uu(n),o=function(e){return[0,ff(e)]}(a);r.push(t.get(o).next((function(n){return n?Df.resolve():function(n){return t.put(new xf(0,ff(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Df.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(If.store,{keyPath:If.keyPath});var n=t.store(If.store),r=new lh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ff(i)})}};return t.store(wf.store).jt({Kt:!0},(function(e,t){var n=new uu(e);return i(n.popLast())})).next((function(){return t.store(kf.store).jt({Kt:!0},(function(e,t){var n=_slicedToArray(e,3),r=(n[0],n[1]),a=(n[2],pf(r));return i(a.popLast())}))}))}},{key:"Oe",value:function(e){var t=this,n=e.store(Cf.store);return n.jt((function(e,r){var i=rh(r),a=ih(t.k,i);return n.put(a)}))}}]),e}();function Bh(e){e.createObjectStore(xf.store,{keyPath:xf.keyPath}).createIndex(xf.documentTargetsIndex,xf.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Cf.store,{keyPath:Cf.keyPath}).createIndex(Cf.queryTargetsIndexName,Cf.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ef.store)}var zh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hh=function(){function e(t,n,r,i,a,o,s,u,c,l){if(_classCallCheck(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Me=a,this.window=o,this.document=s,this.Fe=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.Pt())throw new Vs(js.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ph(this,i),this.Ge=n+"main",this.k=new Yf(u),this.ze=new Mf(this.Ge,11,new qh(this.k)),this.He=new Th(this.referenceDelegate,this.k),this.Jt=new fh,this.Je=function(e,t){return new Fh(e,t)}(this.k,this.Jt),this.Ye=new oh,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&Ps("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}var t,n;return _createClass(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Vs(js.FAILED_PRECONDITION,zh);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new Js(t,e.Fe)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=_asyncToGenerator(_regeneratorRuntime.mark((function n(r){return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=_asyncToGenerator(_regeneratorRuntime.mark((function t(n){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Kh(t).put(new Sf(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Me.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.cn(t).next((function(){return!1})):!!n&&e.an(t).next((function(){return!0}))}))})).catch((function(t){if(jf(t))return Ns("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ns("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Me.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return Wh(e).get(mf.key).next((function(e){return Df.resolve(t.un(e))}))}},{key:"hn",value:function(e){return Kh(e).delete(this.clientId)}},{key:"ln",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n,r,i,a=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Hf(e,Sf.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Df.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=_createForOfIteratorHelper(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(e){n.e(e)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"nn",value:function(){var e=this;this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?Df.resolve(!0):Wh(e).get(mf.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new Vs(js.FAILED_PRECONDITION,zh);return!1}}return!(!t.networkEnabled||!t.inForeground)||Kh(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ns("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[mf.store,Sf.store],(function(e){var n=new zf(e,Js.I);return t.cn(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Kh(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return yh.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Ns("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,Of,(function(a){return i=new zf(a,r.Be?r.Be.next():Js.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw Ps("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Me.enqueueRetryable((function(){return r.We(!1)})),new Vs(js.FAILED_PRECONDITION,Nf);return n(i)})).next((function(e){return r.an(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return Wh(e).get(mf.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Vs(js.FAILED_PRECONDITION,zh)}))}},{key:"an",value:function(e){var t=new mf(this.clientId,this.allowTabSynchronization,Date.now());return Wh(e).put(mf.key,t)}},{key:"cn",value:function(e){var t=this,n=Wh(e);return n.get(mf.key).next((function(e){return t.un(e)?(Ns("IndexedDbPersistence","Releasing primary lease."),n.delete(mf.key)):Df.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Ps("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Me.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!hn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Me.enterRestrictedMode(!0),t.Me.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Ns("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ps("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Ps("Failed to set zombie client id.",e)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Pt",value:function(){return Mf.Pt()}}]),e}();function Wh(e){return Hf(e,mf.store)}function Kh(e){return Hf(e,Sf.store)}function Qh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Yh=_createClass((function e(t,n){_classCallCheck(this,e),this.progress=t,this.In=n})),Jh=function(){function e(t,n,r){_classCallCheck(this,e),this.Je=t,this.An=n,this.Jt=r}return _createClass(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.bn(e,t,r)}))}},{key:"bn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=_createForOfIteratorHelper(n);try{for(r.s();!(t=r.n()).done;)t.value.applyToLocalView(e)}catch(e){r.e(e)}finally{r.f()}return e}))}},{key:"Pn",value:function(e,t){e.forEach((function(e,n){var r,i=_createForOfIteratorHelper(t);try{for(i.s();!(r=i.n()).done;)r.value.applyToLocalView(n)}catch(e){i.e(e)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Pn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Tu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):pc(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new Tu(t)).next((function(e){var t=vl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=vl();return this.Jt.getCollectionParents(e,i).next((function(o){return Df.forEach(o,(function(o){var s=function(e,t){return new sc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=_createForOfIteratorHelper(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,s=_createForOfIteratorHelper(o.mutations);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u.key,l=r.get(c);null==l&&(l=Vu.newInvalidDocument(c),r=r.insert(c,l)),Hc(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(e){s.e(e)}finally{s.f()}}}catch(e){n.e(e)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){bc(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=kl(),a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var o,s=_createForOfIteratorHelper(r.value.mutations);try{for(s.s();!(o=s.n()).done;){var u=o.value;u instanceof Jc&&null===n.get(u.key)&&(i=i.add(u.key))}}catch(e){s.e(e)}finally{s.f()}}}catch(e){a.e(e)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),$h=function(){function e(t,n,r,i){_classCallCheck(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return _createClass(e,null,[{key:"$n",value:function(t,n){var r,i=kl(),a=kl(),o=_createForOfIteratorHelper(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(e){o.e(e)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Zh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"On",value:function(e){this.Mn=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ru.min())?this.Fn(e,t):this.Mn.vn(e,r).next((function(a){var o=i.Ln(t,a);return(lc(t)||fc(t))&&i.Bn(t.limitType,o,r,n)?i.Fn(e,t):(Os()<=An.DEBUG&&Ns("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_c(t)),i.Mn.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new ll(wc(e));return t.forEach((function(t,r){bc(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return Os()<=An.DEBUG&&Ns("QueryEngine","Using full collection scan to execute query:",_c(t)),this.Mn.getDocumentsMatchingQuery(e,t,ru.min())}}]),e}(),Xh=function(){function e(t,n,r,i){_classCallCheck(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new sl(Xs),this.Kn=new Lh((function(e){return Bu(e)}),zu),this.jn=ru.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new Jh(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.On(this.Wn)}return _createClass(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function ed(e,t,n,r){return new Xh(e,t,n,r)}function td(e,t){return nd.apply(this,arguments)}function nd(){return nd=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Us(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new Jh(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],s=kl(),u=_createForOfIteratorHelper(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;i.push(c.batchId);var l,f=_createForOfIteratorHelper(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(e){f.e(e)}finally{f.f()}}}catch(e){u.e(e)}finally{u.f()}var d,p=_createForOfIteratorHelper(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=_createForOfIteratorHelper(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(e){y.e(e)}finally{y.f()}}}catch(e){p.e(e)}finally{p.f()}return a.vn(e,s).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.On(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),nd.apply(this,arguments)}function rd(e){var t=Us(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function id(e,t,n,r,i){var a=kl();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=dl();return n.forEach((function(n,o){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(ru.min())?(t.removeEntry(n,u),a=a.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o,u),a=a.insert(n,o)):Ns("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),a}))}function ad(e,t){var n=Us(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function od(e,t){var n=Us(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,Df.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new Qf(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function sd(e,t,n){return ud.apply(this,arguments)}function ud(){return ud=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Us(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),jf(e.t1)){e.next=12;break}throw e.t1;case 12:Ns("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ud.apply(this,arguments)}function cd(e,t,n){var r=Us(e),i=ru.min(),a=kl();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Us(e),i=r.Kn.get(n);return void 0!==i?Df.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,mc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:ru.min(),n?a:kl())})).next((function(e){return{documents:e,zn:a}}))}))}function ld(e,t){var n=Us(e),r=Us(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function fd(e){var t=Us(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Us(e),i=dl(),a=Zf(n),o=Vh(t),s=IDBKeyRange.lowerBound(a,!0);return o.jt({index:wf.readTimeIndex,range:s},(function(e,t){var n=Jf(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:Xf(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function hd(e,t){return dd.apply(this,arguments)}function dd(){return dd=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:kl(),e.next=3,od(t,mc(ah(n.bundledQuery)));case 3:return i=e.sent,a=Us(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Fl(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(hu.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),dd.apply(this,arguments)}var pd=function(){function e(t){_classCallCheck(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return _createClass(e,[{key:"getBundleMetadata",value:function(e,t){return Df.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:Fl(n.createTime)}),Df.resolve()}},{key:"getNamedQuery",value:function(e,t){return Df.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:ah(e.bundledQuery),readTime:Fl(e.readTime)}}(t)),Df.resolve()}}]),e}(),vd=function(){function e(){_classCallCheck(this,e),this.ts=new ll(md.es),this.ns=new ll(md.ss)}return _createClass(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new md(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new md(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Tu(new uu([])),r=new md(n,e),i=new md(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new Tu(new uu([])),n=new md(t,e),r=new md(t,e+1),i=kl();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new md(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),md=function(){function e(t,n){_classCallCheck(this,e),this.key=t,this.fs=n}return _createClass(e,null,[{key:"es",value:function(e,t){return Tu.comparator(e.key,t.key)||Xs(e.fs,t.fs)}},{key:"ss",value:function(e,t){return Xs(e.fs,t.fs)||Tu.comparator(e.key,t.key)}}]),e}(),yd=function(){function e(t,n){_classCallCheck(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new ll(md.es)}return _createClass(e,[{key:"checkEmpty",value:function(e){return Df.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new Wf(i,t,n,r);this.An.push(a);var o,s=_createForOfIteratorHelper(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ws=this.ws.add(new md(u.key,i)),this.Jt.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(e){s.e(e)}finally{s.f()}return Df.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Df.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return Df.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Df.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return Df.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new md(t,0),i=new md(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),Df.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ll(Xs);return t.forEach((function(e){var t=new md(e,0),i=new md(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),Df.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Tu.isDocumentKey(i)||(i=i.child(""));var a=new md(new Tu(i),0),o=new ll(Xs);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),Df.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Fs(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return Df.forEach(t.mutations,(function(i){var a=new md(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new md(t,0),r=this.ws.firstAfterOrEqual(n);return Df.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,Df.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),gd=function(){function e(t,n){_classCallCheck(this,e),this.Jt=t,this.Ts=n,this.docs=new sl(Tu.comparator),this.size=0}return _createClass(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Df.resolve(n?n.document.mutableCopy():Vu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=dl();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Vu.newInvalidDocument(e))})),Df.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=dl(),i=new Tu(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||bc(t,c)&&(r=r.insert(c.key,c.mutableCopy()))}return Df.resolve(r)}},{key:"Es",value:function(e,t){return Df.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new kd(this)}},{key:"getSize",value:function(e){return Df.resolve(this.size)}}]),e}(),kd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).De=e,r}return _createClass(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),Df.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(Mh),_d=function(){function e(t){_classCallCheck(this,e),this.persistence=t,this.Is=new Lh((function(e){return Bu(e)}),zu),this.lastRemoteSnapshotVersion=ru.min(),this.highestTargetId=0,this.As=0,this.Rs=new vd,this.targetCount=0,this.bs=wh.ie()}return _createClass(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),Df.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Df.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Df.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Df.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),Df.resolve()}},{key:"ae",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new wh(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,Df.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),Df.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Df.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Df.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Df.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return Df.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),Df.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Df.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),Df.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return Df.resolve(n)}},{key:"containsKey",value:function(e,t){return Df.resolve(this.Rs.containsKey(t))}}]),e}(),bd=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.Ps={},this.Be=new Js(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new _d(this),this.Jt=new ch,this.Je=function(e,t){return new gd(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new Yf(n),this.Ye=new pd(this.k)}return _createClass(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.Ps[e.toKey()];return t||(t=new yd(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Ns("MemoryPersistence","Starting transaction:",e);var i=new wd(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return Df.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),wd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return _createClass(n)}(Pf),Td=function(){function e(t){_classCallCheck(this,e),this.persistence=t,this.Cs=new vd,this.Ns=null}return _createClass(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw Ms()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),Df.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),Df.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),Df.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Df.forEach(this.xs,(function(r){var i=Tu.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Df.or([function(){return Df.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function Cd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function xd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ed(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Id=function(){function e(t,n,r,i){_classCallCheck(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return _createClass(e,[{key:"Ms",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Os",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==_typeof(a)&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==_typeof(a.error));return o&&a.error&&(o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Vs(a.error.code,a.error.message)),o?new e(t,n,a.state,i):(Ps("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Sd=function(){function e(t,n,r){_classCallCheck(this,e),this.targetId=t,this.state=n,this.error=r}return _createClass(e,[{key:"Ms",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Os",value:function(t,n){var r,i=JSON.parse(n),a="object"==_typeof(i)&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==_typeof(i.error));return a&&i.error&&(a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vs(i.error.code,i.error.message)),a?new e(t,i.state,r):(Ps("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Rd=function(){function e(t,n){_classCallCheck(this,e),this.clientId=t,this.activeTargetIds=n}return _createClass(e,null,[{key:"Os",value:function(t,n){for(var r=JSON.parse(n),i="object"==_typeof(r)&&r.activeTargetIds instanceof Array,a=bl(),o=0;i&&o<r.activeTargetIds.length;++o)i=wu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ps("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Ad=function(){function e(t,n){_classCallCheck(this,e),this.clientId=t,this.onlineState=n}return _createClass(e,null,[{key:"Os",value:function(t){var n=JSON.parse(t);return"object"==_typeof(n)&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ps("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Od=function(){function e(){_classCallCheck(this,e),this.activeTargetIds=bl()}return _createClass(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Ms",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Nd=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.window=t,this.Me=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new sl(Xs),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=Cd(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new Od),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}var t,n;return _createClass(e,[{key:"start",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=_createForOfIteratorHelper(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Cd(this.persistenceKey,i)))&&(o=Rd.Os(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(s=this.storage.getItem(this.Js))&&(u=this.Zs(s))&&this.ti(u),c=_createForOfIteratorHelper(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(e){c.e(e)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])}))),function(){return n.apply(this,arguments)})},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ed(this.persistenceKey,e));if(n){var r=Sd.Os(e,n);r&&(t=r.state)}}return this.ii.Fs(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ed(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ci()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Ns("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Ns("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Ns("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ns("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Ps("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable(_asyncToGenerator(_regeneratorRuntime.mark((function e(){var r,i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ai(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(s));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}u=function(e){var t=Js.I;if(null!=e)try{var n=JSON.parse(e);Fs("number"==typeof n),t=n}catch(e){Ps("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Js.I&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Ms())}},{key:"ni",value:function(e,t,n){var r=new Id(this.currentUser,e,t,n),i=xd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ms())}},{key:"si",value:function(e){var t=xd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=Ed(this.persistenceKey,e),i=new Sd(e,t,n);this.setItem(r,i.Ms())}},{key:"ci",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ai",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ai(e);return Rd.Os(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Id.Os(new Ss(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return Sd.Os(r,t)}},{key:"Zs",value:function(e){return Ad.Os(e)}},{key:"fi",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:Ns("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.yi(o,s).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=bl();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Pt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Pd=function(){function e(){_classCallCheck(this,e),this.pi=new Od,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return _createClass(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new Od,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Dd=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ld=function(){function e(){var t=this;_classCallCheck(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.bi()},this.Pi=[],this.vi()}return _createClass(e,[{key:"Ei",value:function(e){this.Pi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){Ns("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=_createForOfIteratorHelper(this.Pi);try{for(t.s();!(e=t.n()).done;)(0,e.value)(0)}catch(e){t.e(e)}finally{t.f()}}},{key:"bi",value:function(){Ns("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=_createForOfIteratorHelper(this.Pi);try{for(t.s();!(e=t.n()).done;)(0,e.value)(1)}catch(e){t.e(e)}finally{t.f()}}}],[{key:"Pt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Md={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Fd=function(){function e(t){_classCallCheck(this,e),this.Vi=t.Vi,this.Si=t.Si}return _createClass(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Oi",value:function(e){this.ki(e)}},{key:"Mi",value:function(e){this.xi(e)}}]),e}(),Ud=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return _createClass(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Es;o.listenOnce(bs.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case _s.NO_ERROR:var t=o.getResponseJson();Ns("Connection","XHR received:",JSON.stringify(t)),i(t);break;case _s.TIMEOUT:Ns("Connection",'RPC "'+e+'" timed out'),a(new Vs(js.DEADLINE_EXCEEDED,"Request time out"));break;case _s.HTTP_ERROR:var n=o.getStatus();if(Ns("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(js).indexOf(t)>=0?t:js.UNKNOWN}(r.status);a(new Vs(s,r.message))}else a(new Vs(js.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Vs(js.UNAVAILABLE,"Connection failed."));break;default:Ms()}}finally{Ns("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=gs(),a=ks(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Cs({})),this.qi(o.initMessageHeaders,t,n),fn()||pn()||ln().indexOf("Electron/")>=0||vn()||ln().indexOf("MSAppHost/")>=0||dn()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Ns("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new Fd({Vi:function(e){l?Ns("Connection","Not sending because WebChannel is closed:",e):(c||(Ns("Connection","Opening WebChannel transport."),u.open(),c=!0),Ns("Connection","WebChannel sending:",e),u.send(e))},Si:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,xs.EventType.OPEN,(function(){l||Ns("Connection","WebChannel transport opened.")})),h(u,xs.EventType.CLOSE,(function(){l||(l=!0,Ns("Connection","WebChannel transport closed"),f.Oi())})),h(u,xs.EventType.ERROR,(function(e){l||(l=!0,Ds("Connection","WebChannel transport errored:",e),f.Oi(new Vs(js.UNAVAILABLE,"The operation could not be completed")))})),h(u,xs.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Fs(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ns("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=el[e];if(void 0!==t)return ol(t)}(a),s=i.message;void 0===o&&(o=js.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.Oi(new Vs(o,s)),u.close()}else Ns("Connection","WebChannel received:",n),f.Mi(n)}})),h(a,ws.STAT_EVENT,(function(e){e.stat===Ts.PROXY?Ns("Connection","Detected buffering proxy"):e.stat===Ts.NOPROXY&&Ns("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){_classCallCheck(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Fi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return _createClass(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);Ns("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return Ns("RestConnection","Received: ",e),e}),(function(t){throw Ds("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=Md[e];return"".concat(this.Fi,"/v1/").concat(t,":").concat(n)}}]),e}());function jd(){return"undefined"!=typeof window?window:null}function Vd(){return"undefined"!=typeof document?document:null}function Gd(e){return new Pl(e,!0)}var qd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;_classCallCheck(this,e),this.Me=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return _createClass(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&Ns("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),Bd=function(){function e(t,n,r,i,a,o,s,u){_classCallCheck(this,e),this.Me=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new qd(t,n)}var t,n,r;return _createClass(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"yr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"pr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"close",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===js.RESOURCE_EXHAUSTED?(Ps(n.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===js.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=_slicedToArray(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new Vs(js.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.ar=n.Me.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(_asyncToGenerator(_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return Ns("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Me.enqueueAndForget((function(){return t.rr===e?n():(Ns("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),zd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a,o,s){var u;return _classCallCheck(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).k=o,u}return _createClass(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ms()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(Fs(void 0===t||"string"==typeof t),hu.fromBase64String(t||"")):(Fs(void 0===t||t instanceof Uint8Array),hu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?js.UNKNOWN:ol(e.code);return new Vs(t,e.message||"")}(o);n=new El(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Gl(e,u.document.name),l=Fl(u.document.updateTime),f=new Uu({mapValue:{fields:u.document.fields}}),h=Vu.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Cl(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Gl(e,v.document),y=v.readTime?Fl(v.readTime):ru.min(),g=Vu.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Cl([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var b=Gl(e,_.document),w=_.removedTargetIds||[];n=new Cl([],w,b,null)}else{if(!("filter"in t))return Ms();t.filter;var T=t.filter;T.targetId;var C=T.count||0,x=new il(C),E=T.targetId;n=new xl(E,x)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return ru.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ru.min():t.readTime?Fl(t.readTime):ru.min()}(e);return this.listener.br(t,n)}},{key:"Pr",value:function(e){var t={};t.database=zl(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=Hu(r)?{documents:Jl(e,r)}:{query:$l(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ll(e,t.resumeToken):t.snapshotVersion.compareTo(ru.min())>0&&(n.readTime=Dl(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ms()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=zl(this.k),t.removeTarget=e,this.gr(t)}}]),n}(Bd),Hd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a,o,s){var u;return _classCallCheck(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).k=o,u.Vr=!1,u}return _createClass(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,_get(_getPrototypeOf(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(Fs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(Fs(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Fl(e.updateTime):Fl(t);return n.isEqual(ru.min())&&(n=Fl(t)),new Vc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Fl(e.commitTime);return this.listener.Cr(n,t)}return Fs(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=zl(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ql(t.k,e)}))};this.gr(n)}}]),n}(Bd),Wd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var o;return _classCallCheck(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return _createClass(n,[{key:"Or",value:function(){if(this.$r)throw new Vs(js.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=_slicedToArray(i,2),o=a[0],s=a[1];return r.ir.Bi(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===js.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Vs(js.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=_slicedToArray(i,2),o=a[0],s=a[1];return r.ir.ji(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===js.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Vs(js.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return _createClass((function e(){_classCallCheck(this,e)}))}()),Kd=function(){function e(t,n){_classCallCheck(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}return _createClass(e,[{key:"Br",value:function(){var e=this;0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Fr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(Ps(t),this.Lr=!1):Ns("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}]),e}(),Qd=_createClass((function e(t,n,r,i,a){var o=this;_classCallCheck(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei((function(e){r.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ap(o),!e.t0){e.next=5;break}return Ns("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Us(t)).Gr.add(4),e.next=4,$d(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,Yd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new Kd(r,i)}));function Yd(e){return Jd.apply(this,arguments)}function Jd(){return Jd=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ap(t)){e.next=18;break}n=_createForOfIteratorHelper(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Jd.apply(this,arguments)}function $d(e){return Zd.apply(this,arguments)}function Zd(){return Zd=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_createForOfIteratorHelper(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Zd.apply(this,arguments)}function Xd(e,t){var n=Us(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),ip(n)?rp(n):Dp(n).lr()&&tp(n,t))}function ep(e,t){var n=Us(e),r=Dp(n);n.Wr.delete(t),r.lr()&&np(n,t),0===n.Wr.size&&(r.lr()?r._r():ap(n)&&n.Jr.set("Unknown"))}function tp(e,t){e.Yr.X(t.targetId),Dp(e).Pr(t)}function np(e,t){e.Yr.X(t),Dp(e).vr(t)}function rp(e){e.Yr=new Sl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),Dp(e).start(),e.Jr.Br()}function ip(e){return ap(e)&&!Dp(e).hr()&&e.Wr.size>0}function ap(e){return 0===Us(e).Gr.size}function op(e){e.Yr=void 0}function sp(e){return up.apply(this,arguments)}function up(){return up=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){tp(t,e)}));case 1:case"end":return e.stop()}}),e)}))),up.apply(this,arguments)}function cp(e,t){return lp.apply(this,arguments)}function lp(){return lp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:op(t),ip(t)?(t.Jr.Kr(n),rp(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function fp(e,t,n){return hp.apply(this,arguments)}function hp(){return hp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof El&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=_createForOfIteratorHelper(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ns("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,dp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Cl?t.Yr.ot(n):n instanceof xl?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(ru.min())){e.next=29;break}return e.prev=14,e.next=17,rd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(hu.EMPTY_BYTE_STRING,n.snapshotVersion)),np(e,t);var r=new Qf(n.target,t,1,n.sequenceNumber);tp(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ns("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,dp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),hp.apply(this,arguments)}function dp(e,t,n){return pp.apply(this,arguments)}function pp(){return pp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jf(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,$d(t);case 5:t.Jr.set("Offline"),r||(r=function(){return rd(t.localStore)}),t.asyncQueue.enqueueRetryable(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ns("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,Yd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}function vp(e,t){return t().catch((function(n){return dp(e,n,t)}))}function mp(e){return yp.apply(this,arguments)}function yp(){return yp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Us(t),r=Lp(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!gp(n)){e.next=19;break}return e.prev=3,e.next=6,ad(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,kp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,dp(n,e.t0);case 17:e.next=2;break;case 19:_p(n)&&bp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),yp.apply(this,arguments)}function gp(e){return ap(e)&&e.Qr.length<10}function kp(e,t){e.Qr.push(t);var n=Lp(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function _p(e){return ap(e)&&!Lp(e).hr()&&e.Qr.length>0}function bp(e){Lp(e).start()}function wp(e){return Tp.apply(this,arguments)}function Tp(){return Tp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lp(t).kr();case 1:case"end":return e.stop()}}),e)}))),Tp.apply(this,arguments)}function Cp(e){return xp.apply(this,arguments)}function xp(){return xp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Lp(t),r=_createForOfIteratorHelper(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(e){r.e(e)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Ep(e,t,n){return Ip.apply(this,arguments)}function Ip(){return Ip=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=Kf.from(i,n,r),e.next=3,vp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,mp(t);case 5:case"end":return e.stop()}}),e)}))),Ip.apply(this,arguments)}function Sp(e,t){return Rp.apply(this,arguments)}function Rp(){return Rp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Lp(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!al(i=n.code)||i===js.ABORTED){e.next=7;break}return r=t.Qr.shift(),Lp(t).wr(),e.next=5,vp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,mp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:_p(t)&&bp(t);case 5:case"end":return e.stop()}}),e)}))),Rp.apply(this,arguments)}function Ap(e,t){return Op.apply(this,arguments)}function Op(){return Op=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Us(t)).asyncQueue.verifyOperationInProgress(),Ns("RemoteStore","RemoteStore received new credentials"),i=ap(r),r.Gr.add(3),e.next=6,$d(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,Yd(r);case 12:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}function Np(e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Us(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,Yd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,$d(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Dp(e){return e.Xr||(e.Xr=function(e,t,n){var r=Us(e);return r.Or(),new zd(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:sp.bind(null,e),Ni:cp.bind(null,e),br:fp.bind(null,e)}),e.zr.push(function(){var t=_asyncToGenerator(_regeneratorRuntime.mark((function t(n){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),ip(e)?rp(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:op(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function Lp(e){return e.Zr||(e.Zr=function(e,t,n){var r=Us(e);return r.Or(),new Hd(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:wp.bind(null,e),Ni:Sp.bind(null,e),Nr:Cp.bind(null,e),Cr:Ep.bind(null,e)}),e.zr.push(function(){var t=_asyncToGenerator(_regeneratorRuntime.mark((function t(n){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,mp(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(Ns("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var Mp=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return _createClass(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vs(js.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Fp(e,t){if(Ps("AsyncQueue","".concat(t,": ").concat(e)),jf(e))return new Vs(js.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Up=function(){function e(t){_classCallCheck(this,e),this.comparator=t?function(e,n){return t(e,n)||Tu.comparator(e.key,n.key)}:function(e,t){return Tu.comparator(e.key,t.key)},this.keyedMap=vl(),this.sortedSet=new sl(this.comparator)}return _createClass(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),jp=function(){function e(){_classCallCheck(this,e),this.eo=new sl(Tu.comparator)}return _createClass(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Ms():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Vp=function(){function e(t,n,r,i,a,o,s,u){_classCallCheck(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return _createClass(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Up.emptySet(n),a,r,i,!0,!1)}}]),e}(),Gp=_createClass((function e(){_classCallCheck(this,e),this.so=void 0,this.listeners=[]})),qp=_createClass((function e(){_classCallCheck(this,e),this.queries=new Lh((function(e){return kc(e)}),gc),this.onlineState="Unknown",this.io=new Set}));function Bp(e,t){return zp.apply(this,arguments)}function zp(){return zp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Us(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Gp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Fp(e.t0,"Initialization of query '".concat(_c(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&Yp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),zp.apply(this,arguments)}function Hp(e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Us(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Wp.apply(this,arguments)}function Kp(e,t){var n,r=Us(e),i=!1,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=_createForOfIteratorHelper(u.listeners);try{for(l.s();!(c=l.n()).done;)c.value.oo(o)&&(i=!0)}catch(e){l.e(e)}finally{l.f()}u.so=o}}}catch(e){a.e(e)}finally{a.f()}i&&Yp(r)}function Qp(e,t,n){var r=Us(e),i=r.queries.get(t);if(i){var a,o=_createForOfIteratorHelper(i.listeners);try{for(o.s();!(a=o.n()).done;)a.value.onError(n)}catch(e){o.e(e)}finally{o.f()}}r.queries.delete(t)}function Yp(e){e.io.forEach((function(e){e.next()}))}var Jp=function(){function e(t,n,r){_classCallCheck(this,e),this.query=t,this.co=n,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return _createClass(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=_createForOfIteratorHelper(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(e){r.e(e)}finally{r.f()}e=new Vp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.ao?this.ho(e)&&(this.co.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.co.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.wo&&n||e.docs.isEmpty()&&"Offline"!==t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=Vp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}]),e}(),$p=function(){function e(t,n){_classCallCheck(this,e),this.payload=t,this.byteLength=n}return _createClass(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),Zp=function(){function e(t){_classCallCheck(this,e),this.k=t}return _createClass(e,[{key:"Hn",value:function(e){return Gl(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?Kl(this.k,e.document,!1):Vu.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return Fl(e)}}]),e}(),Xp=function(){function e(t,n,r){_classCallCheck(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=ev(t)}var t;return _createClass(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new Zp(this.k),i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Hn(a.metadata.name),u=_createForOfIteratorHelper(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||kl()).add(s);n.set(c,l)}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"complete",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n,r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Us(t),o=kl(),s=dl(),u=yl(),c=_createForOfIteratorHelper(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hn(f.metadata.name),f.document&&(o=o.add(h)),s=s.insert(h,n.Jn(f)),u=u.insert(h,n.Yn(f.metadata.readTime))}catch(e){c.e(e)}finally{c.f()}return d=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,od(a,function(e){return mc(cc(uu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return id(e,d,s,ru.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.He.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(this.localStore,new Zp(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=_createForOfIteratorHelper(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,hd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Yh(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])}))),function(){return t.apply(this,arguments)})}]),e}();function ev(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var tv=_createClass((function e(t){_classCallCheck(this,e),this.key=t})),nv=_createClass((function e(t){_classCallCheck(this,e),this.key=t})),rv=function(){function e(t,n){_classCallCheck(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=kl(),this.mutatedKeys=kl(),this.Ao=wc(t),this.Ro=new Up(this.Ao)}return _createClass(e,[{key:"bo",get:function(){return this.To}},{key:"Po",value:function(e,t){var n=this,r=t?t.vo:new jp,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=lc(this.query)&&i.size===this.query.limit?i.last():null,c=fc(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=bc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Ao(f,u)>0||c&&n.Ao(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),lc(this.query)||fc(this.query))for(;o.size>this.query.limit;){var l=lc(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:s,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ms()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],s=0===this.Io.size&&this.current?1:0,u=s!==this.Eo;return this.Eo=s,0!==a.length||u?{snapshot:new Vp(this.query,e.Ro,i,a,e.mutatedKeys,0===s,u,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new jp,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=kl(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new nv(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new tv(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=kl();var t=this.Po(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return Vp.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),iv=_createClass((function e(t,n,r){_classCallCheck(this,e),this.query=t,this.targetId=n,this.view=r})),av=_createClass((function e(t){_classCallCheck(this,e),this.key=t,this.$o=!1})),ov=function(){function e(t,n,r,i,a,o){_classCallCheck(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Oo={},this.Mo=new Lh((function(e){return kc(e)}),gc),this.Fo=new Map,this.Lo=new Set,this.Bo=new sl(Tu.comparator),this.Uo=new Map,this.qo=new vd,this.Ko={},this.jo=new Map,this.Qo=wh.re(),this.onlineState="Unknown",this.Wo=void 0}return _createClass(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function sv(e,t){return uv.apply(this,arguments)}function uv(){return uv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Qv(t),!(o=r.Mo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,od(r.localStore,mc(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,cv(r,n,i,"current"===u);case 13:a=e.sent,r.isPrimaryClient&&Xd(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function cv(e,t,n,r){return lv.apply(this,arguments)}function lv(){return lv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s,u,c,l;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Po(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,cd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Po(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Ev(t,n.targetId,s.Co),s.snapshot));case 8:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,cd(t.localStore,n,!0);case 3:return a=e.sent,o=new rv(n,a.zn),s=o.Po(a.documents),u=Tl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),Ev(t,r,c.Co),l=new iv(n,r,o),e.abrupt("return",(t.Mo.set(n,l),t.Fo.has(r)?t.Fo.get(r).push(n):t.Fo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),lv.apply(this,arguments)}function fv(e,t){return hv.apply(this,arguments)}function hv(){return hv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Us(t),i=r.Mo.get(n),!((a=r.Fo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Fo.set(i.targetId,a.filter((function(e){return!gc(e,n)}))),void r.Mo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,sd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),ep(r.remoteStore,i.targetId),Cv(r,i.targetId)})).catch(Ih);case 9:e.next=14;break;case 11:return Cv(r,i.targetId),e.next=14,sd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}function dv(e,t){return pv.apply(this,arguments)}function pv(){return pv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Us(t),e.prev=1,e.next=4,function(e,t){var n=Us(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.He.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.He.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(hu.EMPTY_BYTE_STRING,ru.min()).withLastLimboFreeSnapshotVersion(ru.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,a)&&o.push(n.He.updateTargetData(e,c))}}));var s=dl();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(id(e,a,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(ru.min())){var u=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return Df.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,s)})).next((function(){return s}))})).then((function(e){return n.qn=i,e}))}(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(Fs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?Fs(n.$o):e.removedDocuments.size>0&&(Fs(n.$o),n.$o=!1))})),e.next=8,Rv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ih(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),pv.apply(this,arguments)}function vv(e,t,n){var r=Us(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Mo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Us(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=_createForOfIteratorHelper(n.listeners);try{for(a.s();!(i=a.n()).done;)i.value.ro(t)&&(r=!0)}catch(e){a.e(e)}finally{a.f()}})),r&&Yp(n)}(r.eventManager,t),i.length&&r.Oo.br(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function mv(e,t,n){return yv.apply(this,arguments)}function yv(){return yv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Us(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new sl(Tu.comparator)).insert(o,Vu.newNoDocument(o,ru.min())),u=kl().add(o),c=new wl(ru.min(),new Map,new ll(Xs),s,u),e.next=9,dv(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),Sv(i),e.next=16;break;case 14:return e.next=16,sd(i.localStore,n,!1).then((function(){return Cv(i,n,r)})).catch(Ih);case 16:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}function gv(e,t){return kv.apply(this,arguments)}function kv(){return kv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Us(t),i=n.batch.batchId,e.prev=1,e.next=4,function(e,t){var n=Us(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Df.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Fs(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(r.localStore,n);case 4:return a=e.sent,Tv(r,i,null),wv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Rv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ih(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),kv.apply(this,arguments)}function _v(e,t,n){return bv.apply(this,arguments)}function bv(){return bv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Us(t),e.prev=1,e.next=4,function(e,t){var n=Us(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return Fs(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Tv(i,n,r),wv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Rv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ih(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),bv.apply(this,arguments)}function wv(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function Tv(e,t,n){var r=Us(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function Cv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=_createForOfIteratorHelper(e.Fo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Mo.delete(a),n&&e.Oo.zo(a,n)}}catch(e){i.e(e)}finally{i.f()}e.Fo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||xv(e,t)}))}function xv(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(ep(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),Sv(e))}function Ev(e,t,n){var r,i=_createForOfIteratorHelper(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof tv?(e.qo.addReference(a.key,t),Iv(e,a)):a instanceof nv?(Ns("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||xv(e,a.key)):Ms()}}catch(e){i.e(e)}finally{i.f()}}function Iv(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Ns("SyncEngine","New document in limbo: "+n),e.Lo.add(r),Sv(e))}function Sv(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new Tu(uu.fromString(t)),r=e.Qo.next();e.Uo.set(r,new av(n)),e.Bo=e.Bo.insert(n,r),Xd(e.remoteStore,new Qf(mc(cc(n.path)),r,2,Js.I))}}function Rv(e,t,n){return Av.apply(this,arguments)}function Av(){return Av=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Us(t),a=[],o=[],s=[],e.t0=i.Mo.isEmpty(),e.t0){e.next=9;break}return i.Mo.forEach((function(e,t){s.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=$h.$n(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Oo.br(a),e.next=9,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Us(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Df.forEach(n,(function(t){return Df.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Df.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),jf(e.t0)){e.next=10;break}throw e.t0;case 10:Ns("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=_createForOfIteratorHelper(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.qn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(s,l))}catch(e){i.e(e)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Av.apply(this,arguments)}function Ov(e,t){return Nv.apply(this,arguments)}function Nv(){return Nv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Us(t)).currentUser.isEqual(n)){e.next=11;break}return Ns("SyncEngine","User change. New user:",n.toKey()),e.next=5,td(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new Vs(js.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Rv(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),Nv.apply(this,arguments)}function Pv(e,t){var n=Us(e),r=n.Uo.get(t);if(r&&r.$o)return kl().add(r.key);var i=kl(),a=n.Fo.get(t);if(!a)return i;var o,s=_createForOfIteratorHelper(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Mo.get(u);i=i.unionWith(c.view.bo)}}catch(e){s.e(e)}finally{s.f()}return i}function Dv(e,t){return Lv.apply(this,arguments)}function Lv(){return Lv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Us(t),e.next=3,cd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&Ev(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),Lv.apply(this,arguments)}function Mv(e){return Fv.apply(this,arguments)}function Fv(){return Fv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Us(t),e.abrupt("return",fd(n.localStore).then((function(e){return Rv(n,e)})));case 2:case"end":return e.stop()}}),e)}))),Fv.apply(this,arguments)}function Uv(e,t,n,r){return jv.apply(this,arguments)}function jv(){return jv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Us(t),e.next=3,function(e,t){var n=Us(e),r=Us(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):Df.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,mp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Tv(a,n,i||null),wv(a,n),function(e,t){Us(Us(e).An).ee(t)}(a.localStore,n)):Ms();case 11:return e.next=13,Rv(a,o);case 13:e.next=16;break;case 15:Ns("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function Vv(e,t,n){return Gv.apply(this,arguments)}function Gv(){return Gv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,y;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Us(t),a=[],o=[],s=_createForOfIteratorHelper(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.Fo.get(c))||0===f.length){e.next=34;break}return e.next=11,od(i.localStore,mc(f[0]));case 11:l=e.sent,h=_createForOfIteratorHelper(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Mo.get(p),e.next=20,Dv(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,ld(i.localStore,c);case 36:return y=e.sent,e.next=39,od(i.localStore,y);case 39:return l=e.sent,e.next=42,cv(i,qv(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Oo.br(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Gv.apply(this,arguments)}function qv(e){return uc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Bv(e){var t=Us(e);return Us(Us(t.localStore).persistence).Tn()}function zv(e,t,n,r){return Hv.apply(this,arguments)}function Hv(){return Hv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Us(t)).Wo){e.next=5;break}Ns("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Fo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,fd(a.localStore);case 11:return o=e.sent,s=wl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,Rv(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,sd(a.localStore,n,!0);case 18:return Cv(a,n,i),e.abrupt("break",21);case 20:Ms();case 21:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Wv(e,t,n){return Kv.apply(this,arguments)}function Kv(){return Kv=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Qv(t)).Wo){e.next=45;break}a=_createForOfIteratorHelper(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Fo.has(s)){e.next=10;break}return Ns("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,ld(i.localStore,s);case 12:return u=e.sent,e.next=15,od(i.localStore,u);case 15:return c=e.sent,e.next=18,cv(i,qv(u),c.targetId,!1);case 18:Xd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=_createForOfIteratorHelper(r),e.prev=30,h=_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Fo.has(t),!e.t0){e.next=5;break}return e.next=5,sd(i.localStore,t,!1).then((function(){ep(i.remoteStore,t),Cv(i,t)})).catch(Ih);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Kv.apply(this,arguments)}function Qv(e){var t=Us(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mv.bind(null,t),t.Oo.br=Kp.bind(null,t.eventManager),t.Oo.zo=Qp.bind(null,t.eventManager),t}function Yv(e){var t=Us(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_v.bind(null,t),t}var Jv=function(){function e(){_classCallCheck(this,e),this.synchronizeTabs=!1}var t,n;return _createClass(e,[{key:"initialize",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=Gd(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return ed(this.persistence,new Zh,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new bd(Td.ks,this.k)}},{key:"Jo",value:function(e){return new Pd}},{key:"terminate",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),$v=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t,i){var a;return _classCallCheck(this,r),(a=n.call(this)).tc=e,a.cacheSizeBytes=t,a.forceOwnership=i,a.synchronizeTabs=!1,a}return _createClass(r,[{key:"initialize",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_get(_getPrototypeOf(r.prototype),"initialize",this).call(this,t);case 2:return e.next=4,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Us(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Vh(e),n=ru.min();return t.jt({index:wf.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Xf(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.localStore);case 4:return e.next=6,this.tc.initialize(this,t);case 6:return e.next=8,Yv(this.tc.syncEngine);case 8:return e.next=10,mp(this.tc.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"Zo",value:function(e){return ed(this.persistence,new Zh,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Oh(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=Qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ph.withCacheSize(this.cacheSizeBytes):ph.DEFAULT;return new Hh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,jd(),Vd(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new Pd}}]),r}(Jv),Zv=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(e,t){var i;return _classCallCheck(this,r),(i=n.call(this,e,t,!1)).tc=e,i.cacheSizeBytes=t,i.synchronizeTabs=!0,i}return _createClass(r,[{key:"initialize",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,i=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_get(_getPrototypeOf(r.prototype),"initialize",this).call(this,t);case 2:if(n=this.tc.syncEngine,e.t0=this.sharedClientState instanceof Nd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:Uv.bind(null,n),gi:zv.bind(null,n),yi:Wv.bind(null,n),Tn:Bv.bind(null,n),_i:Mv.bind(null,n)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c,l;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qv(r=Us(t)),Yv(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Vv(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,Np(r.remoteStore,!0);case 9:o=_createForOfIteratorHelper(a);try{for(o.s();!(s=o.n()).done;)u=s.value,Xd(r.remoteStore,u)}catch(e){o.e(e)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Fo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Cv(r,t),sd(r.localStore,t,!0)})),ep(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Vv(r,c);case 21:return function(e){var t=Us(e);t.Uo.forEach((function(e,n){ep(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new sl(Tu.comparator)}(r),r.Wo=!1,e.next=25,Np(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i.tc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"Jo",value:function(e){var t=jd();if(!Nd.Pt(t))throw new Vs(js.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),r}($v),Xv=function(){function e(){_classCallCheck(this,e)}var t;return _createClass(e,[{key:"initialize",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return vv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ov.bind(null,this.syncEngine),e.next=12,Np(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"createEventManager",value:function(e){return new qp}},{key:"createDatastore",value:function(e){var t,n=Gd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Ud(t));return function(e,t,n,r){return new Wd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return vv(o.syncEngine,e,0)},a=Ld.Pt()?new Ld:new Dd,new Qd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new ov(e,t,n,r,i,a);return o&&(s.Wo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return(e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Us(t),Ns("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,$d(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();function em(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return _asyncToGenerator(_regeneratorRuntime.mark((function r(){var i;return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return _asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var tm=function(){function e(t){_classCallCheck(this,e),this.observer=t,this.muted=!1}return _createClass(e,[{key:"next",value:function(e){this.observer.next&&this.ec(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"nc",value:function(){this.muted=!0}},{key:"ec",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),nm=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.sc=t,this.k=n,this.metadata=new Gs,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}var t,n,r,i,a,o;return _createClass(e,[{key:"close",value:function(){return this.sc.cancel()}},{key:"getMetadata",value:(o=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"Ho",value:(a=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.rc());case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"rc",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n,r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ic.decode(t),r=Number(n),isNaN(r)&&this.cc("length string (".concat(n,") is not valid number")),e.next=9,this.ac(r);case 9:return i=e.sent,e.abrupt("return",new $p(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"uc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oc",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.uc()<0,!e.t0){e.next=5;break}return e.next=4,this.hc();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=9;break}case 7:e.next=0;break;case 9:if(0!==this.buffer.length){e.next=11;break}return e.abrupt("return",null);case 11:return(t=this.uc())<0&&this.cc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 15:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"ac",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.hc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.cc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ic.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"cc",value:function(e){throw this.sc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"hc",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),rm=function(){function e(t){_classCallCheck(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}var t,n;return _createClass(e,[{key:"lookup",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Vs(js.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Us(t),i=zl(r.k)+"/documents",a={documents:n.map((function(e){return Vl(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){Fs(!!t.found),t.found.name,t.found.updateTime;var n=Gl(e,t.found.name),r=Fl(t.found.updateTime),i=new Uu({mapValue:{fields:t.found.fields}});return Vu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Fs(!!t.missing),Fs(!!t.readTime);var n=Gl(e,t.missing),r=Fl(t.readTime);return Vu.newNoDocument(n,r)}(e,t):Ms()}(r.k,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Fs(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new nl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Tu.fromPath(t);n.mutations.push(new rl(r,n.precondition(r)))})),e.next=7,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Us(t),i=zl(r.k)+"/documents",a={writes:n.map((function(e){return Ql(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ms();t=ru.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Vs(js.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Gc.updateTime(t):Gc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ru.min()))throw new Vs(js.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gc.updateTime(t)}return Gc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),im=function(){function e(t,n,r,i){_classCallCheck(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.lc=5,this.ur=new qd(this.asyncQueue,"transaction_retry")}return _createClass(e,[{key:"run",value:function(){this.lc-=1,this.fc()}},{key:"fc",value:function(){var e=this;this.ur.Zi(_asyncToGenerator(_regeneratorRuntime.mark((function t(){var n,r;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new rm(e.datastore),(r=e.dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wc(t)}))}))})).catch((function(t){e.wc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"dc",value:function(e){try{var t=this.updateFunction(e);return!_u(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wc",value:function(e){var t=this;this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget((function(){return t.fc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!al(t)}return!1}}]),e}(),am=function(){function e(t,n,r,i){var a=this;_classCallCheck(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ss.UNAUTHENTICATED,this.clientId=Zs.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ns("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ns("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}var t;return _createClass(e,[{key:"getConfiguration",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Vs(js.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_asyncToGenerator(_regeneratorRuntime.mark((function n(){var r;return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Fp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function om(e,t){return sm.apply(this,arguments)}function sm(){return sm=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ns("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,td(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),sm.apply(this,arguments)}function um(e,t){return cm.apply(this,arguments)}function cm(){return cm=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,lm(t);case 3:return r=e.sent,Ns("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Ap(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Ap(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function lm(e){return fm.apply(this,arguments)}function fm(){return fm=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Ns("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,om(t,new Jv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),fm.apply(this,arguments)}function hm(e){return dm.apply(this,arguments)}function dm(){return dm=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Ns("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,um(t,new Xv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function pm(e){return lm(e).then((function(e){return e.persistence}))}function vm(e){return lm(e).then((function(e){return e.localStore}))}function mm(e){return hm(e).then((function(e){return e.remoteStore}))}function ym(e){return hm(e).then((function(e){return e.syncEngine}))}function gm(e){return km.apply(this,arguments)}function km(){return km=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=sv.bind(null,n.syncEngine),r.onUnlisten=fv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function _m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Gs;return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function i(){return _regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new tm({next:function(a){t.enqueueAndForget((function(){return Hp(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Vs(js.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Vs(js.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Jp(cc(n.path),a,{includeMetadataChanges:!0,wo:!0});return Bp(e,o)},i.next=3,gm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function bm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Gs;return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function i(){return _regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new tm({next:function(n){t.enqueueAndForget((function(){return Hp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Vs(js.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Jp(n,a,{includeMetadataChanges:!0,wo:!0});return Bp(e,o)},i.next=3,gm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var wm=_createClass((function e(t,n,r,i,a,o,s,u){_classCallCheck(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Tm=function(){function e(t,n){_classCallCheck(this,e),this.projectId=t,this.database=n||"(default)"}return _createClass(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),Cm=new Map;function xm(e,t,n){if(!n)throw new Vs(js.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Em(e,t,n,r){if(!0===t&&!0===r)throw new Vs(js.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Im(e){if(!Tu.isDocumentKey(e))throw new Vs(js.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sm(e){if(Tu.isDocumentKey(e))throw new Vs(js.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==_typeof(e)){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ms()}function Am(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vs(js.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Rm(e);throw new Vs(js.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Om(e,t){if(t<=0)throw new Vs(js.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Nm=function(){function e(t){var n;if(_classCallCheck(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Vs(js.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vs(js.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Em("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return _createClass(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Pm=function(){function e(t,n,r){_classCallCheck(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nm({}),this._settingsFrozen=!1,t instanceof Tm?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Vs(js.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tm(e.options.projectId)}(t))}return _createClass(e,[{key:"app",get:function(){if(!this._app)throw new Vs(js.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Vs(js.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bs;switch(e.type){case"gapi":var t=e.client;return Fs(!("object"!=_typeof(t)||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ks(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Vs(js.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Cm.get(e);t&&(Ns("ComponentProvider","Removing Datastore"),Cm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}(),Dm=function(){function e(t,n,r){_classCallCheck(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return _createClass(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Mm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Lm=function(){function e(t,n,r){_classCallCheck(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return _createClass(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Mm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,cc(i)))._path=i,a.type="collection",a}return _createClass(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Dm(this.firestore,null,new Tu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Lm);function Fm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Rn(e),xm("collection","path",t),e instanceof Pm){var a=uu.fromString.apply(uu,[t].concat(r));return Sm(a),new Mm(e,null,a)}if(!(e instanceof Dm||e instanceof Mm))throw new Vs(js.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(uu.fromString.apply(uu,[t].concat(r)));return Sm(o),new Mm(e.firestore,null,o)}function Um(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Rn(e),1===arguments.length&&(t=Zs.A()),xm("doc","path",t),e instanceof Pm){var a=uu.fromString.apply(uu,[t].concat(r));return Im(a),new Dm(e,null,new Tu(a))}if(!(e instanceof Dm||e instanceof Mm))throw new Vs(js.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(uu.fromString.apply(uu,[t].concat(r)));return Im(o),new Dm(e.firestore,e instanceof Mm?e.converter:null,new Tu(o))}function jm(e,t){return e=Rn(e),t=Rn(t),(e instanceof Dm||e instanceof Mm)&&(t instanceof Dm||t instanceof Mm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Vm(e,t){return e=Rn(e),t=Rn(t),e instanceof Lm&&t instanceof Lm&&e.firestore===t.firestore&&gc(e._query,t._query)&&e.converter===t.converter}var Gm=function(){function e(){var t=this;_classCallCheck(this,e),this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new qd(this,"async_queue_retry"),this.bc=function(){var e=Vd();e&&Ns("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=Vd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.bc)}var t,n;return _createClass(e,[{key:"isShuttingDown",get:function(){return this.yc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pc(),this.vc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;var t=Vd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pc(),this.yc)return new Promise((function(){}));var n=new Gs;return this.vc((function(){return t.yc&&t.Ac?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.gc.push(e),t.Vc()}))}},{key:"Vc",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.gc.length){e.next=14;break}return e.prev=1,e.next=4,this.gc[0]();case 4:this.gc.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),jf(e.t0)){e.next=12;break}throw e.t0;case 12:Ns("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.gc.length>0&&this.ur.Zi((function(){return t.Vc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return n.apply(this,arguments)})},{key:"vc",value:function(e){var t=this,n=this.mc.then((function(){return t.Ic=!0,e().catch((function(e){t.Ec=e,t.Ic=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ps("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ic=!1,e}))}));return this.mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);var i=Mp.createAndSchedule(this,e,t,n,(function(e){return r.Sc(e)}));return this.Tc.push(i),i}},{key:"Pc",value:function(){this.Ec&&Ms()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Dc",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mc,e.next=3,t;case 3:if(t!==this.mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"Cc",value:function(e){var t,n=_createForOfIteratorHelper(this.Tc);try{for(n.s();!(t=n.n()).done;)if(t.value.timerId===e)return!0}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"Nc",value:function(e){var t=this;return this.Dc().then((function(){t.Tc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=_createForOfIteratorHelper(t.Tc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(e){r.e(e)}finally{r.f()}return t.Dc()}))}},{key:"kc",value:function(e){this.Rc.push(e)}},{key:"Sc",value:function(e){var t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}]),e}();function qm(e){return function(e,t){if("object"!=_typeof(e)||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var Bm=function(){function e(){_classCallCheck(this,e),this._progressObserver={},this._taskCompletionResolver=new Gs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return _createClass(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),zm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Gm,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return _createClass(n,[{key:"_terminate",value:function(){return this._firestoreClient||Wm(this),this._firestoreClient.terminate()}}]),n}(Pm);function Hm(e){return e._firestoreClient||Wm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Wm(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new wm(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new am(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Km(e,t,n){var r=new Gs;return e.asyncQueue.enqueue(_asyncToGenerator(_regeneratorRuntime.mark((function i(){return _regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,om(e,n);case 3:return i.next=5,um(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===js.FAILED_PRECONDITION||e.code===js.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Qm(e){if(e._initialized||e._terminated)throw new Vs(js.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ym=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Vs(js.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lu(n)}return _createClass(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),Jm=function(){function e(t){_classCallCheck(this,e),this._byteString=t}return _createClass(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(hu.fromBase64String(t))}catch(t){throw new Vs(js.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(hu.fromUint8Array(t))}}]),e}(),$m=_createClass((function e(t){_classCallCheck(this,e),this._methodName=t})),Zm=function(){function e(t,n){if(_classCallCheck(this,e),!isFinite(t)||t<-90||t>90)throw new Vs(js.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Vs(js.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return _createClass(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Xs(this._lat,e._lat)||Xs(this._long,e._long)}}]),e}(),Xm=/^__.*__$/,ey=function(){function e(t,n,r){_classCallCheck(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return _createClass(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Jc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yc(e,this.data,t,this.fieldTransforms)}}]),e}(),ty=function(){function e(t,n,r){_classCallCheck(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return _createClass(e,[{key:"toMutation",value:function(e,t){return new Jc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ny(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ms()}}var ry=function(){function e(t,n,r,i,a,o){_classCallCheck(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return _createClass(e,[{key:"path",get:function(){return this.settings.path}},{key:"$c",get:function(){return this.settings.$c}},{key:"Oc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Mc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.Lc(e),r}},{key:"Bc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Fc:!1});return r.xc(),r}},{key:"Uc",value:function(e){return this.Oc({path:void 0,Fc:!0})}},{key:"qc",value:function(e){return Ty(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}},{key:"Lc",value:function(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(ny(this.$c)&&Xm.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}]),e}(),iy=function(){function e(t,n,r){_classCallCheck(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||Gd(t)}return _createClass(e,[{key:"Qc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ry({$c:e,methodName:t,jc:n,path:lu.emptyPath(),Fc:!1,Kc:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function ay(e){var t=e._freezeSettings(),n=Gd(e._databaseId);return new iy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function oy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Qc(a.merge||a.mergeFields?2:0,t,n,i);ky("Data must be an object, but it was:",o,r);var s,u,c=yy(r,o);if(a.merge)s=new fu(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=_createForOfIteratorHelper(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=_y(t,d,n);if(!o.contains(p))throw new Vs(js.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Cy(f,p)||f.push(p)}}catch(e){h.e(e)}finally{h.f()}s=new fu(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new ey(new Uu(c),s,u)}var sy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.$c)throw 1===e.$c?e.qc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.qc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($m);function uy(e,t,n){return new ry({$c:3,jc:t.settings.jc,methodName:e._methodName,Fc:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var cy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"_toFieldTransform",value:function(e){return new jc(e.path,new Oc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($m),ly=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).Wc=r,i}return _createClass(n,[{key:"_toFieldTransform",value:function(e){var t=uy(this,e,!0),n=this.Wc.map((function(e){return my(e,t)})),r=new Nc(n);return new jc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($m),fy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).Wc=r,i}return _createClass(n,[{key:"_toFieldTransform",value:function(e){var t=uy(this,e,!0),n=this.Wc.map((function(e){return my(e,t)})),r=new Dc(n);return new jc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($m),hy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e)).Gc=r,i}return _createClass(n,[{key:"_toFieldTransform",value:function(e){var t=new Mc(e.k,Ec(e.k,this.Gc));return new jc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}($m);function dy(e,t,n,r){var i=e.Qc(1,t,n);ky("Data must be an object, but it was:",i,r);var a=[],o=Uu.empty();au(r,(function(e,r){var s=wy(t,e,n);r=Rn(r);var u=i.Bc(s);if(r instanceof sy)a.push(s);else{var c=my(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new fu(a);return new ty(o,s,i.fieldTransforms)}function py(e,t,n,r,i,a){var o=e.Qc(1,t,n),s=[_y(t,r,n)],u=[i];if(a.length%2!=0)throw new Vs(js.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(_y(t,a[c])),u.push(a[c+1]);for(var l=[],f=Uu.empty(),h=s.length-1;h>=0;--h)if(!Cy(l,s[h])){var d=s[h],p=u[h];p=Rn(p);var v=o.Bc(d);if(p instanceof sy)l.push(d);else{var m=my(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new fu(l);return new ty(f,y,o.fieldTransforms)}function vy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return my(n,e.Qc(r?4:3,t))}function my(e,t){if(gy(e=Rn(e)))return ky("Unsupported field value:",t,e),yy(e,t);if(e instanceof $m)return function(e,t){if(!ny(t.$c))throw t.qc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.qc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.$c)throw t.qc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=_createForOfIteratorHelper(e);try{for(a.s();!(n=a.n()).done;){var o=my(n.value,t.Uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(e){a.e(e)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Rn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ec(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=nu.fromDate(e);return{timestampValue:Dl(t.k,n)}}if(e instanceof nu){var r=new nu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dl(t.k,r)}}if(e instanceof Zm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Jm)return{bytesValue:Ll(t.k,e._byteString)};if(e instanceof Dm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.qc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ul(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.qc("Unsupported field value: ".concat(Rm(e)))}(e,t)}function yy(e,t){var n={};return ou(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):au(e,(function(e,r){var i=my(r,t.Mc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function gy(e){return!("object"!=_typeof(e)||null===e||e instanceof Array||e instanceof Date||e instanceof nu||e instanceof Zm||e instanceof Jm||e instanceof Dm||e instanceof $m)}function ky(e,t,n){if(!gy(n)||!function(e){return"object"==_typeof(e)&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Rm(n);throw"an object"===r?t.qc(e+" a custom object"):t.qc(e+" "+r)}}function _y(e,t,n){if((t=Rn(t))instanceof Ym)return t._internalPath;if("string"==typeof t)return wy(e,t);throw Ty("Field path arguments must be of type string or ",e,!1,void 0,n)}var by=new RegExp("[~\\*/\\[\\]]");function wy(e,t,n){if(t.search(by)>=0)throw Ty("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return _construct(Ym,_toConsumableArray(t.split(".")))._internalPath}catch(r){throw Ty("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ty(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Vs(js.INVALID_ARGUMENT,s+e+u)}function Cy(e,t){return e.some((function(e){return e.isEqual(t)}))}var xy=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return _createClass(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Dm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Iy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Ey=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"data",value:function(){return _get(_getPrototypeOf(n.prototype),"data",this).call(this)}}]),n}(xy);function Iy(e,t){return"string"==typeof t?wy(e,t):t instanceof Ym?t._internalPath:t._delegate._internalPath}var Sy=function(){function e(t,n){_classCallCheck(this,e),this.hasPendingWrites=t,this.fromCache=n}return _createClass(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Ry=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a,o,s){var u;return _classCallCheck(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return _createClass(n,[{key:"exists",value:function(){return _get(_getPrototypeOf(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ay(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Iy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(xy),Ay=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _get(_getPrototypeOf(n.prototype),"data",this).call(this,e)}}]),n}(Ry),Oy=function(){function e(t,n,r,i){_classCallCheck(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sy(i.hasPendingWrites,i.fromCache),this.query=r}return _createClass(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ay(n._firestore,n._userDataWriter,r.key,r,new Sy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Vs(js.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Ay(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ay(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Ny(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Ny(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ms()}}function Py(e,t){return e instanceof Ry&&t instanceof Ry?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Oy&&t instanceof Oy&&e._firestore===t._firestore&&Vm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Dy(e){if(fc(e)&&0===e.explicitOrderBy.length)throw new Vs(js.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ly=_createClass((function e(){_classCallCheck(this,e)}));function My(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Fy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this)).zc=e,a.Hc=r,a.Jc=i,a.type="where",a}return _createClass(n,[{key:"_apply",value:function(e){var t=ay(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Vs(js.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){zy(o,a);var u,c=[],l=_createForOfIteratorHelper(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(By(r,e,f))}}catch(e){l.e(e)}finally{l.f()}s={arrayValue:{values:c}}}else s=By(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||zy(o,a),s=vy(n,"where",o,"in"===a||"not-in"===a);var h=Wu.create(i,a,s);return function(e,t){if(t.V()){var n=dc(e);if(null!==n&&!n.isEqual(t.field))throw new Vs(js.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=hc(e);null!==r&&Hy(0,t.field,r)}var i=function(e,t){var n,r=_createForOfIteratorHelper(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(e){r.e(e)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Vs(js.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Vs(js.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Lm(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Ly),Uy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this)).zc=e,i.Yc=r,i.type="orderBy",i}return _createClass(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Vs(js.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Vs(js.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new rc(t,n);return function(e,t){if(null===hc(e)){var n=dc(e);null!==n&&Hy(0,n,t.field)}}(e,r),r}(e._query,this.zc,this.Yc);return new Lm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new sc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Ly),jy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this)).type=e,a.Xc=r,a.Zc=i,a}return _createClass(n,[{key:"_apply",value:function(e){return new Lm(e.firestore,e.converter,yc(e._query,this.Xc,this.Zc))}}]),n}(Ly),Vy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this)).type=e,a.ta=r,a.ea=i,a}return _createClass(n,[{key:"_apply",value:function(e){var t=qy(e,this.type,this.ta,this.ea);return new Lm(e.firestore,e.converter,function(e,t){return new sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Ly),Gy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this)).type=e,a.ta=r,a.ea=i,a}return _createClass(n,[{key:"_apply",value:function(e){var t=qy(e,this.type,this.ta,this.ea);return new Lm(e.firestore,e.converter,function(e,t){return new sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Ly);function qy(e,t,n,r){if(n[0]=Rn(n[0]),n[0]instanceof xy)return function(e,t,n,r,i){if(!r)throw new Vs(js.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=_createForOfIteratorHelper(vc(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Ou(t,r.key));else{var c=r.data.field(u.field);if(yu(c))throw new Vs(js.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Vs(js.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(e){s.e(e)}finally{s.f()}return new tc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ay(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Vs(js.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Vs(js.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(_typeof(c)));if(!pc(e)&&-1!==c.indexOf("/"))throw new Vs(js.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(uu.fromString(c));if(!Tu.isDocumentKey(l))throw new Vs(js.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Tu(l);s.push(Ou(t,f))}else{var h=vy(n,r,c);s.push(h)}}return new tc(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function By(e,t,n){if("string"==typeof(n=Rn(n))){if(""===n)throw new Vs(js.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pc(t)&&-1!==n.indexOf("/"))throw new Vs(js.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(uu.fromString(n));if(!Tu.isDocumentKey(r))throw new Vs(js.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ou(e,new Tu(r))}if(n instanceof Dm)return Ou(e,n._key);throw new Vs(js.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Rm(n),"."))}function zy(e,t){if(!Array.isArray(e)||0===e.length)throw new Vs(js.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Vs(js.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Hy(e,t,n){if(!n.isEqual(t))throw new Vs(js.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Wy=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ms()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return au(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Zm(vu(e.latitude),vu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=gu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ku(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=pu(e);return new nu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=uu.fromString(e);Fs(lf(n));var r=new Tm(n.get(1),n.get(3)),i=new Tu(n.popFirst(5));return r.isEqual(t)||Ps("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Ky(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Qy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).firestore=e,r}return _createClass(n,[{key:"convertBytes",value:function(e){return new Jm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dm(this.firestore,null,t)}}]),n}(Wy),Yy=function(){function e(t,n){_classCallCheck(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ay(t)}return _createClass(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Jy(e,this._firestore),i=Ky(r.converter,t,n),a=oy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Gc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Jy(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Rn(t))||t instanceof Ym?py(this._dataReader,"WriteBatch.update",i._key,t,n,o):dy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Gc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Jy(e,this._firestore);return this._mutations=this._mutations.concat(new nl(t._key,Gc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Vs(js.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Jy(e,t){if((e=Rn(e)).firestore!==t)throw new Vs(js.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function $y(e){e=Am(e,Dm);var t=Am(e.firestore,zm);return _m(Hm(t),e._key).then((function(n){return rg(t,e,n)}))}var Zy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).firestore=e,r}return _createClass(n,[{key:"convertBytes",value:function(e){return new Jm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dm(this.firestore,null,t)}}]),n}(Wy);function Xy(e,t,n){e=Am(e,Dm);var r=Am(e.firestore,zm),i=Ky(e.converter,t,n);return ng(r,[oy(ay(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gc.none())])}function eg(e,t,n){e=Am(e,Dm);for(var r=Am(e.firestore,zm),i=ay(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return ng(r,[("string"==typeof(t=Rn(t))||t instanceof Ym?py(i,"updateDoc",e._key,t,n,o):dy(i,"updateDoc",e._key,t)).toMutation(e._key,Gc.exists(!0))])}function tg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Rn(e);var s={includeMetadataChanges:!1},u=0;"object"!=_typeof(n[u])||qm(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(qm(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Dm)l=Am(e.firestore,zm),f=cc(e._key.path),c={next:function(t){n[u]&&n[u](rg(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Am(e,Lm);l=Am(p.firestore,zm),f=p._query;var v=new Zy(l);c={next:function(e){n[u]&&n[u](new Oy(l,v,p,e))},error:n[u+1],complete:n[u+2]},Dy(e._query)}return function(e,t,n,r){var i=new tm(r),a=new Jp(t,i,n);return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Bp,t.next=3,gm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.nc(),e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Hp,t.next=3,gm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Hm(l),f,h,c)}function ng(e,t){return function(e,t){var n=new Gs;return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function r(){return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yv(t),e.prev=1,e.next=4,function(e,t){var n,r=Us(e),i=nu.now(),a=t.reduce((function(e,t){return e.add(t.key)}),kl());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,s=[],u=_createForOfIteratorHelper(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Wc(c,n.get(c.key));null!=l&&s.push(new Jc(c.key,l,ju(l.value.mapValue),Gc.exists(!0)))}}catch(e){u.e(e)}finally{u.f()}return r.An.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new sl(Xs)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Rv(i,a.changes);case 9:return e.next=11,mp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Fp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ym(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Hm(e),t)}function rg(e,t,n){var r=n.docs.get(t._key),i=new Zy(e);return new Ry(e,i,t._key,r,new Sy(n.hasPendingWrites,n.fromCache),t.converter)}var ig=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r))._firestore=e,i}return _createClass(n,[{key:"get",value:function(e){var t=this,r=Jy(e,this._firestore),i=new Zy(this._firestore);return _get(_getPrototypeOf(n.prototype),"get",this).call(this,e).then((function(e){return new Ry(t._firestore,i,r._key,e._document,new Sy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){_classCallCheck(this,e),this._firestore=t,this._transaction=n,this._dataReader=ay(t)}return _createClass(e,[{key:"get",value:function(e){var t=this,n=Jy(e,this._firestore),r=new Qy(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ms();var i=e[0];if(i.isFoundDocument())return new xy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new xy(t._firestore,r,n._key,null,n.converter);throw Ms()}))}},{key:"set",value:function(e,t,n){var r=Jy(e,this._firestore),i=Ky(r.converter,t,n),a=oy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Jy(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Rn(t))||t instanceof Ym?py(this._dataReader,"Transaction.update",i._key,t,n,o):dy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Jy(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function ag(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Vs("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function og(){if("undefined"==typeof Uint8Array)throw new Vs("unimplemented","Uint8Arrays are not available in this environment.")}function sg(){if("undefined"==typeof atob)throw new Vs("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Rs=e}(rr),$n(new On("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new zm(i,new Hs(e.getProvider("auth-internal")),new Ys(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),cr(Is,"3.4.4",e),cr(Is,"3.4.4","esm2017")}();var ug=function(){function e(t){_classCallCheck(this,e),this._delegate=t}return _createClass(e,[{key:"toBase64",value:function(){return sg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return og(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return sg(),new e(Jm.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return og(),new e(Jm.fromUint8Array(t))}}]),e}();function cg(e){return function(e,t){if("object"!=_typeof(e)||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var lg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Qm(e=Am(e,zm));var n=Hm(e),r=e._freezeSettings(),i=new Xv;return Km(n,i,new $v(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Qm(e=Am(e,zm));var t=Hm(e),n=e._freezeSettings(),r=new Xv;return Km(t,r,new Zv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Vs(js.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Gs;return e._queue.enqueueAndForgetEvenWhileRestricted(_asyncToGenerator(_regeneratorRuntime.mark((function n(){return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mf.Pt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Mf.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Qh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),fg=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Tm||(this._appCompat=t)}return _createClass(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ds("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Am(e,Pm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ds("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Ss.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[sn(JSON.stringify({alg:"none",type:"JWT"})),sn(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Vs(js.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Ss(u)}e._authCredentials=new zs(new qs(o,s))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue(_asyncToGenerator(_regeneratorRuntime.mark((function t(){var n,r;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pm(e);case 2:return n=t.sent,t.next=5,mm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Us(e);return t.Gr.delete(0),Yd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Hm(e=Am(e,zm)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue(_asyncToGenerator(_regeneratorRuntime.mark((function t(){var n,r;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pm(e);case 2:return n=t.sent,t.next=5,mm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Us(t)).Gr.add(0),e.next=4,$d(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Hm(e=Am(e,zm)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Em("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Gs;return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function n(){return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ap((r=Us(t)).remoteStore)||Ns("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Us(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Fp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),n.next=3,ym(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Hm(e=Am(e,zm)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new tm(t);return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Us(e).io.add(t),t.next()},t.next=3,gm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.nc(),e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Us(e).io.delete(t)},t.next=3,gm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Hm(e=Am(e,zm)),qm(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Vs("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new xg(this,Fm(this._delegate,e))}catch(e){throw yg(e,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new mg(this,Um(this._delegate,e))}catch(e){throw yg(e,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new wg(this,function(e,t){if(e=Am(e,Pm),xm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Vs(js.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Lm(e,null,function(e){return new sc(uu.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw yg(e,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t){return function(e,t){var n=new Gs;return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function r(){var i;return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return hm(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new im(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Hm(e=Am(e,zm)),(function(n){return t(new ig(e,n))}))}(this._delegate,(function(n){return e(new dg(t,n))}))}},{key:"batch",value:function(){var e=this;return Hm(this._delegate),new pg(new Yy(this._delegate,(function(t){return ng(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return function(e,t){var n=Hm(e=Am(e,zm)),r=new Bm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new nm(e,t)}(function(e,t){if(e instanceof Uint8Array)return em(e,t);if(e instanceof ArrayBuffer)return em(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Gd(t));e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r,i=Us(e);(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Us(e),r=Fl(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(ev(i)),a=new Xp(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,Rv(t,u.In,void 0);case 30:return e.next=32,function(e,t){var n=Us(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Ds("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])}))),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then((function(){i.sharedClientState.notifyBundleLoaded()}))},t.next=3,ym(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue(_asyncToGenerator(_regeneratorRuntime.mark((function n(){return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Us(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,vm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Hm(e=Am(e,zm)),t).then((function(t){return t?new Lm(e,null,t.query):null}))}(this._delegate,e).then((function(e){return e?new wg(t,e):null}))}}]),e}(),hg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).firestore=e,r}return _createClass(n,[{key:"convertBytes",value:function(e){return new ug(new Jm(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return mg.forKey(t,this.firestore,null)}}]),n}(Wy),dg=function(){function e(t,n){_classCallCheck(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new hg(t)}return _createClass(e,[{key:"get",value:function(e){var t=this,n=Eg(e);return this._delegate.get(n).then((function(e){return new _g(t._firestore,new Ry(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Eg(e);return n?(ag("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=Eg(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=Eg(e);return this._delegate.delete(t),this}}]),e}(),pg=function(){function e(t){_classCallCheck(this,e),this._delegate=t}return _createClass(e,[{key:"set",value:function(e,t,n){var r=Eg(e);return n?(ag("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=Eg(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=Eg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),vg=function(){function e(t,n,r){_classCallCheck(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return _createClass(e,[{key:"fromFirestore",value:function(e,t){var n=new Ay(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bg(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new hg(t),n),i.set(n,a)),a}}]),e}();vg.INSTANCES=new WeakMap;var mg=function(){function e(t,n){_classCallCheck(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new hg(t)}return _createClass(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new xg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new xg(this.firestore,Fm(this._delegate,e))}catch(e){throw yg(e,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Rn(e))instanceof Dm&&jm(this._delegate,e)}},{key:"set",value:function(e,t){t=ag("DocumentReference.set",t);try{return t?Xy(this._delegate,e,t):Xy(this._delegate,e)}catch(e){throw yg(e,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?eg(this._delegate,e):eg.apply(void 0,[this._delegate,e,t].concat(r))}catch(e){throw yg(e,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return ng(Am(e.firestore,zm),[new nl(e._key,Gc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=gg(n),a=kg(n,(function(t){return new _g(e.firestore,new Ry(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return tg(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null==e?void 0:e.source)?function(e){e=Am(e,Dm);var t=Am(e.firestore,zm),n=Hm(t),r=new Zy(t);return function(e,t){var n=new Gs;return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function r(){return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Us(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Vs(js.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Fp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,vm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Ry(t,r,e._key,n,new Sy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Am(e,Dm);var t=Am(e.firestore,zm);return _m(Hm(t),e._key,{source:"server"}).then((function(n){return rg(t,e,n)}))}(this._delegate):$y(this._delegate),t.then((function(e){return new _g(n.firestore,new Ry(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(vg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new Vs("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Dm(n._delegate,r,new Tu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Dm(n._delegate,r,t))}}]),e}();function yg(e,t,n){return e.message=e.message.replace(t,n),e}function gg(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==_typeof(r)&&!cg(r))return r}}catch(e){n.e(e)}finally{n.f()}return{}}function kg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=cg(e[0])?e[0]:cg(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _g=function(){function e(t,n){_classCallCheck(this,e),this._firestore=t,this._delegate=n}return _createClass(e,[{key:"ref",get:function(){return new mg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Py(this._delegate,e._delegate)}}]),e}(),bg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ms()}(void 0!==t),t}}]),n}(_g),wg=function(){function e(t,n){_classCallCheck(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new hg(t)}return _createClass(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,My(this._delegate,function(e,t,n){var r=t,i=Iy("where",e);return new Fy(i,r,n)}(t,n,r)))}catch(t){throw yg(t,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,My(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=Iy("orderBy",e);return new Uy(r,n)}(t,n)))}catch(t){throw yg(t,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,My(this._delegate,function(e){return Om("limit",e),new jy("limit",e,"F")}(t)))}catch(t){throw yg(t,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,My(this._delegate,function(e){return Om("limitToLast",e),new jy("limitToLast",e,"L")}(t)))}catch(t){throw yg(t,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,My(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vy("startAt",t,!0)}.apply(void 0,arguments)))}catch(e){throw yg(e,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,My(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vy("startAfter",t,!1)}.apply(void 0,arguments)))}catch(e){throw yg(e,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,My(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gy("endBefore",t,!0)}.apply(void 0,arguments)))}catch(e){throw yg(e,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,My(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gy("endAt",t,!1)}.apply(void 0,arguments)))}catch(e){throw yg(e,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Vm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null==e?void 0:e.source)?function(e){e=Am(e,Lm);var t=Am(e.firestore,zm),n=Hm(t),r=new Zy(t);return function(e,t){var n=new Gs;return e.asyncQueue.enqueueAndForget(_asyncToGenerator(_regeneratorRuntime.mark((function r(){return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cd(t,n,!0);case 3:i=e.sent,a=new rv(n,i.zn),o=a.Po(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=Fp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,vm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Oy(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Am(e,Lm);var t=Am(e.firestore,zm),n=Hm(t),r=new Zy(t);return bm(n,e._query,{source:"server"}).then((function(n){return new Oy(t,r,e,n)}))}(this._delegate):function(e){e=Am(e,Lm);var t=Am(e.firestore,zm),n=Hm(t),r=new Zy(t);return Dy(e._query),bm(n,e._query).then((function(n){return new Oy(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Cg(n.firestore,new Oy(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=gg(n),a=kg(n,(function(t){return new Cg(e.firestore,new Oy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return tg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(vg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Tg=function(){function e(t,n){_classCallCheck(this,e),this._firestore=t,this._delegate=n}return _createClass(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new bg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Cg=function(){function e(t,n){_classCallCheck(this,e),this._firestore=t,this._delegate=n}return _createClass(e,[{key:"query",get:function(){return new wg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new bg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Tg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new bg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Py(this._delegate,e._delegate)}}]),e}(),xg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return _createClass(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new mg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new mg(this.firestore,void 0===e?Um(this._delegate):Um(this._delegate,e))}catch(e){throw yg(e,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Am(e.firestore,zm),r=Um(e),i=Ky(e.converter,t);return ng(n,[oy(ay(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new mg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return jm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(vg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(wg);function Eg(e){return Am(e,Dm)}var Ig,Sg=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=_construct(Ym,n)}return _createClass(e,[{key:"isEqual",value:function(e){return(e=Rn(e))instanceof Ym&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(lu.keyField().canonicalString())}}]),e}(),Rg=function(){function e(t){_classCallCheck(this,e),this._delegate=t}return _createClass(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new cy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new sy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ly("arrayUnion",t)}.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fy("arrayRemove",t)}.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new hy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Ag={Firestore:fg,GeoPoint:Zm,Timestamp:nu,Blob:ug,Transaction:dg,WriteBatch:pg,DocumentReference:mg,DocumentSnapshot:_g,Query:wg,QueryDocumentSnapshot:bg,QuerySnapshot:Cg,CollectionReference:xg,FieldPath:Sg,FieldValue:Rg,setLogLevel:function(e){!function(e){As.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function Og(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(function(e,t){e.INTERNAL.registerComponent(new On("firestore-compat",(function(e){return function(e,t){return new fg(e,t,new lg)}(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())}),"PUBLIC").setServiceProps(Object.assign({},Ag)))})(Ig=yr),Ig.registerVersion("@firebase/firestore-compat","0.1.13"),Object.create,Object.create;var Ng=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pg=new gn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Dg=new Vn("@firebase/auth");function Lg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Dg.logLevel<=An.ERROR&&Dg.error.apply(Dg,["Auth (".concat(rr,"): ").concat(e)].concat(n))}function Mg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Vg.apply(void 0,[e].concat(n))}function Fg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vg.apply(void 0,[e].concat(n))}function Ug(e,t,n){var r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_defineProperty({},t,n));return new gn("auth","Firebase",r).create(t,{appName:e.name})}function jg(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Mg(e,"argument-error"),Ug(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function Vg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,a=n[0],o=_toConsumableArray(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(_toConsumableArray(o)))}return Pg.create.apply(Pg,[e].concat(n))}function Gg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw Vg.apply(void 0,[t].concat(r))}function qg(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Lg(t),new Error(t)}function Bg(e,t){e||qg(t)}var zg=new Map;function Hg(e){Bg(e instanceof Function,"Expected a class definition");var t=zg.get(e);return t?(Bg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,zg.set(e,t),t)}function Wg(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Kg(){return"http:"===Qg()||"https:"===Qg()}function Qg(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Yg=function(){function e(t,n){_classCallCheck(this,e),this.shortDelay=t,this.longDelay=n,Bg(n>t,"Short delay should be less than long delay!"),this.isMobile=fn()||pn()}return _createClass(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kg()||dn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Jg(e,t){Bg(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var $g=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void qg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void qg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void qg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Zg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xg=new Yg(3e4,6e4);function ek(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function tk(e,t,n,r){return nk.apply(this,arguments)}function nk(){return nk=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",rk(t,a,_asyncToGenerator(_regeneratorRuntime.mark((function e(){var a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Tn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=5,t._getAdditionalHeaders();case 5:return u=e.sent,e.abrupt("return",(u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),$g.fetch()(sk(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a))));case 7:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),nk.apply(this,arguments)}function rk(e,t,n){return ik.apply(this,arguments)}function ik(){return ik=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Zg),n),e.prev=2,a=new uk(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw ck(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=15;break}return e.abrupt("return",s);case 15:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=_slicedToArray(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=18;break}throw ck(t,"credential-already-in-use",s);case 18:if("EMAIL_EXISTS"!==f){e.next=20;break}throw ck(t,"email-already-in-use",s);case 20:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=23;break}throw Ug(t,d,h);case 23:Mg(t,d),e.next=31;break;case 26:if(e.prev=26,e.t0=e.catch(2),!(e.t0 instanceof yn)){e.next=30;break}throw e.t0;case 30:Mg(t,"network-request-failed");case 31:case"end":return e.stop()}}),e,null,[[2,26]])}))),ik.apply(this,arguments)}function ak(e,t,n,r){return ok.apply(this,arguments)}function ok(){return ok=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,tk(t,n,r,i,a);case 3:return o=e.sent,e.abrupt("return",("mfaPendingCredential"in o&&Mg(t,"multi-factor-auth-required",{_serverResponse:o}),o));case 5:case"end":return e.stop()}}),e)}))),ok.apply(this,arguments)}function sk(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Jg(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var uk=function(){function e(t){var n=this;_classCallCheck(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Fg(n.auth,"network-request-failed"))}),Xg.get())}))}return _createClass(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ck(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Fg(e,t,r);return i.customData._tokenResponse=n,i}function lk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function fk(e){return 1e3*Number(e)}function hk(e){var t=e.split("."),n=_slicedToArray(t,3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Lg("JWT malformed, contained fewer than 3 sections"),null;try{var o=function(e){try{return on.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(i);return o?JSON.parse(o):(Lg("Failed to decode base64 JWT payload"),null)}catch(e){return Lg("Caught error parsing JWT payload as JSON",e),null}}function dk(e,t){return pk.apply(this,arguments)}function pk(){return pk=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof yn&&function(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),pk.apply(this,arguments)}var vk=function(){function e(t){_classCallCheck(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}var t;return _createClass(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(_asyncToGenerator(_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",void("auth/network-request-failed"===e.t0.code&&this.schedule(!0)));case 8:this.schedule();case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})}]),e}(),mk=function(){function e(t,n){_classCallCheck(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return _createClass(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=lk(this.lastLoginAt),this.creationTime=lk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function yk(e){return gk.apply(this,arguments)}function gk(){return gk=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h,d,p;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,dk(t,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r,{idToken:i}));case 6:Gg(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Og(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=t.providerData,l=s,u=[].concat(_toConsumableArray(c.filter((function(e){return!l.some((function(t){return t.providerId===e.providerId}))}))),_toConsumableArray(l)),f=t.isAnonymous,h=!(t.email&&o.passwordHash||(null==u?void 0:u.length)),d=!!f&&h,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new mk(o.createdAt,o.lastLoginAt),isAnonymous:d},Object.assign(t,p);case 13:case"end":return e.stop()}}),e)}))),gk.apply(this,arguments)}var kk=function(){function e(){_classCallCheck(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}var t,n;return _createClass(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Gg(e.idToken,"internal-error"),Gg(void 0!==e.idToken,"internal-error"),Gg(void 0!==e.refreshToken,"internal-error");var t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){var t=hk(e);return Gg(t,"internal-error"),Gg(void 0!==t.exp,"internal-error"),Gg(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Gg(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired){e.next=13;break}if(!this.refreshToken){e.next=9;break}return e.next=6,this.refresh(t,this.refreshToken);case 6:e.t1=this.accessToken,e.next=10;break;case 9:e.t1=null;case 10:e.t0=e.t1,e.next=14;break;case 13:e.t0=this.accessToken;case 14:return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rk(t,{},_asyncToGenerator(_regeneratorRuntime.mark((function e(){var r,i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=sk(t,a,"/v1/token","key=".concat(o)),e.next=7,t._getAdditionalHeaders();case 7:return u=e.sent,e.abrupt("return",(u["Content-Type"]="application/x-www-form-urlencoded",$g.fetch()(s,{method:"POST",headers:u,body:r})));case 9:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return qg("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Gg("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Gg("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Gg("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function _k(e,t){Gg("string"==typeof e||void 0===e,"internal-error",{appName:t})}var bk=function(){function e(t){_classCallCheck(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Og(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new vk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new mk(a.createdAt||void 0,a.lastLoginAt||void 0)}var t,n,r,i;return _createClass(e,[{key:"getIdToken",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dk(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Gg(n=e.sent,this.auth,"internal-error"),e.t0=this.accessToken!==n,!e.t0){e.next=10;break}return this.accessToken=n,e.next=9,this.auth._persistUserIfCurrent(this);case 9:this.auth._notifyListenersIfCurrent(this);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getIdTokenResult",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Rn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Gg((a=hk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"==_typeof(a.firebase)?a.firebase:void 0,s=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:lk(fk(a.auth_time)),issuedAtTime:lk(fk(a.iat)),expirationTime:lk(fk(a.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 9:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})(this,e);var t}},{key:"reload",value:function(){return(e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rn(t),e.next=3,yk(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})(this);var e}},{key:"_assign",value:function(e){this!==e&&(Gg(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Gg(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e.t0=n,!e.t0){e.next=7;break}return e.next=7,yk(this);case 7:return e.next=9,this.auth._persistUserIfCurrent(this);case 9:r&&this.auth._notifyListenersIfCurrent(this);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"delete",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,dk(this,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,b=n.isAnonymous,w=n.providerData,T=n.stsTokenManager;Gg(k&&T,t,"internal-error");var C=kk.fromJSON(this.name,T);Gg("string"==typeof k,t,"internal-error"),_k(f,t.name),_k(h,t.name),Gg("boolean"==typeof _,t,"internal-error"),Gg("boolean"==typeof b,t,"internal-error"),_k(d,t.name),_k(p,t.name),_k(v,t.name),_k(m,t.name),_k(y,t.name),_k(g,t.name);var x=new e({uid:k,auth:t,email:h,emailVerified:_,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:C,createdAt:y,lastLoginAt:g});return w&&Array.isArray(w)&&(x.providerData=w.map((function(e){return Object.assign({},e)}))),m&&(x._redirectEventId=m),x}},{key:"_fromIdTokenResponse",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function t(n,r){var i,a,o,s=arguments;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new kk).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,yk(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),wk=function(){function e(){_classCallCheck(this,e),this.type="NONE",this.storage={}}var t,n,r,i;return _createClass(e,[{key:"_isAvailable",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"_set",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"_get",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_remove",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();wk.type="NONE";var Tk=wk;function Ck(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var xk=function(){function e(t,n,r){_classCallCheck(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ck(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ck("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}var t,n,r;return _createClass(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?bk._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:return this.persistence=t,e.abrupt("return",n?this.setCurrentUser(n):void 0);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Hg(Tk),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Hg(Tk),s=Ck(i,n.config.apiKey,n.name),u=null,c=_createForOfIteratorHelper(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=28;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=22;break}return d=bk._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",28);case 22:t.next=26;break;case 24:t.prev=24,t.t0=t.catch(14);case 26:t.next=12;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(10),c.e(t.t1);case 33:return t.prev=33,c.f(),t.finish(33);case 36:if(p=a.filter((function(e){return e._shouldAllowMigration})),!o._shouldAllowMigration||!p.length){t.next=48;break}if(o=p[0],t.t3=u,!t.t3){t.next=43;break}return t.next=43,o._set(s,u.toJSON());case 43:return t.next=45,Promise.all(r.map(function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 45:t.t2=new e(o,n,i),t.next=49;break;case 48:t.t2=new e(o,n,i);case 49:return t.abrupt("return",t.t2);case 50:case"end":return t.stop()}}),t,null,[[10,30,33,36],[14,24]])}))),function(e,n){return t.apply(this,arguments)})}]),e}();function Ek(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ak(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ik(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Nk(t))return"Blackberry";if(Pk(t))return"Webos";if(Sk(t))return"Safari";if((t.includes("chrome/")||Rk(t))&&!t.includes("edge/"))return"Chrome";if(Ok(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Ik(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/firefox\//i.test(e)}function Sk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Rk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/crios\//i.test(e)}function Ak(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/iemobile/i.test(e)}function Ok(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/android/i.test(e)}function Nk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/blackberry/i.test(e)}function Pk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/webos/i.test(e)}function Dk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/iphone|ipad|ipod/i.test(e)}function Lk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return Dk(e)||Ok(e)||Pk(e)||Nk(e)||/windows phone/i.test(e)||Ak(e)}function Mk(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ek(ln());break;case"Worker":t="".concat(Ek(ln()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(rr,"/").concat(r)}var Fk=function(){function e(t,n){_classCallCheck(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jk(this),this.idTokenSubscription=new jk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}var t,n,r,i,a,o,s,u,c,l,f,h,d,p;return _createClass(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Hg(t)),this._initializationPromise=this.queue(_asyncToGenerator(_regeneratorRuntime.mark((function r(){var i,a;return _regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!n._deleted,!r.t0){r.next=6;break}return r.next=4,xk.create(n,e);case 4:n.persistenceManager=r.sent,r.t0=!n._deleted;case 6:if(!r.t0){r.next=19;break}if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t1=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,n._deleted||(n._isInitialized=!0);case 19:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:(p=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,!this.currentUser&&!t){e.next=19;break}if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=13;break}return this._currentUser._assign(t),e.next=10,this.currentUser.getIdToken();case 10:e.t1=void e.sent,e.next=16;break;case 13:return e.next=15,this._updateCurrentUser(t);case 15:e.t1=void e.sent;case 16:e.t0=e.t1,e.next=20;break;case 19:e.t0=void 0;case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"initializeCurrentUser",value:(d=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null==r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null==o?void 0:o.user)||(r=o.user);case 12:if(!r){e.next=24;break}if(!r._redirectEventId){e.next=20;break}return Gg(this._popupRedirectResolver,this,"argument-error"),e.next=17,this.getOrInitRedirectPersistenceManager();case 17:e.t1=this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r),e.next=21;break;case 20:e.t1=this.reloadAndSetCurrentUserOrClear(r);case 21:e.t0=e.t1,e.next=25;break;case 24:e.t0=this.directlySetCurrentUser(null);case 25:return e.abrupt("return",e.t0);case 26:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"tryRedirectSignIn",value:(h=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e){return h.apply(this,arguments)})},{key:"reloadAndSetCurrentUserOrClear",value:(f=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yk(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===e.t0.code){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return f.apply(this,arguments)})},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:(l=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"updateCurrentUser",value:(c=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?Rn(t):null,e.abrupt("return",(n&&Gg(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"_updateCurrentUser",value:(u=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._deleted){e.next=2;break}return e.abrupt("return",(t&&Gg(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)}))))));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"signOut",value:(s=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.redirectPersistenceManager||this._popupRedirectResolver,!e.t0){e.next=4;break}return e.next=4,this._setRedirectUser(null);case 4:return e.abrupt("return",this._updateCurrentUser(null));case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"setPersistence",value:function(e){var t=this;return this.queue(_asyncToGenerator(_regeneratorRuntime.mark((function n(){return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Hg(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new gn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:(o=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"getOrInitRedirectPersistenceManager",value:(a=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Gg(n=t&&Hg(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,xk.create(this,[Hg(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_redirectUserForId",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._isInitialized,!e.t0){e.next=4;break}return e.next=4,this.queue(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 4:return e.abrupt("return",(null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)===t?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===t?this.redirectUser:null);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_persistUserIfCurrent",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Gg(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Gg(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mk(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={"X-Client-Version":this.clientVersion},e.abrupt("return",(this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function Uk(e){return Rn(e)}var jk=function(){function e(t){var n=this;_classCallCheck(this,e),this.auth=t,this.observer=null,this.addObserver=En((function(e){return n.observer=e}))}return _createClass(e,[{key:"next",get:function(){return Gg(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Vk(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gk(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var qk=function(){function e(t,n){_classCallCheck(this,e),this.providerId=t,this.signInMethod=n}return _createClass(e,[{key:"toJSON",value:function(){return qg("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return qg("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return qg("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return qg("not implemented")}}]),e}();function Bk(e,t){return zk.apply(this,arguments)}function zk(){return zk=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:resetPassword",ek(t,n)));case 1:case"end":return e.stop()}}),e)}))),zk.apply(this,arguments)}function Hk(e,t){return Wk.apply(this,arguments)}function Wk(){return Wk=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Wk.apply(this,arguments)}function Kk(e,t){return Qk.apply(this,arguments)}function Qk(){return Qk=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:sendOobCode",ek(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qk.apply(this,arguments)}var Yk=function(e){_inherits(i,e);var t,n,r=_createSuper(i);function i(e,t,n){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,i),(a=r.call(this,"password",n))._email=e,a._password=t,a._tenantId=o,a}return _createClass(i,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ak(t,"POST","/v1/accounts:signInWithPassword",ek(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ak(t,"POST","/v1/accounts:signInWithEmailLink",ek(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{email:this._email,oobCode:this._password}));case 5:Mg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_linkToIdToken",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Hk(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ak(t,"POST","/v1/accounts:signInWithEmailLink",ek(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Mg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new i(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new i(e,t,"emailLink",n)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),i}(qk);function Jk(e,t){return $k.apply(this,arguments)}function $k(){return $k=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ak(t,"POST","/v1/accounts:signInWithIdp",ek(t,n)));case 1:case"end":return e.stop()}}),e)}))),$k.apply(this,arguments)}var Zk=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return _createClass(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Jk(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Jk(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Jk(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mg("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Og(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(qk),Xk={USER_NOT_FOUND:"user-not-found"},e_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,"phone","phone")).params=e,r}return _createClass(n,[{key:"_getIdTokenResponse",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ak(t,"POST","/v1/accounts:signInWithPhoneNumber",ek(t,n)));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(e,this._makeVerificationRequest());var t}},{key:"_linkToIdToken",value:function(e,t){return(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ak(t,"POST","/v1/accounts:signInWithPhoneNumber",ek(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ck(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})(e,Object.assign({idToken:t},this._makeVerificationRequest()));var n}},{key:"_getReauthenticationResolver",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ak(t,"POST","/v1/accounts:signInWithPhoneNumber",ek(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),Xk));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(e,this._makeVerificationRequest());var t}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(qk),t_=function(){function e(t){var n,r,i,a,o,s;_classCallCheck(this,e);var u=Cn(xn(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Gg(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return _createClass(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Cn(xn(e)).link,n=t?Cn(xn(t)).deep_link_id:null,r=Cn(xn(e)).deep_link_id;return(r?Cn(xn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(t){return null}}}]),e}(),n_=function(){function e(){_classCallCheck(this,e),this.providerId=e.PROVIDER_ID}return _createClass(e,null,[{key:"credential",value:function(e,t){return Yk._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=t_.parseLink(t);return Gg(n,"argument-error"),Yk._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();n_.PROVIDER_ID="password",n_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var r_=function(){function e(t){_classCallCheck(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return _createClass(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),i_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).scopes=[],e}return _createClass(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return _toConsumableArray(this.scopes)}}]),n}(r_),a_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Gg(e.idToken||e.accessToken,"argument-error"),Zk._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return Gg("providerId"in t&&"signInMethod"in t,"argument-error"),Zk._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!(i||a||r||o))return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(t){return null}}}]),n}(i_),o_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"facebook.com")}return _createClass(n,null,[{key:"credential",value:function(e){return Zk._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(t){return null}}}]),n}(i_);o_.FACEBOOK_SIGN_IN_METHOD="facebook.com",o_.PROVIDER_ID="facebook.com";var s_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return _createClass(n,null,[{key:"credential",value:function(e,t){return Zk._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(t){return null}}}]),n}(i_);s_.GOOGLE_SIGN_IN_METHOD="google.com",s_.PROVIDER_ID="google.com";var u_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"github.com")}return _createClass(n,null,[{key:"credential",value:function(e){return Zk._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(t){return null}}}]),n}(i_);u_.GITHUB_SIGN_IN_METHOD="github.com",u_.PROVIDER_ID="github.com";var c_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i;return _classCallCheck(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return _createClass(n,[{key:"_getIdTokenResponse",value:function(e){return Jk(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Jk(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Jk(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(qk),l_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),Gg(e.startsWith("saml."),"argument-error"),t.call(this,e)}return _createClass(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=c_.fromJSON(e);return Gg(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return c_._create(r,n)}catch(t){return null}}}]),n}(r_),f_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"twitter.com")}return _createClass(n,null,[{key:"credential",value:function(e,t){return Zk._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(t){return null}}}]),n}(i_);function h_(e,t){return d_.apply(this,arguments)}function d_(){return d_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ak(t,"POST","/v1/accounts:signUp",ek(t,n)));case 1:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}f_.TWITTER_SIGN_IN_METHOD="twitter.com",f_.PROVIDER_ID="twitter.com";var p_=function(){function e(t){_classCallCheck(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}var t,n;return _createClass(e,null,[{key:"_fromIdTokenResponse",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function t(n,r,i){var a,o,s,u=arguments;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>3&&void 0!==u[3]&&u[3],t.next=3,bk._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=v_(i),t.abrupt("return",new e({user:o,providerId:s,_tokenResponse:i,operationType:r}));case 6:case"end":return t.stop()}}),t)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"_forOperation",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function t(n,r,i){var a;return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=v_(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}();function v_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var m_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var o,s;return _classCallCheck(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(_assertThisInitialized(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return _createClass(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(yn);function y_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if("auth/multi-factor-auth-required"===n.code)throw m_._fromErrorAndOperation(e,n,t,r);throw n}))}function g_(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function k_(e,t){return __.apply(this,arguments)}function __(){return __=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=dk,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",p_._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function b_(e,t,n){return w_.apply(this,arguments)}function w_(){return w_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yk(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",Gg(g_(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function T_(e,t){return C_.apply(this,arguments)}function C_(){return C_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=2,e.next=5,dk(t,y_(i,a,n,t),r);case 5:return Gg((o=e.sent).idToken,i,"internal-error"),Gg(s=hk(o.idToken),i,"internal-error"),u=s.sub,e.abrupt("return",(Gg(t.uid===u,i,"user-mismatch"),p_._forOperation(t,a,o)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&Mg(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),C_.apply(this,arguments)}function x_(e,t){return E_.apply(this,arguments)}function E_(){return E_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,y_(t,i,n);case 4:return a=e.sent,e.next=7,p_._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,e.t0=r,e.t0){e.next=12;break}return e.next=12,t._updateCurrentUser(o.user);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function I_(e,t){return S_.apply(this,arguments)}function S_(){return S_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x_(Uk(t),n));case 1:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}function R_(e,t){return A_.apply(this,arguments)}function A_(){return A_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rn(t),e.next=3,b_(!1,r,n.providerId);case 3:return e.abrupt("return",k_(r,n));case 4:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function O_(e,t){return N_.apply(this,arguments)}function N_(){return N_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T_(Rn(t),n));case 1:case"end":return e.stop()}}),e)}))),N_.apply(this,arguments)}var P_=function(){function e(t,n){_classCallCheck(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return _createClass(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?D_._fromServerResponse(e,t):Mg(e,"internal-error")}}]),e}(),D_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return _createClass(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(P_);function L_(e,t,n){var r;Gg((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Gg(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Gg(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Gg(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function M_(e,t){return F_.apply(this,arguments)}function F_(){return F_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rn(t),e.next=3,Bk(r,{oobCode:n});case 3:i=e.sent,a=i.requestType,e.t0=(Gg(a,r,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return Gg(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:Gg(i.mfaInfo,r,"internal-error");case 12:Gg(i.email,r,"internal-error");case 13:return o=null,e.abrupt("return",(i.mfaInfo&&(o=P_._fromServerResponse(Uk(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a}));case 15:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function U_(e,t,n){return j_.apply(this,arguments)}function j_(){return j_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uk(t),e.next=3,h_(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,p_._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function V_(e,t,n){return I_(Rn(e),n_.credential(t,n))}function G_(e,t,n){return q_.apply(this,arguments)}function q_(){return q_=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},n&&(a.email=n),r&&(a.password=r),e.next=9,dk(t,Hk(i,a));case 9:return o=e.sent,e.next=12,t._updateTokensIfNecessary(o,!0);case 12:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}var B_=_createClass((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),z_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a){var o;return _classCallCheck(this,n),(o=t.call(this,e,r,i)).username=a,o}return _createClass(n)}(B_),H_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e,"facebook.com",r)}return _createClass(n)}(B_),W_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return _createClass(n)}(z_),K_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){return _classCallCheck(this,n),t.call(this,e,"google.com",r)}return _createClass(n)}(B_),Q_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){return _classCallCheck(this,n),t.call(this,e,"twitter.com",r,i)}return _createClass(n)}(z_);function Y_(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=hk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new B_(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new H_(a,i);case"github.com":return new W_(a,i);case"google.com":return new K_(a,i);case"twitter.com":return new Q_(a,i,e.screenName||null);case"custom":case"anonymous":return new B_(a,null);default:return new B_(a,r,i)}}(n)}var J_=function(){function e(t,n){_classCallCheck(this,e),this.type=t,this.credential=n}return _createClass(e,[{key:"toJSON",value:function(){return{multiFactorSession:_defineProperty({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null==t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),$_=function(){function e(t,n,r){_classCallCheck(this,e),this.session=t,this.hints=n,this.signInResolver=r}var t;return _createClass(e,[{key:"resolveSignIn",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"_fromError",value:function(t,n){var r=Uk(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return P_._fromServerResponse(r,e)}));Gg(i.mfaPendingCredential,r,"internal-error");var o=J_._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var a,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,p_._fromIdTokenResponse(r,n.operationType,s);case 10:return u=e.sent,e.next=13,r._updateCurrentUser(u.user);case 13:return e.abrupt("return",u);case 14:return e.abrupt("return",(Gg(n.user,r,"internal-error"),p_._forOperation(n.user,n.operationType,s)));case 15:Mg(r,"internal-error");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}(),Z_=function(){function e(t){var n=this;_classCallCheck(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return P_._fromServerResponse(t.auth,e)})))}))}var t,n,r;return _createClass(e,[{key:"getSession",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=J_,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"enroll",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,dk(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"unenroll",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,dk(this.user,function(e,t){return tk(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ek(e,t))}(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),"auth/user-token-expired"===e.t0.code){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])}))),function(e){return t.apply(this,arguments)})}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),X_=new WeakMap,eb="__sak",tb=function(){function e(t,n){_classCallCheck(this,e),this.storageRetriever=t,this.type=n}return _createClass(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(eb,"1"),this.storage.removeItem(eb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),nb=function(e){_inherits(i,e);var t,n,r=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=r.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ln();return Sk(e)||Dk(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Lk(),e._shouldAllowMigration=!0,e}return _createClass(i,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);vn()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t?JSON.parse(t):t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_get(_getPrototypeOf(i.prototype),"_set",this).call(this,t,n);case 2:this.localCache[t]=JSON.stringify(n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_get",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_get(_getPrototypeOf(i.prototype),"_get",this).call(this,t);case 2:return n=e.sent,e.abrupt("return",(this.localCache[t]=JSON.stringify(n),n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())},{key:"_remove",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_get(_getPrototypeOf(i.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(tb);nb.type="LOCAL";var rb=nb,ib=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return _createClass(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(tb);ib.type="SESSION";var ab=ib,ob=function(){function e(t){_classCallCheck(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}var t;return _createClass(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u,c;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null==(s=this.handlersMap[a])?void 0:s.size){e.next=3;break}return e.abrupt("return");case 3:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,function(e){return Promise.all(e.map(function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}(u);case 7:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function sb(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ob.receivers=[];var ub=function(){function e(t){_classCallCheck(this,e),this.target=t,this.handlers=new Set}var t;return _createClass(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=sb("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function cb(){return window}function lb(){return void 0!==cb().WorkerGlobalScope&&"function"==typeof cb().importScripts}var fb="firebaseLocalStorageDb",hb="firebaseLocalStorage",db="fbase_key",pb=function(){function e(t){_classCallCheck(this,e),this.request=t}return _createClass(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function vb(e,t){return e.transaction([hb],t?"readwrite":"readonly").objectStore(hb)}function mb(){var e=indexedDB.open(fb,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(hb,{keyPath:db})}catch(e){n(e)}})),e.addEventListener("success",_asyncToGenerator(_regeneratorRuntime.mark((function n(){var r;return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains(hb)){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase(fb);return new pb(e).toPromise()}();case 8:return n.t0=t,n.next=11,mb();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}}),n)}))))}))}function yb(e,t,n){return gb.apply(this,arguments)}function gb(){return gb=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vb(t,!0).put((_defineProperty(i={},db,n),_defineProperty(i,"value",r),i)),e.abrupt("return",new pb(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}function kb(e,t){var n=vb(e,!0).delete(t);return new pb(n).toPromise()}var _b=function(){function e(){_classCallCheck(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}var t,n,r,i,a,o,s,u,c,l,f,h;return _createClass(e,[{key:"_openDb",value:(h=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=5;break}return e.next=4,mb();case 4:this.db=e.sent;case 5:return e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"_withRetries",value:(f=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=1,e.next=4,this._openDb();case 4:return r=e.sent,e.next=7,t(r);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(1),!(n++>3)){e.next=14;break}throw e.t0;case 14:this.db&&(this.db.close(),this.db=void 0);case 15:e.next=1;break;case 17:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return f.apply(this,arguments)})},{key:"initializeServiceWorkerMessaging",value:(l=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lb()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"initializeReceiver",value:(c=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ob._getInstance(lb()?self:null),this.receiver._subscribe("keyChanged",function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(n,r){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return e.t0=e.sent.includes(r.key),e.abrupt("return",{keyProcessed:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"initializeSender",value:(u=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ub(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:(r=e.sent)&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 10:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"notifyServiceWorker",value:(s=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sender||!this.activeServiceWorker||function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()!==this.activeServiceWorker){e.next=8;break}return e.prev=1,e.next=4,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e){return s.apply(this,arguments)})},{key:"_isAvailable",value:(o=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,mb();case 5:return t=e.sent,e.next=8,yb(t,eb,"1");case 8:return e.next=10,kb(t,eb);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),function(){return o.apply(this,arguments)})},{key:"_withPendingWrite",value:(a=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])}))),function(e){return a.apply(this,arguments)})},{key:"_set",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return yb(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"_get",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vb(t,!1).get(n),e.next=3,new pb(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})(e,t);var n}));case 2:return n=e.sent,e.abrupt("return",(this.localCache[t]=n,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_remove",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return kb(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_poll",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=vb(e,!1).getAll();return new pb(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=_createForOfIteratorHelper(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(e){i.e(e)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(_asyncToGenerator(_regeneratorRuntime.mark((function t(){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();_b.type="LOCAL";var bb=_b;function wb(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Fg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Tb(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Cb=1e12,xb=function(){function e(t){_classCallCheck(this,e),this.auth=t,this.counter=Cb,this._widgets=new Map}var t;return _createClass(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Eb(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Cb;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Cb;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Cb,e.abrupt("return",(null===(n=this._widgets.get(r))||void 0===n||n.execute(),""));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Eb=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;Gg(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return _createClass(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(n){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(e){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),Ib=Tb("rcb"),Sb=new Yg(3e4,6e4),Rb=function(){function e(){_classCallCheck(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cb().grecaptcha}return _createClass(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Gg(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(cb().grecaptcha):new Promise((function(r,i){var a=cb().setTimeout((function(){i(Fg(e,"network-request-failed"))}),Sb.get());cb()[Ib]=function(){cb().clearTimeout(a),delete cb()[Ib];var o=cb().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Fg(e,"internal-error"))},wb("https://www.google.com/recaptcha/api.js??".concat(Tn({onload:Ib,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Fg(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!cb().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),Ab=function(){function e(){_classCallCheck(this,e)}var t;return _createClass(e,[{key:"load",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new xb(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"clearedOneInstance",value:function(){}}]),e}(),Ob="recaptcha",Nb={theme:"light",type:"image"},Pb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Nb),r=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,e),this.parameters=n,this.type=Ob,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Uk(r),this.isInvisible="invisible"===this.parameters.size,Gg("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;Gg(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ab:new Rb,this.validateStartingState()}var t,n,r;return _createClass(e,[{key:"verify",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n,r=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:return t=e.sent,n=this.getAssertedRecaptcha(),e.abrupt("return",n.getResponse(t)||new Promise((function(e){r.tokenChangeListeners.add((function t(n){n&&(r.tokenChangeListeners.delete(t),e(n))})),r.isInvisible&&n.execute(t)})));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Gg(!this.parameters.sitekey,this.auth,"argument-error"),Gg(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Gg("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"==typeof e)e(n);else if("string"==typeof e){var r=cb()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Gg(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:if(this.widgetId){e.next=6;break}t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters);case 6:return e.abrupt("return",this.widgetId);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"init",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gg(Kg()&&!lb(),this.auth,"internal-error"),e.next=3,function(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tk(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.auth);case 8:Gg(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getAssertedRecaptcha",value:function(){return Gg(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),Db=function(){function e(t,n){_classCallCheck(this,e),this.verificationId=t,this.onConfirmation=n}return _createClass(e,[{key:"confirm",value:function(e){var t=e_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Lb(e,t,n){return Mb.apply(this,arguments)}function Mb(){return Mb=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Gg("string"==typeof a,t,"argument-error"),Gg(r.type===Ob,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=19;break}if(s=o.session,!("phoneNumber"in o)){e.next=12;break}return Gg("enroll"===s.type,t,"internal-error"),e.next=10,function(e,t){return tk(e,"POST","/v2/accounts/mfaEnrollment:start",ek(e,t))}(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 10:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 12:return Gg("signin"===s.type,t,"internal-error"),Gg(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=17,function(e,t){return tk(e,"POST","/v2/accounts/mfaSignIn:start",ek(e,t))}(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 17:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 19:return e.next=21,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:sendVerificationCode",ek(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 21:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 24:return e.prev=24,r._reset(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[3,,24,27]])}))),Mb.apply(this,arguments)}var Fb=function(){function e(t){_classCallCheck(this,e),this.providerId=e.PROVIDER_ID,this.auth=Uk(t)}return _createClass(e,[{key:"verifyPhoneNumber",value:function(e,t){return Lb(this.auth,e,Rn(t))}}],[{key:"credential",value:function(e,t){return e_._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?e_._fromTokenResponse(n,r):null}}]),e}();function Ub(e,t){return t?Hg(t):(Gg(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Fb.PROVIDER_ID="phone",Fb.PHONE_SIGN_IN_METHOD="phone";var jb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,"custom","custom")).params=e,r}return _createClass(n,[{key:"_getIdTokenResponse",value:function(e){return Jk(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Jk(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Jk(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(qk);function Vb(e){return x_(e.auth,new jb(e),e.bypassAuthState)}function Gb(e){var t=e.auth,n=e.user;return Gg(n,t,"internal-error"),T_(n,new jb(e),e.bypassAuthState)}function qb(e){return Bb.apply(this,arguments)}function Bb(){return Bb=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(Gg(r,n,"internal-error"),k_(r,new jb(t),t.bypassAuthState)));case 2:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}var zb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}var t;return _createClass(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(_regeneratorRuntime.mark((function t(n,r){return _regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=3;break}return e.abrupt("return",void this.reject(o));case 3:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=4,e.t0=this,e.next=8,this.getIdpTask(s)(u);case 8:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(4),this.reject(e.t2);case 15:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(e){return t.apply(this,arguments)})},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vb;case"linkViaPopup":case"linkViaRedirect":return qb;case"reauthViaPopup":case"reauthViaRedirect":return Gb;default:Mg(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Bg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Bg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Hb=new Yg(2e3,1e4);function Wb(e,t,n){return Kb.apply(this,arguments)}function Kb(){return Kb=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uk(t),jg(t,n,r_),a=Ub(i,r),e.abrupt("return",new Qb(i,"signInViaPopup",n,a).executeNotNull());case 4:case"end":return e.stop()}}),e)}))),Kb.apply(this,arguments)}var Qb=function(e){_inherits(i,e);var t,n,r=_createSuper(i);function i(e,t,n,a,o){var s;return _classCallCheck(this,i),(s=r.call(this,e,t,a,o)).provider=n,s.authWindow=null,s.pollId=null,i.currentPopupAction&&i.currentPopupAction.cancel(),i.currentPopupAction=_assertThisInitialized(s),s}return _createClass(i,[{key:"executeNotNull",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return t=e.sent,e.abrupt("return",(Gg(t,this.auth,"internal-error"),t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onExecution",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n=this;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bg(1===this.filter.length,"Popup operations only handle one event"),t=sb(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Fg(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Fg(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,i.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Fg(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Hb.get())}()}}]),i}(zb);Qb.currentPopupAction=null;var Yb=new Map,Jb=function(e){_inherits(a,e);var t,n,r,i=_createSuper(a);function a(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,a),(n=i.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r)).eventId=null,n}return _createClass(a,[{key:"execute",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t,n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Yb.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ew(n),i=Xb(t),e.next=3,i._isAvailable();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,i._get(r);case 7:return e.t0=e.sent,a="true"===e.t0,e.next=11,i._remove(r);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,_get(_getPrototypeOf(a.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:n=e.t0,t=function(){return Promise.resolve(n)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Yb.set(this.auth._key(),t);case 21:return e.abrupt("return",(this.bypassAuthState||Yb.set(this.auth._key(),(function(){return Promise.resolve(null)})),t()));case 22:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(){return r.apply(this,arguments)})},{key:"onAuthEvent",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=2;break}return e.abrupt("return",_get(_getPrototypeOf(a.prototype),"onAuthEvent",this).call(this,t));case 2:if("unknown"===t.type){e.next=12;break}if(!t.eventId){e.next=10;break}return e.next=6,this.auth._redirectUserForId(t.eventId);case 6:if(!(n=e.sent)){e.next=9;break}return e.abrupt("return",(this.user=n,_get(_getPrototypeOf(a.prototype),"onAuthEvent",this).call(this,t)));case 9:this.resolve(null);case 10:e.next=13;break;case 12:this.resolve(null);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onExecution",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"cleanUp",value:function(){}}]),a}(zb);function $b(e,t){return Zb.apply(this,arguments)}function Zb(){return Zb=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t)._set(ew(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function Xb(e){return Hg(e._redirectPersistence)}function ew(e){return Ck("pendingRedirect",e.config.apiKey,e.name)}function tw(e,t){return nw.apply(this,arguments)}function nw(){return nw=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Uk(t),a=Ub(i,n),o=new Jb(i,a,r),e.next=6,o.execute();case 6:if(s=e.sent,e.t0=s&&!r,!e.t0){e.next=14;break}return delete s.user._redirectEventId,e.next=12,i._persistUserIfCurrent(s.user);case 12:return e.next=14,i._setRedirectUser(null,n);case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)}))),nw.apply(this,arguments)}function rw(e){return iw.apply(this,arguments)}function iw(){return iw=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sb("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}var aw=function(){function e(t){_classCallCheck(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return _createClass(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sw(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!sw(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fg(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ow(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ow(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ow(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function sw(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function uw(e){return cw.apply(this,arguments)}function cw(){return cw=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r=arguments;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",tk(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}var lw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fw=/^https?/;function hw(e){var t=Wg(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!fw.test(r))return!1;if(lw.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var dw=new Yg(3e4,6e4);function pw(){var e=cb().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=_toConsumableArray(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var vw=null;function mw(e){return vw=vw||function(e){return new Promise((function(t,n){var r,i,a;function o(){pw(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){pw(),n(Fg(e,"network-request-failed"))},timeout:dw.get()})}if(null===(i=null===(r=cb().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=cb().gapi)||void 0===a?void 0:a.load)){var s=Tb("iframefcb");return cb()[s]=function(){gapi.load?o():n(Fg(e,"network-request-failed"))},wb("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw vw=null,e}))}(e),vw}var yw=new Yg(5e3,15e3),gw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _w(e){var t=e.config;Gg(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Jg(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:rr},i=kw.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Tn(r).slice(1))}var bw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ww=function(){function e(t){_classCallCheck(this,e),this.window=t,this.associatedEvent=null}return _createClass(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Tw(e,t,n,r,i,a){Gg(e.config.authDomain,e,"auth-domain-config-required"),Gg(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rr,eventId:i};if(t instanceof r_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=_slicedToArray(u[s],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof i_){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var m=v[p];void 0===d[m]&&delete d[m]}return"".concat(function(e){var t=e.config;return t.emulator?Jg(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/__/auth/handler")}(e),"?").concat(Tn(d).slice(1))}var Cw="webStorageSupport",xw=function(){function e(){_classCallCheck(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ab,this._completeRedirectFn=tw}var t,n,r;return _createClass(e,[{key:"_openPopup",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Bg(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},bw),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ln().toLowerCase();n&&(s=Rk(c)?"_blank":n),Ik(c)&&(t=t||"http://localhost",u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=_slicedToArray(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return Dk(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new ww(null);var f=window.open(t||"",s,l);Gg(f,e,"popup-blocked");try{f.focus()}catch(e){}return new ww(f)}(t,Tw(t,n,r,Wg(),i),sb())));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"_openRedirect",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Tw(t,n,r,Wg(),i),cb().location.href=a,e.abrupt("return",new Promise((function(){})));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Bg(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mw(t);case 2:return n=e.sent,r=cb().gapi,e.abrupt("return",(Gg(r,t,"internal-error"),n.open({where:document.body,url:_w(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gw,dontclear:!0},(function(e){return new Promise(function(){var n=_asyncToGenerator(_regeneratorRuntime.mark((function n(r,i){var a,o,s;return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){cb().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Fg(t,"network-request-failed"),o=cb().setTimeout((function(){i(a)}),yw.get()),e.ping(s).then(s,(function(){i(a)}));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}))));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:return n=e.sent,r=new aw(t),e.abrupt("return",(n.register("authEvent",(function(e){return Gg(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Cw,{type:Cw},(function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Mg(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t,n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uw(t);case 4:n=e.sent,r=n.authorizedDomains,i=_createForOfIteratorHelper(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!hw(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Mg(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),function(e){return t.apply(this,arguments)})(e)),this.originValidationPromises[n]}},{key:"_shouldInitProactively",get:function(){return Lk()||Sk()||Dk()}}]),e}(),Ew=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,"phone")).credential=e,r}return _createClass(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return tk(e,"POST","/v2/accounts/mfaEnrollment:finalize",ek(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return tk(e,"POST","/v2/accounts/mfaSignIn:finalize",ek(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){_classCallCheck(this,e),this.factorId=t}return _createClass(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return qg("unexpected MultiFactorSessionType")}}}]),e}()),Iw=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"assertion",value:function(e){return Ew._fromCredential(e)}}]),e}();Iw.FACTOR_ID="phone";var Sw,Rw="@firebase/auth",Aw="0.19.7",Ow=function(){function e(t){_classCallCheck(this,e),this.auth=t,this.internalListeners=new Map}var t;return _createClass(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(!this.auth.currentUser){e.next=10;break}return e.next=6,this.auth.currentUser.getIdToken(t);case 6:e.t1=e.sent,e.t0={accessToken:e.t1},e.next=11;break;case 10:e.t0=null;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Gg(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Nw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar(),t=Zn(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){var n=Zn(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(bn(n.getOptions(),null!=t?t:{}))return r;Mg(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:xw,persistence:[bb,rb,ab]})}function Pw(){return window}Sw="Browser",$n(new On("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Gg(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Gg(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:Sw,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mk(Sw)},r=new Fk(e,t);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hg);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),$n(new On("auth-internal",(function(e){return function(e){return new Ow(e)}(Uk(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),cr(Rw,Aw,void 0),cr(Rw,Aw,"esm2017");var Dw=function(e){_inherits(r,e);var t,n=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=n.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return _createClass(r,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),_get(_getPrototypeOf(r.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(aw);function Lw(e){return Mw.apply(this,arguments)}function Mw(){return Mw=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uw()._get(jw(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,Uw()._remove(jw(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Uw(){return Hg(rb)}function jw(e){return Ck("authEvent",e.config.apiKey,e.name)}function Vw(e){if(!(null==e?void 0:e.includes("?")))return{};var t=e.split("?"),n=_toArray(t);return n[0],Cn(n.slice(1).join("?"))}function Gw(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fg("no-auth-event")}}function qw(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Bw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return!("file:"!==qw()&&"ionic:"!==qw()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function zw(){try{var e=self.localStorage,t=sb();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return vn()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/Edge\/\d+/.test(e)}(e)}()||mn()}catch(e){return Hw()&&mn()}return!1}function Hw(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ww(){return("http:"===qw()||"https:"===qw()||dn()||Bw())&&!(pn()||hn())&&zw()&&!Hw()}function Kw(){return Bw()&&"undefined"!=typeof document}var Qw={LOCAL:"local",NONE:"none",SESSION:"session"},Yw=Gg,Jw="persistence";function $w(e){return Zw.apply(this,arguments)}function Zw(){return Zw=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Xw(),r=Ck(Jw,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function Xw(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}var eT=Gg,tT=function(){function e(){_classCallCheck(this,e),this.browserResolver=Hg(xw),this.cordovaResolver=Hg(function(){function e(){_classCallCheck(this,e),this._redirectPersistence=ab,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tw}var t,n;return _createClass(e,[{key:"_initialize",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),r=this.eventManagers.get(n),e.abrupt("return",(r||(r=new Dw(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),r));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_openPopup",value:function(e){Mg(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){var a,o,s;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return function(e){var t,n,r,i,a,o,s,u,c,l,f=Pw();Gg("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Gg(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Gg("function"==typeof(null===(a=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Gg("function"==typeof(null===(u=null===(s=null===(o=null==f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Gg("function"==typeof(null===(l=null===(c=null==f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Yb.clear(),e.next=10,this._originValidation(t);case 10:return o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Fw(),postBody:null,tenantId:e.tenantId,error:Fg(e,"no-auth-event")}}(t,r,i),e.next=13,function(e,t){return Uw()._set(jw(e),t)}(t,o);case 13:return e.next=15,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pw(),o=a.BuildInfo,Bg(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){if(Bg(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(n.sessionId);case 4:return s=e.sent,u={},e.abrupt("return",(Dk()?u.ibi=o.packageName:Ok()?u.apn=o.packageName:Mg(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,Tw(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u)));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(t,o,n);case 15:return s=e.sent,e.t0=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pw(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Fg(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Ok()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),e.t1=t,e.t2=a,e.next=21,function(e){var t=Pw().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}(s);case 21:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 23:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t,n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pw(),r=n.BuildInfo,i={},Dk()?i.iosBundleId=r.packageName:Ok()?i.androidPackageName=r.packageName:Mg(t,"operation-not-supported-in-this-environment"),e.next=4,uw(t,i);case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})(e)),this.originValidationPromises[n]}},{key:"attachCallbackListeners",value:function(e,t){var n=Pw(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(_asyncToGenerator(_regeneratorRuntime.mark((function n(){return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Lw(e);case 2:t.onEvent(Gw());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=_asyncToGenerator(_regeneratorRuntime.mark((function n(r){var i,a;return _regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Lw(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=function(e,t){var n,r,i=function(e){var t=Vw(e),n=t.link?decodeURIComponent(t.link):void 0,r=Vw(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Vw(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Vw(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Fg(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(a||Gw());case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();void 0!==r&&"function"==typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Pw().handleOpenURL=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"==typeof u)try{u(t)}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=ab,this._completeRedirectFn=tw}var t,n,r,i;return _createClass(e,[{key:"_initialize",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_openPopup",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"_openRedirect",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r,i){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Kw()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return eT(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_asyncToGenerator(_regeneratorRuntime.mark((function e(){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!Kw()&&new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 1:case"end":return e.stop()}}),e)})))();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function nT(e){return e.unwrap()}function rT(e){var t=(e instanceof yn?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof yn)&&"temporaryProof"in t&&"phoneNumber"in t)return Fb.credentialFromResult(e);var n,r=t.providerId;if(!r||"password"===r)return null;switch(r){case"google.com":n=s_;break;case"facebook.com":n=o_;break;case"github.com":n=u_;break;case"twitter.com":n=f_;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?c_._create(r,s):Zk._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new a_(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof yn?n.credentialFromError(e):n.credentialFromResult(e)}function iT(e,t){return t.catch((function(t){throw t instanceof yn&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new sT(e,function(e,t){var n,r=Rn(e),i=t;return Gg(t.customData.operationType,r,"argument-error"),Gg(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),$_._fromError(r,i)}(e,t));else if(r){var i=rT(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,rT(t)),additionalUserInfo:Y_(e),user:uT.getOrCreate(r)}}))}function aT(e,t){return oT.apply(this,arguments)}function oT(){return oT=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return iT(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),oT.apply(this,arguments)}var sT=function(){function e(t,n){_classCallCheck(this,e),this.resolver=n,this.auth=t.wrapped()}return _createClass(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return iT(nT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),uT=function(){function e(t){_classCallCheck(this,e),this._delegate=t,this.multiFactor=function(e){var t=Rn(e);return X_.has(t)||X_.set(t,Z_._fromUser(t)),X_.get(t)}(t)}var t,n,r,i,a,o,s;return _createClass(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:(s=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iT(this.auth,R_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"linkWithPhoneNumber",value:(o=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(this.auth,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rn(t),e.next=3,b_(!1,i,"phone");case 3:return e.next=5,Lb(i.auth,n,Rn(r));case 5:return a=e.sent,e.abrupt("return",new Db(a,(function(e){return R_(i,e)})));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"linkWithPopup",value:(a=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iT(this.auth,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jg((i=Rn(t)).auth,n,r_),a=Ub(i.auth,r),e.abrupt("return",new Qb(i.auth,"linkViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,tT)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"linkWithRedirect",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$w(Uk(this.auth));case 2:return e.abrupt("return",function(e,t,n){return(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jg((i=Rn(t)).auth,n,r_),a=Ub(i.auth,r),e.next=5,b_(!1,i,n.providerId);case 5:return e.next=7,$b(a,i.auth);case 7:return e.next=9,rw(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)})(e,t,n);var r}(this._delegate,t,tT));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iT(this.auth,O_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return aT(this.auth,(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rn(t),e.next=3,Lb(i.auth,n,Rn(r));case 3:return a=e.sent,e.abrupt("return",new Db(a,(function(e){return O_(i,e)})));case 5:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this._delegate,e,t));var n}},{key:"reauthenticateWithPopup",value:function(e){return iT(this.auth,(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jg((i=Rn(t)).auth,n,r_),a=Ub(i.auth,r),e.abrupt("return",new Qb(i.auth,"reauthViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}}),e)}))),function(e,n,r){return t.apply(this,arguments)})(this._delegate,e,tT));var t}},{key:"reauthenticateWithRedirect",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$w(Uk(this.auth));case 2:return e.abrupt("return",function(e,t,n){return(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jg((i=Rn(t)).auth,n,r_),a=Ub(i.auth,r),e.next=5,$b(a,i.auth);case 5:return e.next=7,rw(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)})(e,t,n);var r}(this._delegate,t,tT));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"sendEmailVerification",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rn(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&L_(r.auth,i,n),e.next=8,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kk(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r.auth,i);case 8:if(a=e.sent,o=a.email,e.t1=o!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(this._delegate,e);var t}},{key:"unlink",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rn(t),e.next=3,b_(!0,r,n);case 3:return e.t0=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=g_(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateEmail",value:function(e){return function(e,t){return G_(Rn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return G_(Rn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k_(Rn(t),n);case 2:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(this._delegate,e);var t}},{key:"updateProfile",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s,u;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Rn(t),e.next=6,a.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,o={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,dk(a,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(a.auth,o));case 13:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(u=a.providerData.find((function(e){return"password"===e.providerId})))&&(u.displayName=a.displayName,u.photoURL=a.photoURL),e.next=19,a._updateTokensIfNecessary(s);case 19:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(this._delegate,e);var t}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a,o,s;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rn(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&L_(i.auth,a,r),e.next=9,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kk(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i.auth,a);case 9:if(o=e.sent,s=o.email,e.t2=s!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this._delegate,e,t);var n}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();uT.USER_MAP=new WeakMap;var cT=Gg,lT=function(){function e(t,n){if(_classCallCheck(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;cT(r,"invalid-api-key",{appName:t.name}),cT(r,"invalid-api-key",{appName:t.name});var i="undefined"!=typeof window?tT:void 0;this._delegate=n.initialize({options:{persistence:hT(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ng),this.linkUnderlyingAuth()}var t,n,r,i,a;return _createClass(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?uT.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){!function(e,t,n){var r=Uk(e);Gg(r._canInitEmulator,r,"emulator-config-failed"),Gg(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null==n?void 0:n.disableWarnings),a=Vk(t),o=function(e){var t=Vk(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Gk(r.substr(a.length+1))}}var o=r.split(":"),s=_slicedToArray(o,2);return{host:s[0],port:Gk(s[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:update",ek(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(Rn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(this._delegate,e);var t}},{key:"checkActionCode",value:function(e){return M_(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bk(Rn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this._delegate,e,t);var n}},{key:"createUserWithEmailAndPassword",value:(a=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iT(this._delegate,U_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:Kg()?Wg():"http://localhost"},e.next=3,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tk(t,"POST","/v1/accounts:createAuthUri",ek(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(Rn(t),r);case 3:return i=e.sent,a=i.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(this._delegate,e);var t}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=t_.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:(i=_asyncToGenerator(_regeneratorRuntime.mark((function e(){var t;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cT(Ww(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uk(t)._initializationPromise;case 2:return e.abrupt("return",tw(t,n,!1));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,tT);case 3:return t=e.sent,e.abrupt("return",t?iT(this._delegate,Promise.resolve(t)):{credential:null,user:null});case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Uk(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=fT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=fT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rn(t),a={requestType:"EMAIL_SIGNIN",email:n},Gg(r.handleCodeInApp,i,"argument-error"),r&&L_(i,a,r),e.next=5,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kk(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i,a);case 5:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this._delegate,e,t);var n}},{key:"sendPasswordResetEmail",value:function(e,t){return(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rn(t),a={requestType:"PASSWORD_RESET",email:n},r&&L_(i,a,r),e.next=4,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kk(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i,a);case 4:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this._delegate,e,t||void 0);var n}},{key:"setPersistence",value:(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=(function(e,t){Yw(Object.values(Qw).includes(t),e,"invalid-persistence-type"),pn()?Yw(t!==Qw.SESSION,e,"unsupported-persistence-type"):hn()?Yw(t===Qw.NONE,e,"unsupported-persistence-type"):Hw()?Yw(t===Qw.NONE||t===Qw.LOCAL&&mn(),e,"unsupported-persistence-type"):Yw(t===Qw.NONE||zw(),e,"unsupported-persistence-type")}(this._delegate,t),t),e.next=e.t0===Qw.SESSION?3:e.t0===Qw.LOCAL?5:e.t0===Qw.NONE?14:16;break;case 3:return n=ab,e.abrupt("break",17);case 5:return e.next=7,Hg(bb)._isAvailable();case 7:if(!e.sent){e.next=11;break}e.t1=bb,e.next=12;break;case 11:e.t1=rb;case 12:return n=e.t1,e.abrupt("break",17);case 14:return n=Tk,e.abrupt("break",17);case 16:return e.abrupt("return",Mg("argument-error",{appName:this._delegate.name}));case 17:return e.abrupt("return",this._delegate.setPersistence(n));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return iT(this._delegate,(e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n,r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uk(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new p_({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,h_(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,p_._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})(this._delegate));var e}},{key:"signInWithCredential",value:function(e){return iT(this._delegate,I_(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return iT(this._delegate,(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Uk(t),e.next=3,function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ak(t,"POST","/v1/accounts:signInWithCustomToken",ek(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,p_._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(this._delegate,e));var t}},{key:"signInWithEmailAndPassword",value:function(e,t){return iT(this._delegate,V_(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return iT(this._delegate,(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rn(t),a=n_.credentialWithLink(n,r||Wg()),e.abrupt("return",(Gg(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),I_(i,a)));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this._delegate,e,t));var n}},{key:"signInWithPhoneNumber",value:function(e,t){return aT(this._delegate,(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uk(t),e.next=3,Lb(i,n,Rn(r));case 3:return a=e.sent,e.abrupt("return",new Db(a,(function(e){return I_(i,e)})));case 5:case"end":return e.stop()}}),e)}))),function(e,t,r){return n.apply(this,arguments)})(this._delegate,e,t));var n}},{key:"signInWithPopup",value:(n=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(cT(Ww(),this._delegate,"operation-not-supported-in-this-environment"),iT(this._delegate,Wb(this._delegate,t,tT))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"signInWithRedirect",value:(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cT(Ww(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,$w(this._delegate);case 3:return e.abrupt("return",function(e,t,n){return(r=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n,r){var i,a;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uk(t),jg(t,n,r_),a=Ub(i,r),e.next=5,$b(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)})(e,t,n);var r}(this._delegate,t,tT));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return(t=_asyncToGenerator(_regeneratorRuntime.mark((function e(t,n){var r,i;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M_(Rn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(this._delegate,e);var t}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function fT(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&uT.getOrCreate(e))},error:t,complete:n}}function hT(e,t){var n=function(e,t){var n=Xw();if(!n)return[];var r=Ck(Jw,e,t);switch(n.getItem(r)){case Qw.NONE:return[Tk];case Qw.LOCAL:return[bb,ab];case Qw.SESSION:return[ab];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(bb)||n.push(bb),"undefined"!=typeof window)for(var r=0,i=[rb,ab];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Tk)||n.push(Tk),n}lT.Persistence=Qw;var dT=function(){function e(){_classCallCheck(this,e),this.providerId="phone",this._delegate=new Fb(nT(yr.auth()))}return _createClass(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Fb.credential(e,t)}}]),e}();dT.PHONE_SIGN_IN_METHOD=Fb.PHONE_SIGN_IN_METHOD,dT.PROVIDER_ID=Fb.PROVIDER_ID;var pT=Gg,vT=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yr.app();_classCallCheck(this,e),pT(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Pb(t,n,i.auth()),this.type=this._delegate.type}return _createClass(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();function mT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mT(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.INTERNAL.registerComponent(new On("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new lT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:n_,FacebookAuthProvider:o_,GithubAuthProvider:u_,GoogleAuthProvider:s_,OAuthProvider:a_,SAMLAuthProvider:l_,PhoneAuthProvider:dT,PhoneMultiFactorGenerator:Iw,RecaptchaVerifier:vT,TwitterAuthProvider:f_,Auth:lT,AuthCredential:qk,Error:yn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.7")}(yr),cr("firebase","9.6.5","app"),ir({apiKey:"AIzaSyBl8W9RrVdHfGHeOUabv3YhyTtpLgsaEh8",authDomain:"photoshop-7452d.firebaseapp.com",projectId:"photoshop-7452d",storageBucket:"photoshop-7452d.appspot.com",messagingSenderId:"426997386559",appId:"1:426997386559:web:9b791f81887d1876a9d78a",measurementId:"G-SSLTY6JCHK"});var gT=new s_;gT.setCustomParameters({prompt:"select_account"});var kT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar();return Zn(e,"firestore").getImmediate()}(),_T=Nw(),bT=function(){Wb(_T,gT).catch((function(e){var t=e.code,n=e.message,r=e.email,i=s_.credentialFromError(e);console.log({errorCode:t,errorMessage:n,email:r,credential:i})}))},wT=function(){var e=Re(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=Um(kT,"users/".concat(t.uid)),e.next=5,$y(r);case 5:if(e.sent.exists()){e.next=17;break}return i=t.displayName,a=t.email,o=new Date,e.prev=9,e.next=12,Xy(r,yT({displayName:i,email:a,createdAt:o},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}(),TT=function(e){return e.cart},CT=(0,ut.createSelector)([TT],(function(e){return e.cartItems})),xT=(0,ut.createSelector)([TT],(function(e){return e.hidden})),ET=(0,ut.createSelector)([CT],(function(e){return e.reduce((function(e,t){return e+t.quantity*t.price}),0)})),IT=(0,ut.createSelector)([CT],(function(e){return e.reduce((function(e,t){return e+t.quantity}),0)})),ST=n(415),RT={};RT.styleTagTransform=Xe(),RT.setAttributes=Ye(),RT.insert=Ke().bind(null,"head"),RT.domAPI=He(),RT.insertStyleElement=$e(),Be()(ST.Z,RT),ST.Z&&ST.Z.locals&&ST.Z.locals;var AT=Ie((0,ut.createStructuredSelector)({itemCount:IT}),(function(e){return{toggleCartHidden:function(){return e(It())}}}))((function(e){var t=e.toggleCartHidden,n=e.itemCount;return a().createElement("div",{className:"cart-icon",onClick:t},a().createElement(rn,{className:"shopping-icon"}),a().createElement("span",{className:"item-count"},n))})),OT=n(5044),NT={};NT.styleTagTransform=Xe(),NT.setAttributes=Ye(),NT.insert=Ke().bind(null,"head"),NT.domAPI=He(),NT.insertStyleElement=$e(),Be()(OT.Z,NT),OT.Z&&OT.Z.locals&&OT.Z.locals;var PT=n(410),DT={};DT.styleTagTransform=Xe(),DT.setAttributes=Ye(),DT.insert=Ke().bind(null,"head"),DT.domAPI=He(),DT.insertStyleElement=$e(),Be()(PT.Z,DT),PT.Z&&PT.Z.locals&&PT.Z.locals;var LT=function(e){var t=e.item,n=t.imageUrl,r=t.price,i=t.name,o=t.quantity;return a().createElement("div",{className:"cart-item"},a().createElement("img",{src:n,alt:"item"}),a().createElement("div",{className:"item-details"},a().createElement("span",{className:"name"},i),a().createElement("span",{className:"price"},o," x $",r)))},MT=Ie((0,ut.createStructuredSelector)({cartItems:CT}))((function(e){var t=e.cartItems,n=e.dispatch,r=E();return a().createElement("div",{className:"cart-dropdown"},a().createElement("div",{className:"cart-items"},t.length?t.map((function(e){return a().createElement(LT,{key:e.id,item:e})})):a().createElement("span",{className:"empty-message"},"Your cart is empty")),a().createElement(wt,{onClick:function(){r("/checkout"),n(It())}},"GO TO CHECKOUT"))})),FT=(0,ut.createSelector)([function(e){return e.user}],(function(e){return e.currentUser})),UT=Ie((0,ut.createStructuredSelector)({currentUser:FT,hidden:xT}))((function(e){var t=e.currentUser,n=e.hidden;return a().createElement("div",{className:"header"},a().createElement(z,{className:"logo-container",to:"/"},a().createElement(nn,{className:"logo"})),a().createElement("div",{className:"options"},a().createElement(z,{className:"option",to:"/shop"},"SHOP"),a().createElement(z,{className:"option",to:"/contact"},"CONTACT"),t?a().createElement("div",{className:"option",onClick:function(){return _T.signOut()}},"SIGN OUT"):a().createElement(z,{className:"option",to:"/signin"},"SIGN IN"),a().createElement(AT,null)),n?null:a().createElement(MT,null))})),jT=n(9113),VT={};VT.styleTagTransform=Xe(),VT.setAttributes=Ye(),VT.insert=Ke().bind(null,"head"),VT.domAPI=He(),VT.insertStyleElement=$e(),Be()(jT.Z,VT),jT.Z&&jT.Z.locals&&jT.Z.locals;var GT=n(3666),qT={};qT.styleTagTransform=Xe(),qT.setAttributes=Ye(),qT.insert=Ke().bind(null,"head"),qT.domAPI=He(),qT.insertStyleElement=$e(),Be()(GT.Z,qT),GT.Z&&GT.Z.locals&&GT.Z.locals;var BT=function(e){return a().createElement("div",{className:"group"},a().createElement("input",u({className:"form-input",onChange:e.handleChange},e)),e.label?a().createElement("label",{className:"".concat(e.value.length?"shrink":""," form-input-label")},e.label):null)},zT=function(e){Le(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ue(t);if(n){var i=Ue(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Fe(this,e)});function i(e){var t;return Ae(this,i),je(Pe(t=r.call(this,e)),"handleSubmit",function(){var e=Re(Ge().mark((function e(n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=t.state,i=r.email,a=r.password,e.prev=2,o=Nw(),e.next=6,V_(o,i,a);case 6:t.setState({email:"",password:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()),je(Pe(t),"handleChange",(function(e){var n=e.target,r=n.value,i=n.name;t.setState(je({},i,r))})),t.state={email:"",password:""},t}return Ne(i,[{key:"render",value:function(){return a().createElement("div",{className:"sign-in"},a().createElement("h2",null,"SIGN IN"),a().createElement("form",{onSubmit:this.handleSubmit},a().createElement(BT,{name:"email",type:"email",value:this.state.email,handleChange:this.handleChange,label:"email",required:!0}),a().createElement(BT,{name:"password",type:"password",value:this.state.password,handleChange:this.handleChange,label:"password",required:!0}),a().createElement("div",{className:"buttons"},a().createElement(wt,{type:"submit"},"Sign In"),a().createElement(wt,{type:"button",onClick:bT,isGoogleSignIn:!0},"Sign In With Google"))))}}]),i}(a().Component),HT=zT,WT=n(3589),KT={};KT.styleTagTransform=Xe(),KT.setAttributes=Ye(),KT.insert=Ke().bind(null,"head"),KT.domAPI=He(),KT.insertStyleElement=$e(),Be()(WT.Z,KT),WT.Z&&WT.Z.locals&&WT.Z.locals;var QT=function(e){Le(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ue(t);if(n){var i=Ue(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Fe(this,e)});function i(){var e;return Ae(this,i),je(Pe(e=r.call(this)),"handleSubmit",function(){var t=Re(Ge().mark((function t(n){var r,i,a,o,s,u,c,l;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,i=r.displayName,a=r.email,o=r.password,s=r.confirmPassword,o===s){t.next=5;break}return alert("passwords don't match"),t.abrupt("return");case 5:return t.prev=5,u=Nw(),t.next=9,U_(u,a,o);case 9:return c=t.sent,l=c.user,t.next=13,wT(l,{displayName:i});case 13:e.setState({displayName:"",email:"",password:"",confirmPassword:""}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[5,16]])})));return function(e){return t.apply(this,arguments)}}()),je(Pe(e),"handleChange",(function(t){var n=t.target,r=n.name,i=n.value;e.setState(je({},r,i))})),e.state={displayName:"",email:"",password:"",confirmPassword:""},e}return Ne(i,[{key:"render",value:function(){var e=this.state,t=e.displayName,n=e.email,r=e.password,i=e.confirmPassword;return a().createElement("div",{className:"sign-up"},a().createElement("h2",{className:"title"},"CREATE AN ACCOUNT"),a().createElement("form",{className:"sign-up-form",onSubmit:this.handleSubmit},a().createElement(BT,{type:"text",name:"displayName",value:t,onChange:this.handleChange,label:"Display Name",required:!0}),a().createElement(BT,{type:"email",name:"email",value:n,onChange:this.handleChange,label:"Email",required:!0}),a().createElement(BT,{type:"password",name:"password",value:r,onChange:this.handleChange,label:"Password",required:!0}),a().createElement(BT,{type:"password",name:"confirmPassword",value:i,onChange:this.handleChange,label:"Confirm Password",required:!0}),a().createElement(wt,{type:"submit"},"SIGN UP")))}}]),i}(a().Component),YT=n(8928),JT={};JT.styleTagTransform=Xe(),JT.setAttributes=Ye(),JT.insert=Ke().bind(null,"head"),JT.domAPI=He(),JT.insertStyleElement=$e(),Be()(YT.Z,JT),YT.Z&&YT.Z.locals&&YT.Z.locals;var $T=function(){return a().createElement("div",{className:"sign-in-and-sign-up"},a().createElement(HT,null),a().createElement(QT,null))},ZT="SET_CURRENT_USER",XT=n(6270),eC={};eC.styleTagTransform=Xe(),eC.setAttributes=Ye(),eC.insert=Ke().bind(null,"head"),eC.domAPI=He(),eC.insertStyleElement=$e(),Be()(XT.Z,eC),XT.Z&&XT.Z.locals&&XT.Z.locals;var tC=Ie(null,(function(e){return{clearItem:function(t){return e(function(e){return{type:Et,payload:e}}(t))},addItem:function(t){return e(St(t))},removeItem:function(t){return e(function(e){return{type:xt,payload:e}}(t))}}}))((function(e){var t=e.cartItem,n=e.clearItem,r=e.addItem,i=e.removeItem,o=t.name,s=t.imageUrl,u=t.price,c=t.quantity;return a().createElement("div",{className:"checkout-item"},a().createElement("div",{className:"image-container"},a().createElement("img",{src:s,alt:"item"})),a().createElement("span",{className:"name"},o),a().createElement("span",{className:"quantity"},a().createElement("div",{className:"arrow",onClick:function(){return i(t)}},""),a().createElement("span",{className:"value"},c),a().createElement("div",{className:"arrow",onClick:function(){return r(t)}},"")),a().createElement("span",{className:"price"},"$",u),a().createElement("div",{className:"remove-button",onClick:function(){return n(t)}},""))})),nC=n(2052),rC=function(e){var t=e.price,n=100*t;return a().createElement(nC.Z,{label:"Pay Now",name:"Photo Shop LLC",billingAddress:!0,shippingAddress:!0,description:"Your total is $".concat(t),amount:n,panelLabel:"Pay Now",token:function(e){alert("Payment Successful")},stripeKey:"pk_test_51HBtEJLHsr0LAgoetpM65MvJiNYTm9AUuUIuw03MixwlKxTWPkGQzzwyj4Z7C33R1Tl1wN5zkSImAGrW6WIvkbbR00VZeqBfDy"})},iC=n(5302),aC={};aC.styleTagTransform=Xe(),aC.setAttributes=Ye(),aC.insert=Ke().bind(null,"head"),aC.domAPI=He(),aC.insertStyleElement=$e(),Be()(iC.Z,aC),iC.Z&&iC.Z.locals&&iC.Z.locals;var oC=Ie((0,ut.createStructuredSelector)({cartItems:CT,total:ET}))((function(e){var t=e.cartItems,n=e.total;return a().createElement("div",{className:"checkout-page"},a().createElement("div",{className:"checkout-header"},a().createElement("div",{className:"header-block"},a().createElement("span",null,"Product")),a().createElement("div",{className:"header-block"},a().createElement("span",null,"Description")),a().createElement("div",{className:"header-block"},a().createElement("span",null,"Quantity")),a().createElement("div",{className:"header-block"},a().createElement("span",null,"Price")),a().createElement("div",{className:"header-block"},a().createElement("span",null,"Remove"))),t.map((function(e){return a().createElement(tC,{key:e.id,cartItem:e})})),a().createElement("div",{className:"total"},a().createElement("span",null,"Total: $",n)),a().createElement("div",{className:"test-warning"},"*Please use the following test credit card for payment*",a().createElement("br",null),"4242 4242 4242 4242 - Exp: 01/23 - CVV: 123"),a().createElement(rC,{price:n}))}));function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sC(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cC=function(e){Le(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ue(t);if(n){var i=Ue(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Fe(this,e)});function i(){var e;Ae(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return je(Pe(e=r.call.apply(r,[this].concat(n))),"unsubscribeFromAuth",null),e}return Ne(i,[{key:"componentDidMount",value:function(){var e=this.props.setCurrentUser;this.unsubscribeFromAuth=_T.onAuthStateChanged(function(){var t=Re(Ge().mark((function t(n){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}return t.next=3,wT(n);case 3:tg(t.sent,(function(t){e(uC({id:t.id},t.data()))})),t.next=8;break;case 7:e(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return a().createElement("div",null,a().createElement(UT,null),a().createElement(T,null,a().createElement(b,{exact:!0,path:"/",element:a().createElement(pt,null)}),a().createElement(b,{path:"/shop/*",element:a().createElement(Ht,null)}),a().createElement(b,{exact:!0,path:"/checkout",element:a().createElement(oC,null)}),a().createElement(b,{path:"/signin",element:this.props.currentUser?a().createElement(k,{replace:!0,to:"/"}):a().createElement($T,null)})))}}]),i}(a().Component),lC=Ie((0,ut.createStructuredSelector)({currentUser:FT}),(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:ZT,payload:e}}(t))}}}))(cC);function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fC(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dC(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var pC="function"==typeof Symbol&&Symbol.observable||"@@observable",vC=function(){return Math.random().toString(36).substring(7).split("").join(".")},mC={INIT:"@@redux/INIT"+vC(),REPLACE:"@@redux/REPLACE"+vC(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+vC()}};function yC(e){if("object"!=_typeof(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function gC(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(dC(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(dC(1));return n(gC)(e,t)}if("function"!=typeof e)throw new Error(dC(2));var i=e,a=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(dC(3));return a}function f(e){if("function"!=typeof e)throw new Error(dC(4));if(u)throw new Error(dC(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(dC(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function h(e){if(!yC(e))throw new Error(dC(7));if(void 0===e.type)throw new Error(dC(8));if(u)throw new Error(dC(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++)(0,t[n])();return e}function d(e){if("function"!=typeof e)throw new Error(dC(10));i=e,h({type:mC.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!=_typeof(e)||null===e)throw new Error(dC(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[pC]=function(){return this},e}return h({type:mC.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[pC]=p,r}function kC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var _C="persist:",bC="persist/FLUSH",wC="persist/REHYDRATE",TC="persist/PAUSE",CC="persist/PERSIST",xC="persist/PURGE",EC="persist/REGISTER";function IC(e){return IC="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},IC(e)}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AC(e){return JSON.stringify(e)}function OC(e){return JSON.parse(e)}function NC(e){}function PC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PC(n,!0).forEach((function(t){LC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PC(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MC(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FC(n,!0).forEach((function(t){jC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VC={registry:[],bootstrapped:!1},GC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case EC:return UC({},e,{registry:[].concat(MC(e.registry),[t.key])});case wC:var n=e.registry.indexOf(t.key),r=MC(e.registry);return r.splice(n,1),UC({},e,{registry:r,bootstrapped:0===r.length});default:return e}},qC=n(4500),BC=n.n(qC),zC=n(6734);function HC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HC(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var KC={currentUser:null};function QC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YC(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $C=function(e,t){return e.find((function(e){return e.id===t.id}))?e.map((function(e){return e.id===t.id?JC(JC({},e),{},{quantity:e.quantity+1}):e})):[].concat(function(e){if(Array.isArray(e))return QC(e)}(n=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return QC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QC(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[JC(JC({},t),{},{quantity:1})]);var n},ZC=function(e,t){return 1===e.find((function(e){return e.id===t.id})).quantity?e.filter((function(e){return e.id!==t.id})):e.map((function(e){return e.id===t.id?JC(JC({},e),{},{quantity:e.quantity-1}):e}))};function XC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ex(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XC(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tx={hidden:!0,cartItems:[]},nx=n.p+"42b57a03d20dff7a14ffe10d83cd74ff.jpg";n.p;var rx,ix,ax,ox,sx,ux,cx,lx,fx,hx,dx={sections:[{title:"Fine Art Prints",imageUrl:nx,id:1,size:"large",linkUrl:"/shop/fineartprints"}]},px={collections:{fineartprints:{id:1,title:"Fine Art Prints",routeName:"fineartprints",items:[{id:1,name:"New York",imageUrl:nx,price:300}]}}},vx={key:"root",storage:zC.Z,whitelist:["cart"]},mx=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:mC.INIT}))throw new Error(dC(12));if(void 0===n(void 0,{type:mC.PROBE_UNKNOWN_ACTION()}))throw new Error(dC(13))}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],f=c(l,t);if(void 0===f)throw t&&t.type,new Error(dC(14));i[u]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KC,t=arguments.length>1?arguments[1]:void 0;return t.type===ZT?WC(WC({},e),{},{currentUser:t.payload}):e},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tt:return ex(ex({},e),{},{hidden:!e.hidden});case Ct:return ex(ex({},e),{},{cartItems:$C(e.cartItems,t.payload)});case xt:return ex(ex({},e),{},{cartItems:ZC(e.cartItems,t.payload)});case Et:return ex(ex({},e),{},{cartItems:e.cartItems.filter((function(e){return e.id!==t.payload.id}))});default:return e}},directory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dx,t=arguments.length>1?arguments[1]:void 0;return t.type,e},shop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:px,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),yx=(ix=mx,ax=void 0!==(rx=vx).version?rx.version:-1,ox=void 0===rx.stateReconciler?function(e,t,n,r){r.debug;var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SC(n,!0).forEach((function(t){RC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return e&&"object"===IC(e)&&Object.keys(e).forEach((function(r){"_persist"!==r&&t[r]===n[r]&&(i[r]=e[r])})),i}:rx.stateReconciler,sx=rx.getStoredState||function(e){var t,n=e.transforms||[],r="".concat(void 0!==e.keyPrefix?e.keyPrefix:_C).concat(e.key),i=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:OC,i.getItem(r).then((function(e){if(e)try{var r={},i=t(e);return Object.keys(i).forEach((function(e){r[e]=n.reduceRight((function(t,n){return n.out(t,e,i)}),t(i[e]))})),r}catch(e){throw e}}))},ux=void 0!==rx.timeout?rx.timeout:5e3,cx=null,lx=!1,fx=!0,hx=function(e){return e._persist.rehydrated&&cx&&!fx&&cx.update(e),e},function(e,t){var n=e||{},r=n._persist,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,["_persist"]);if(t.type===CC){var a=!1,o=function(e,n){a||(t.rehydrate(rx.key,e,n),a=!0)};if(ux&&setTimeout((function(){!a&&o(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(rx.key,'"')))}),ux),fx=!1,cx||(cx=function(e){var t,n=e.blacklist||null,r=e.whitelist||null,i=e.transforms||[],a=e.throttle||0,o="".concat(void 0!==e.keyPrefix?e.keyPrefix:_C).concat(e.key),s=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:AC;var u=e.writeFailHandler||null,c={},l={},f=[],h=null,d=null;function p(){if(0===f.length)return h&&clearInterval(h),void(h=null);var e=f.shift(),n=i.reduce((function(t,n){return n.in(t,e,c)}),c[e]);if(void 0!==n)try{l[e]=t(n)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete l[e];0===f.length&&(Object.keys(l).forEach((function(e){void 0===c[e]&&delete l[e]})),d=s.setItem(o,t(l)).catch(m))}function v(e){return!(r&&-1===r.indexOf(e)&&"_persist"!==e||n&&-1!==n.indexOf(e))}function m(e){u&&u(e)}return{update:function(e){Object.keys(e).forEach((function(t){v(t)&&c[t]!==e[t]&&-1===f.indexOf(t)&&f.push(t)})),Object.keys(c).forEach((function(t){void 0===e[t]&&v(t)&&-1===f.indexOf(t)&&void 0!==c[t]&&f.push(t)})),null===h&&(h=setInterval(p,a)),c=e},flush:function(){for(;0!==f.length;)p();return d||Promise.resolve()}}}(rx)),r)return DC({},ix(i,t),{_persist:r});if("function"!=typeof t.rehydrate||"function"!=typeof t.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return t.register(rx.key),sx(rx).then((function(e){(rx.migrate||function(e,t){return Promise.resolve(e)})(e,ax).then((function(e){o(e)}),(function(e){o(void 0,e)}))}),(function(e){o(void 0,e)})),DC({},ix(i,t),{_persist:{version:ax,rehydrated:!1}})}if(t.type===xC)return lx=!0,t.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:_C).concat(e.key);return t.removeItem(n,NC)}(rx)),DC({},ix(i,t),{_persist:r});if(t.type===bC)return t.result(cx&&cx.flush()),DC({},ix(i,t),{_persist:r});if(t.type===TC)fx=!0;else if(t.type===wC){if(lx)return DC({},i,{_persist:DC({},r,{rehydrated:!0})});if(t.key===rx.key){var s=ix(i,t),u=t.payload,c=DC({},!1!==ox&&void 0!==u?ox(u,e,s,rx):s,{_persist:DC({},r,{rehydrated:!0})});return hx(c)}}if(!r)return ix(e,t);var l=ix(i,t);return l===i?e:hx(DC({},l,{_persist:r}))}),gx=[BC()],kx=gC(yx,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(dC(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=kC.apply(void 0,a)(n.dispatch),hC(hC({},n),{},{dispatch:r})}}}.apply(void 0,gx)),_x=function(e,t,n){var r=!1,i=gC(GC,VC,void 0),a=function(e){i.dispatch({type:EC,key:e})},o=function(t,n,a){var o={type:wC,payload:n,err:a,key:t};e.dispatch(o),i.dispatch(o),r&&s.getState().bootstrapped&&(r(),r=!1)},s=UC({},i,{purge:function(){var t=[];return e.dispatch({type:xC,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:bC,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:TC})},persist:function(){e.dispatch({type:CC,register:a,rehydrate:o})}});return s.persist(),s}(kx);function bx(e){return bx="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},bx(e)}function wx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tx(e,t){return!t||"object"!==bx(t)&&"function"!=typeof t?xx(e):t}function Cx(e){return Cx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cx(e)}function xx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ex(e,t){return Ex=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ex(e,t)}function Ix(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sx=function(e){function t(){var e,n;wx(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Ix(xx(n=Tx(this,(e=Cx(t)).call.apply(e,[this].concat(i)))),"state",{bootstrapped:!1}),Ix(xx(n),"_unsubscribe",void 0),Ix(xx(n),"handlePersistorState",(function(){n.props.persistor.getState().bootstrapped&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally((function(){return n.setState({bootstrapped:!0})})):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())})),n}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ex(e,t)}(t,e),(n=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),t}(i.PureComponent);Ix(Sx,"defaultProps",{children:null,loading:null}),s().render(a().createElement((function(e){var t=e.store,n=e.context,r=e.children,o=(0,i.useMemo)((function(){var e=Q(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),s=(0,i.useMemo)((function(){return t.getState()}),[t]);Y((function(){var e=o.subscription;return e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,s]);var u=n||H;return a().createElement(u.Provider,{value:o},r)}),{store:kx},a().createElement((function(e){var t=e.basename,n=e.children,r=e.window,a=(0,i.useRef)();null==a.current&&(a.current=function(e){function t(){var e=o.location,t=s.state||{};return[t.idx,{pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"}]}function n(e){return"string"==typeof e?e:d(e)}function r(e,t){return void 0===t&&(t=null),u({pathname:y.pathname,hash:"",search:""},"string"==typeof e?p(e):e,{state:t,key:Math.random().toString(36).substr(2,8)})}function i(e){v=e,e=t(),m=e[0],y=e[1],g.call({action:v,location:y})}function a(e){s.go(e)}void 0===e&&(e={});var o=void 0===(e=e.window)?document.defaultView:e,s=o.history,l=null;o.addEventListener("popstate",(function(){if(l)k.call(l),l=null;else{var e=c.Pop,n=t(),r=n[0];if(n=n[1],k.length){if(null!=r){var o=m-r;o&&(l={action:e,location:n,retry:function(){a(-1*o)}},a(o))}}else i(e)}}));var v=c.Pop,m=(e=t())[0],y=e[1],g=h(),k=h();return null==m&&(m=0,s.replaceState(u({},s.state,{idx:m}),"")),{get action(){return v},get location(){return y},createHref:n,push:function e(t,a){var u=c.Push,l=r(t,a);if(!k.length||(k.call({action:u,location:l,retry:function(){e(t,a)}}),0)){var f=[{usr:l.state,key:l.key,idx:m+1},n(l)];l=f[0],f=f[1];try{s.pushState(l,"",f)}catch(e){o.location.assign(f)}i(u)}},replace:function e(t,a){var o=c.Replace,u=r(t,a);k.length&&(k.call({action:o,location:u,retry:function(){e(t,a)}}),1)||(u=[{usr:u.state,key:u.key,idx:m},n(u)],s.replaceState(u[0],"",u[1]),i(o))},go:a,back:function(){a(-1)},forward:function(){a(1)},listen:function(e){return g.push(e)},block:function(e){var t=k.push(e);return 1===k.length&&o.addEventListener("beforeunload",f),function(){t(),k.length||o.removeEventListener("beforeunload",f)}}}}({window:r}));var o=a.current,s=(0,i.useState)({action:o.action,location:o.location}),l=_slicedToArray(s,2),v=l[0],m=l[1];return(0,i.useLayoutEffect)((function(){return o.listen(m)}),[o]),(0,i.createElement)(w,{basename:t,children:n,location:v.location,navigationType:v.action,navigator:o})}),null,a().createElement(Sx,{persistor:_x},a().createElement(lC,null)))),document.getElementById("root"))}()}();